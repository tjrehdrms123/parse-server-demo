<!DOCTYPE html>
<!-- saved from url=(0056)/js/guide/#getting-started -->
<html class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  

  <title>JavaScript Developers Guide | Parse</title>

  <link rel="apple-touch-icon" sizes="57x57" href="/img/favicon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/img/favicon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/img/favicon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/img/favicon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/img/favicon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/img/favicon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/img/favicon/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/img/favicon/favicon-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/img/favicon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/img/favicon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/img/favicon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/img/favicon/favicon-32x32.png" sizes="32x32">
  <meta name="apple-mobile-web-app-title" content="Parse">
  <meta name="msapplication-TileColor" content="#5298fc">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="application-name" content="Parse">

  <meta name="theme-color" content="#5298fc">
  <script type="text/javascript" async="" src="./JavaScriptDevelopersGuide_Parse_files/analytics.js"></script><script>if(Function('/*@cc_on return document.documentMode===10@*/')()){document.documentElement.className+=' ie10';}</script>

  <meta name="csrf-param" content="authenticity_token">
  <meta name="csrf-token" content="KxDoKysxiXDIRV8VXwDYlQStDGzjbGZ24y6ZgQLYAsE=">
  <meta name="description" content="Focus on creating unique &amp; engaging apps on any platform. We take care of everything else your app needs, from the core of your app to analytics and push notifications.">
  <meta name="keywords" content="backend, mobile, development, server, code">
  <meta property="fb:app_id" content="361736430535656">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Parse">
  <meta property="og:image" content="/assets/images/social.jpg">
  <meta property="og:description" content="Focus on creating unique &amp; engaging apps on any platform. We take care of everything else your app needs, from the core of your app to analytics and push notifications.">
  <meta property="og:url" content="/js/guide/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--[if lte IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/2014.01.31/classList.min.js"></script>
  <![endif]-->

  <!-- CSS -->
  <!-- build:css -->
  <link rel="preconnect" href="/js/guide/">
  
  
  <style class="anchorjs"></style><link href="./JavaScriptDevelopersGuide_Parse_files/guide.css" rel="stylesheet" type="text/css">
  
  <link href="./JavaScriptDevelopersGuide_Parse_files/docsearch.min.css" rel="stylesheet">
  <!-- endbuild -->
  <!--[if lt IE 8]>
      <link rel="stylesheet" type="text/css" href="/stylesheets/ie7.css" />
  <![endif]-->
  <!--[if IE 8]>
      <link rel="stylesheet" type="text/css" href="/stylesheets/ie8.css" />
  <![endif]-->
  <!--[if lt IE 10]>
      <link rel="stylesheet" type="text/css" href="/stylesheets/ie89.css" />
  <![endif]-->
<link type="text/css" rel="stylesheet" charset="UTF-8" href="./JavaScriptDevelopersGuide_Parse_files/translateelement.css"></head>

  

<body class="pure p_docs p_docs_show_guide user_logged_in" style="position: relative;">
  <div class="site__wrapper">
    <div class="site__content">

      <aside class="site__menu">
    <nav class="site__menu__nav">
        <ul>
            <li><a href="/">Docs</a></li>
            <li><a href="http://blog.parseplatform.org/">Blog</a></li>
        </ul>
    </nav>

    <div class="site__menu__socials">
        <h4 class="h4" id="stay-connected"><a class="anchorjs-link " href="/js/guide/#stay-connected" aria-label="Anchor link for: stay connected" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Stay Connected</h4>

        <ul>
            <li>
                <a href="https://twitter.com/parseplatform">
                    <svg class="icon icon-twitter"><use xlink:href="/assets/symbols.svg#twitter"></use></svg>
                </a>
            </li>
            <li>
                <a href="http://parseplatform.org/">
                    <svg class="icon icon-github"><use xlink:href="/assets/symbols.svg#github"></use></svg>
                </a>
            </li>
            <li>
                <a href="https://stackoverflow.com/questions/tagged/parse-platform">
                    <svg class="icon icon-stack-overflow"><use xlink:href="/assets/symbols.svg#stack-overflow"></use></svg>
                </a>
            </li>
        </ul>

        <p class="site__menu__build-together">Let’s build together.</p>
    </div>
</aside>

      <div class="content__wrapper">
        <header class="site__header site__header--white">
    <div class="container">

        <a href="/" class="header-logo">
            <span class="hidden">Parse</span>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 152 60" style="enable-background:new 0 0 152 60;" xml:space="preserve">
            <g>
            	<path class="line one" d="M23.072,39.678c-0.011,3.348-2.395,4.615-4.909,4.615c-2.851,0-4.541-1.701-4.541-4.357
            		c0-2.964,2.031-4.667,5.35-4.725h13.611c6.428,0.079,10.137-5.391,10.137-9.953c0-4.598-3.485-9.598-9.622-9.842
            		c-6.083-0.242-9.99,5.281-9.99,11.167v3.863"></path>
            	<path class="line two" d="M23.072,39.678c-0.011,3.348-2.395,4.615-4.909,4.615c-2.851,0-4.541-1.701-4.541-4.357
            		c0-2.964,2.031-4.667,5.35-4.725h13.611c6.428,0.079,10.137-5.391,10.137-9.953c0-4.598-3.485-9.598-9.622-9.842
            		c-6.083-0.242-9.99,5.281-9.99,11.167v3.863"></path>
            	<path class="line three" d="M23.072,39.678c-0.011,3.348-2.395,4.615-4.909,4.615c-2.851,0-4.541-1.701-4.541-4.357
            		c0-2.964,2.031-4.667,5.35-4.725h13.611c6.428,0.079,10.137-5.391,10.137-9.953c0-4.598-3.485-9.598-9.622-9.842
            		c-6.083-0.242-9.99,5.281-9.99,11.167v3.863"></path>
            	<path class="st1" d="M151.88,31.106c0-4.561-2.575-7.835-7.173-7.872c-5.665-0.037-9.197,4.12-9.197,10.484v0.11
            		c0,6.033,3.863,9.601,9.601,9.601c1.839,0,4.083-0.405,5.739-1.177v-3.568c-1.839,0.956-3.752,1.398-5.408,1.398
            		c-3.568,0-6.07-1.803-6.18-5.959h12.36C151.807,33.056,151.88,32.026,151.88,31.106z M148.312,31.07h-8.829
            		c0.625-3.053,2.354-4.745,4.966-4.745c2.575,0,3.863,1.729,3.863,4.561V31.07z"></path>
            	<path class="st1" d="M125.725,34.712l0.405,0.147c2.869,1.03,3.531,1.655,3.531,2.906c0,1.471-0.993,2.428-3.458,2.428
            		c-1.986,0-4.12-0.662-6.364-1.692v3.752c1.803,0.699,4.12,1.177,6.364,1.177c4.819,0,7.21-2.428,7.21-5.812
            		c0-2.943-1.471-4.525-5.408-5.959l-0.405-0.147c-3.127-1.14-3.752-1.655-3.752-2.869c0-1.361,0.956-2.281,3.237-2.281
            		c1.839,0,3.642,0.589,5.408,1.435v-3.531c-1.582-0.625-3.348-1.03-5.26-1.03c-4.598,0-7.1,2.575-7.1,5.886
            		C120.134,31.695,121.679,33.24,125.725,34.712"></path>
            	<path class="st1" d="M110.863,29.892c1.288-2.023,3.09-3.016,5.26-3.016c0.773,0,1.508,0.11,2.17,0.331v-3.384
            		c-0.625-0.258-1.361-0.405-2.134-0.405c-2.281,0-4.01,1.03-5.518,3.09l-0.258-2.869h-3.164v19.386h3.642V29.892z"></path>
            	<path class="st1" d="M96.481,23.197c-2.281,0-4.672,0.699-6.474,1.692v3.605c2.023-1.251,4.378-2.023,6.254-2.023
            		c2.612,0,3.679,1.14,3.679,3.274v1.619c-5.334,0.147-8.461,1.03-10.116,2.685c-1.177,1.14-1.692,2.685-1.692,4.267
            		c0,3.274,2.354,5.15,5.702,5.15c2.244,0,4.378-0.92,6.327-2.796l0.221,2.354h3.164V30.003
            		C103.544,25.405,101.263,23.197,96.481,23.197z M99.938,37.728c-1.471,1.619-3.2,2.722-5.297,2.722
            		c-1.729,0-2.833-0.883-2.833-2.428c0-2.281,1.876-3.642,8.13-3.826V37.728z"></path>
            	<path class="st1" d="M77.609,17.643h-8.571v25.383h3.826v-8.314h4.745c5.923,0,9.491-3.164,9.491-8.498V26.14
            		C87.1,20.806,83.532,17.643,77.609,17.643z M83.311,26.214c0,3.421-1.986,5.04-5.444,5.04h-5.003V21.101h5.04
            		c3.421,0,5.408,1.619,5.408,5.04V26.214z"></path>
            	<path class="st1" d="M27.838,2.192C12.204,2.192-0.12,14.589-0.12,30.15c0,15.597,12.323,27.958,27.958,27.958
            		c15.634,0,27.958-12.36,27.958-27.958C55.795,14.589,43.472,2.192,27.838,2.192z M32.473,36.955H18.752
            		c-1.986,0-3.164,1.214-3.164,3.017c0,1.582,1.067,2.722,2.612,2.722c1.766,0,2.796-1.214,2.906-3.016h4.01
            		c-0.184,4.341-2.906,6.658-6.953,6.658c-3.789,0-6.585-2.575-6.585-6.401c0-3.973,2.98-6.769,7.394-6.769h13.611
            		c4.598,0,8.093-3.348,8.093-7.909c0-4.598-3.127-7.799-7.578-7.799c-4.414,0-7.946,3.237-7.946,9.123v3.863h-4.046v-3.863
            		c0-7.872,5.076-12.986,12.066-12.986c6.695,0,11.551,4.782,11.551,11.588C44.723,32.026,39.499,36.955,32.473,36.955z"></path>
            </g>
            </svg>
        </a>

        <a class="header-hamburger" data-menu-trigger="toggle">
            <span class="header-hamburger__wrap">
                <span class="header-hamburger__line--top"></span>
                <span class="header-hamburger__line--middle"></span>
                <span class="header-hamburger__line--bottom"></span>

                <span class="header-hamburger__line--arrow-top"></span>
                <span class="header-hamburger__line--arrow-bottom"></span>
            </span>
        </a>

        <ul class="header-nav">
            <li><a href="/">Docs</a></li>
            <li><a href="https://blog.parseplatform.org/">Blog</a></li>
        </ul>

    </div><!-- container -->
</header>

        <aside class="hero hero--docs js_docs_header">
          <div class="grid-container">
            <div class="col-md--6 col-lg--9">
              <p class="h1 h1--white" data-ignore-from-select="">
                <span>JavaScript <em>Guide</em></span>

                <a href="/" class="btn btn--back">
                  <span class="hide-mobile">Browse all platforms</span>
                  <span class="show-mobile">Browse</span>
                </a>

                <svg class="icon icon-js"><use xlink:href="/assets/symbols.svg#js"></use></svg>

              </p>
            </div>
          </div>
        </aside><!-- .hero -->

        <div class="guide" data-nav-waypoint="">
          <div id="mobile_toc" class="">
          	<select><option data-anchor="#getting-started" selected="true">시작하기</option><option data-anchor="#objects">Objects</option><option data-anchor="#queries">Queries</option><option data-anchor="#live-queries">Live Queries</option><option data-anchor="#users">Users</option><option data-anchor="#sessions">Sessions</option><option data-anchor="#roles">Roles</option><option data-anchor="#files">Files</option><option data-anchor="#promises">Promises</option><option data-anchor="#geopoints">GeoPoints</option><option data-anchor="#local-datastore">Local Datastore</option><option data-anchor="#push-notifications">Push Notifications</option><option data-anchor="#config">Config</option><option data-anchor="#analytics">Analytics</option><option data-anchor="#data">Data</option><option data-anchor="#relations">Relations</option><option data-anchor="#schema">Schema</option><option data-anchor="#error-handling">Error Handling</option><option data-anchor="#security">Security</option><option data-anchor="#performance">Performance</option><option data-anchor="#error-codes">Error Codes</option></select>
          </div>

          <div class="grid-container">
            <div class="col-md--6 col-lg--9">
              <div class="guide_content">
                <div id="toc" style="position: absolute; left: 0px;">
                  <div style="overflow-y: scroll; height: 100%;">
                    <div class="top_links">
                    
                    
                    
                      <a href="https://parse-community.github.io/Parse-SDK-JS/api">API Reference<i class="icon_minimize"></i></a>
                    
                      <!-- .algolia-search-wrapper -->
                      <div class="algolia-search-wrapper">
                        <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input id="algolia-doc-search" class="js_docs_docsearch ds-input" tabindex="0" type="text" placeholder="Search..." autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-label="search input" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: webfont_alright; font-size: 16px; font-style: normal; font-variant: lining-nums; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: optimizelegibility; text-transform: none;"></pre><span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;"><div class="ds-dataset-1"></div></span></span>
                      </div><!-- .algolia-search-wrapper -->
                    </div>
                  </div>
                  
                <ul class="ui_live_toc">
  <li class="ui_live_toc_1 selected" data-name="getting-started"><a href="/js/guide/#getting-started">Getting Started</a></li>
  <li class="ui_live_toc_1"><a href="/js/guide/#objects">Objects</a>
    <ul>
      <li class="ui_live_toc_2" data-name="parseobject"><a href="/js/guide/#parseobject">Parse.Object</a></li>
      <li class="ui_live_toc_2" data-name="saving-objects"><a href="/js/guide/#saving-objects">Saving Objects</a>
        <ul>
          <li class="ui_live_toc_3" data-name="saving-nested-objects"><a href="/js/guide/#saving-nested-objects">Saving Nested Objects</a></li>
          <li class="ui_live_toc_3" data-name="cloud-code-context"><a href="/js/guide/#cloud-code-context">Cloud Code context</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2" data-name="retrieving-objects"><a href="/js/guide/#retrieving-objects">Retrieving Objects</a></li>
      <li class="ui_live_toc_2" data-name="updating-objects"><a href="/js/guide/#updating-objects">Updating Objects</a>
        <ul>
          <li class="ui_live_toc_3" data-name="counters"><a href="/js/guide/#counters">Counters</a></li>
          <li class="ui_live_toc_3" data-name="arrays"><a href="/js/guide/#arrays">Arrays</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2" data-name="destroying-objects"><a href="/js/guide/#destroying-objects">Destroying Objects</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#relational-data">Relational Data</a>
        <ul>
          <li class="ui_live_toc_3" data-name="one-to-one-and-one-to-many-relationships"><a href="/js/guide/#one-to-one-and-one-to-many-relationships">One-to-One and One-to-Many Relationships</a></li>
          <li class="ui_live_toc_3" data-name="many-to-many-relationships"><a href="/js/guide/#many-to-many-relationships">Many-to-Many Relationships</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2" data-name="data-types"><a href="/js/guide/#data-types">Data Types</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#queries">Queries</a>
    <ul>
      <li class="ui_live_toc_2" data-name="basic-queries"><a href="/js/guide/#basic-queries">Basic Queries</a></li>
      <li class="ui_live_toc_2" data-name="query-constraints"><a href="/js/guide/#query-constraints">Query Constraints</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#queries-on-array-values">Queries on Array Values</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#queries-on-string-values">Queries on String Values</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#full-text-search">Full Text Search</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#relational-queries">Relational Queries</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#counting-objects">Counting Objects</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#compound-queries">Compound Queries</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#or-ed-query-constraints">OR-ed query constraints</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#and-ed-query-constraints">AND-ed query constraints</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2" data-name="aggregate"><a href="/js/guide/#aggregate">Aggregate</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#distinct">Distinct</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#read-preference">Read Preference</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#live-queries">Live Queries</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#standard-api">Standard API</a></li>
      <li class="ui_live_toc_2" data-name="create-a-subscription"><a href="/js/guide/#create-a-subscription">Create a subscription</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#event-handling">Event Handling</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#open-event">Open event</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#create-event">Create event</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#update-event">Update event</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#enter-event">Enter event</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#leave-event">Leave event</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#delete-event">Delete event</a></li>
          <li class="ui_live_toc_3" data-name="close-event"><a href="/js/guide/#close-event">Close event</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#unsubscribe">Unsubscribe</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#close">Close</a></li>
      <li class="ui_live_toc_2" data-name="setup-server-url"><a href="/js/guide/#setup-server-url">Setup server URL</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#websocket-status">WebSocket Status</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#open-event-1">Open event</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#close-event-1">Close event</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#error-event">Error event</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#advanced-api">Advanced API</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#livequeryclient">LiveQueryClient</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#initialize">Initialize</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#open">Open</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#subscribe">Subscribe</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#unsubscribe-1">Unsubscribe</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#close-1">Close</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#event-handling-1">Event Handling</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#open-event-2">Open event</a></li>
          <li class="ui_live_toc_3" data-name="close-event-2"><a href="/js/guide/#close-event-2">Close event</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#error-event-1">Error event</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#reconnect">Reconnect</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#sessiontoken">SessionToken</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#users">Users</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#parseuser-properties"><code class="language-plaintext highlighter-rouge">Parse.User</code> Properties</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#signing-up">Signing Up</a></li>
      <li class="ui_live_toc_2" data-name="logging-in"><a href="/js/guide/#logging-in">Logging In</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#verifying-emails">Verifying Emails</a></li>
      <li class="ui_live_toc_2" data-name="current-user"><a href="/js/guide/#current-user">Current User</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#setting-the-current-user">Setting the Current User</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#security-for-user-objects">Security For User Objects</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#encrypting-current-user">Encrypting Current User</a></li>
      <li class="ui_live_toc_2" data-name="security-for-other-objects"><a href="/js/guide/#security-for-other-objects">Security For Other Objects</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#resetting-passwords">Resetting Passwords</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#querying">Querying</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#associations">Associations</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#facebook-users">Facebook Users</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#setting-up-facebook">Setting up Facebook</a></li>
          <li class="ui_live_toc_3" data-name="login--signup"><a href="/js/guide/#login--signup">Login &amp; Signup</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#linking">Linking</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#facebook-sdk-and-parse">Facebook SDK and Parse</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#linking-users">Linking Users</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#signing-up-and-logging-in">Signing Up and Logging In</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#custom-authentication-module">Custom Authentication Module</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#sessions">Sessions</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#session-properties"><code class="language-plaintext highlighter-rouge">Session</code> Properties</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#handling-invalid-session-token-error">Handling Invalid Session Token Error</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#session--security"><code class="language-plaintext highlighter-rouge">Session</code>  Security</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#roles">Roles</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#parserole-properties"><code class="language-plaintext highlighter-rouge">Parse.Role</code> Properties</a></li>
      <li class="ui_live_toc_2" data-name="security-for-role-objects"><a href="/js/guide/#security-for-role-objects">Security for Role Objects</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#role-based-security-for-other-objects">Role Based Security for Other Objects</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#role-hierarchy">Role Hierarchy</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#files">Files</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#creating-a-parsefile">Creating a Parse.File</a>
        <ul>
          <li class="ui_live_toc_3" data-name="client-side"><a href="/js/guide/#client-side">Client Side</a></li>
          <li class="ui_live_toc_3" data-name="server-side"><a href="/js/guide/#server-side">Server Side</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#embedding-files-in-other-objects">Embedding files in other objects</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#retrieving-file-contents">Retrieving File Contents</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#deleting-files">Deleting Files</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#adding-metadata-and-tags">Adding Metadata and Tags</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#promises">Promises</a>
    <ul>
      <li class="ui_live_toc_2" data-name="introduction-to-promises"><a href="/js/guide/#introduction-to-promises">Introduction to Promises</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#the-then-method">The <code class="language-plaintext highlighter-rouge">then</code> Method</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#chaining-promises-together">Chaining Promises Together</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#error-handling-with-promises">Error Handling With Promises</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#promises-in-series">Promises in Series</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#promises-in-parallel">Promises in Parallel</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#creating-async-methods">Creating Async Methods</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#geopoints">GeoPoints</a>
    <ul>
      <li class="ui_live_toc_2" data-name="parsegeopoint"><a href="/js/guide/#parsegeopoint">Parse.GeoPoint</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#geo-queries">Geo Queries</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#caveats">Caveats</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#local-datastore">Local Datastore</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#pinning">Pinning</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#retrieving">Retrieving</a></li>
      <li class="ui_live_toc_2" data-name="querying-the-local-datastore"><a href="/js/guide/#querying-the-local-datastore">Querying the Local Datastore</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#unpinning">Unpinning</a></li>
      <li class="ui_live_toc_2" data-name="pinning-with-labels"><a href="/js/guide/#pinning-with-labels">Pinning with Labels</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#caching-query-results">Caching Query Results</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#dumping-contents">Dumping Contents</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#livequery">LiveQuery</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#push-notifications">Push Notifications</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#introduction">Introduction</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#setting-up-push">Setting Up Push</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#installations">Installations</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#sending-pushes">Sending Pushes</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#using-channels">Using Channels</a></li>
          <li class="ui_live_toc_3" data-name="using-advanced-targeting"><a href="/js/guide/#using-advanced-targeting">Using Advanced Targeting</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#sending-options">Sending Options</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#customizing-your-notifications">Customizing your Notifications</a></li>
          <li class="ui_live_toc_3" data-name="setting-an-expiration-date"><a href="/js/guide/#setting-an-expiration-date">Setting an Expiration Date</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#targeting-by-platform">Targeting by Platform</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2" data-name="scheduling-pushes"><a href="/js/guide/#scheduling-pushes">Scheduling Pushes</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#receiving-pushes">Receiving Pushes</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#troubleshooting">Troubleshooting</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#config">Config</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#save--update-config">Save &amp; Update Config</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#retrieving-config">Retrieving Config</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#internal-config">Internal Config</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#current-config">Current Config</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#parameters">Parameters</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#analytics">Analytics</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#custom-analytics">Custom Analytics</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#data">Data</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#data-storage">Data Storage</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#data-type-lock-in">Data Type Lock-in</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#the-data-browser">The Data Browser</a></li>
      <li class="ui_live_toc_2" data-name="importing-data"><a href="/js/guide/#importing-data">Importing Data</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#exporting-your-data">Exporting your Data</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#export-formats">Export Formats</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#offline-analysis">Offline Analysis</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#relations">Relations</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#one-to-many">One-to-Many</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#using-pointers">Using Pointers</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#using-arrays">Using Arrays</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#many-to-many">Many-to-Many</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#using-parse-relations">Using Parse Relations</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#using-join-tables">Using Join Tables</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#using-an-array">Using an Array</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#one-to-one">One-to-One</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#schema">Schema</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#indexes">Indexes</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#purge">Purge</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#error-handling">Error Handling</a></li>
  <li class="ui_live_toc_1"><a href="/js/guide/#security">Security</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#client-vs-server">Client vs. Server</a></li>
      <li class="ui_live_toc_2" data-name="class-level-permissions"><a href="/js/guide/#class-level-permissions">Class-Level Permissions</a>
        <ul>
          <li class="ui_live_toc_3" data-name="restricting-class-creation"><a href="/js/guide/#restricting-class-creation">Restricting class creation</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#configuring-class-level-permissions">Configuring Class-Level Permissions</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#object-level-access-control">Object-Level Access Control</a>
        <ul>
          <li class="ui_live_toc_3"><a href="/js/guide/#access-control-lists">Access Control Lists</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#pointer-permissions">Pointer Permissions</a></li>
          <li class="ui_live_toc_3" data-name="requires-authentication-permission-requires-parse-server---230"><a href="/js/guide/#requires-authentication-permission-requires-parse-server---230">Requires Authentication permission (requires parse-server  &gt;= 2.3.0)</a></li>
          <li class="ui_live_toc_3" data-name="clp-and-acl-interaction"><a href="/js/guide/#clp-and-acl-interaction">CLP and ACL interaction</a></li>
          <li class="ui_live_toc_3" data-name="security-edge-cases"><a href="/js/guide/#security-edge-cases">Security Edge Cases</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#data-integrity-in-cloud-code">Data Integrity in Cloud Code</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#implementing-business-logic-in-cloud-code">Implementing Business Logic in Cloud Code</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#parse-security-summary">Parse Security Summary</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#performance">Performance</a>
    <ul>
      <li class="ui_live_toc_2"><a href="/js/guide/#write-efficient-queries">Write Efficient Queries</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#indexing">Indexing</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#efficient-query-design">Efficient Query Design</a>
        <ul>
          <li class="ui_live_toc_3" data-name="not-equal-to"><a href="/js/guide/#not-equal-to">Not Equal To</a></li>
          <li class="ui_live_toc_3"><a href="/js/guide/#not-contained-in">Not Contained In</a></li>
          <li class="ui_live_toc_3" data-name="regular-expressions"><a href="/js/guide/#regular-expressions">Regular Expressions</a></li>
        </ul>
      </li>
      <li class="ui_live_toc_2"><a href="/js/guide/#write-restrictive-queries">Write Restrictive Queries</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#client-side-caching">Client-side Caching</a></li>
      <li class="ui_live_toc_2" data-name="use-cloud-code"><a href="/js/guide/#use-cloud-code">Use Cloud Code</a></li>
      <li class="ui_live_toc_2" data-name="avoid-count-operations"><a href="/js/guide/#avoid-count-operations">Avoid Count Operations</a></li>
      <li class="ui_live_toc_2" data-name="implement-efficient-searches"><a href="/js/guide/#implement-efficient-searches">Implement Efficient Searches</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#limits-and-other-considerations">Limits and Other Considerations</a></li>
    </ul>
  </li>
  <li class="ui_live_toc_1"><a href="/js/guide/#error-codes">Error Codes</a>
    <ul>
      <li class="ui_live_toc_2" data-name="api-issues"><a href="/js/guide/#api-issues">API Issues</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#push-related-errors">Push related errors</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#file-related-errors">File related errors</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#installation-related-errors">Installation related errors</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#purchase-related-errors">Purchase related errors</a></li>
      <li class="ui_live_toc_2" data-name="user-related-errors"><a href="/js/guide/#user-related-errors">User related errors</a></li>
      <li class="ui_live_toc_2" data-name="linked-services-errors"><a href="/js/guide/#linked-services-errors">Linked services errors</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#client-only-errors">Client-only errors</a></li>
      <li class="ui_live_toc_2"><a href="/js/guide/#operational-issues">Operational issues</a></li>
      <li class="ui_live_toc_2" data-name="other-issues"><a href="/js/guide/#other-issues">Other issues</a></li>
    </ul>
  </li>
</ul></div>

                <div class="wysiwyg-content">
                  

  
  <div data-source="js/getting-started.md">
    <h1 id="getting-started"><a class="anchorjs-link " href="/js/guide/#getting-started" aria-label="Anchor link for: getting started" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Getting Started</h1>

<p>The easiest way to integrate the Parse SDK into your JavaScript project is through the <a href="https://npmjs.org/parse">npm module</a>.
However, if you want to use a pre-compiled file, you can fetch it from <a href="https://npmcdn.com/">npmcdn</a>. The development version is available at <a href="https://npmcdn.com/parse/dist/parse.js">https://npmcdn.com/parse/dist/parse.js</a>, and the minified production version is at <a href="https://npmcdn.com/parse/dist/parse.min.js">https://npmcdn.com/parse/dist/parse.min.js</a>.</p>

<p>The JavaScript ecosystem is wide and incorporates a large number of platforms and execution environments. To handle this, the Parse npm module contains special versions of the SDK tailored to use in Node.js and <a href="https://facebook.github.io/react-native/">React Native</a> environments. Not all features make sense in all environments, so using the appropriate package will ensure that items like local storage, user sessions, and HTTP requests use appropriate dependencies.</p>

<p>To use the npm modules for a browser based application, include it as you normally would:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-0">📋</button><code id="code-0"><span class="kd">const</span> <span class="nx">Parse</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">parse</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>For server-side applications or Node.js command line tools, include <code class="language-plaintext highlighter-rouge">'parse/node'</code>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-1">📋</button><code id="code-1"><span class="c1">// In a node.js environment</span>
<span class="kd">const</span> <span class="nx">Parse</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">parse/node</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// ES6 Minimized</span>
<span class="k">import</span> <span class="nx">Parse</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">parse/dist/parse.min.js</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<p>For React Native applications, include <code class="language-plaintext highlighter-rouge">'parse/react-native.js'</code>:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-2">📋</button><code id="code-2"><span class="c1">// In a React Native application</span>
<span class="kd">const</span> <span class="nx">Parse</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">parse/react-native.js</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>Additionally on React-Native / Expo environments, make sure to add the piece of code below :</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-3">📋</button><code id="code-3"><span class="c1">//Get your favorite AsyncStorage handler with import (ES6) or require</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AsyncStorage</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span> 

<span class="c1">//Before using the SDK...</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nx">setAsyncStorage</span><span class="p">(</span><span class="nx">AsyncStorage</span><span class="p">);</span>
</code></pre></div></div>

<p>To initialize your own Parse-Server with Javascript, you should replace your current initialization code with this</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-4">📋</button><code id="code-4"><span class="nx">Parse</span><span class="p">.</span><span class="nx">initialize</span><span class="p">(</span><span class="dl">"</span><span class="s2">YOUR_APP_ID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">YOUR_JAVASCRIPT_KEY</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">//javascriptKey is required only if you have it on server.</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">serverURL</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">http://YOUR_PARSE_SERVER:1337/parse</span><span class="dl">'</span>
</code></pre></div></div>

<p>⚠️ If the Masterkey needs to be provided, use the following. Please note that the master key should only be used in safe environments and never on client side ‼️</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-5">📋</button><code id="code-5"><span class="nx">Parse</span><span class="p">.</span><span class="nx">initialize</span><span class="p">(</span><span class="dl">"</span><span class="s2">YOUR_APP_ID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">YOUR_JAVASCRIPT_KEY</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">YOUR_MASTERKEY</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">//javascriptKey is required only if you have it on server.</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">serverURL</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">http://YOUR_PARSE_SERVER:1337/parse</span><span class="dl">'</span>
</code></pre></div></div>

<p>Our JavaScript SDK is originally based on the popular <a href="http://backbonejs.org/">Backbone.js</a> framework, but it provides flexible APIs that allow it to be paired with your favorite JS libraries. Our goal is to minimize configuration and let you quickly start building your JavaScript and HTML5 app on Parse.</p>

<p>Our SDK supports Firefox 23+, Chrome 17+, Safari 5+, and IE 10. IE 9 is supported only for apps that are hosted with HTTPS.</p>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/getting-started.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/objects.md">
    <h1 id="objects"><a class="anchorjs-link " href="/js/guide/#objects" aria-label="Anchor link for: objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Objects</h1>

<h2 id="parseobject"><a class="anchorjs-link " href="/js/guide/#parseobject" aria-label="Anchor link for: parseobject" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Parse.Object</h2>

<p>Storing data on Parse is built around <code class="language-plaintext highlighter-rouge">Parse.Object</code>. Each <code class="language-plaintext highlighter-rouge">Parse.Object</code> contains key-value pairs of JSON-compatible data. This data is schemaless, which means that you don’t need to specify ahead of time what keys exist on each <code class="language-plaintext highlighter-rouge">Parse.Object</code>. You simply set whatever key-value pairs you want, and our backend will store it.</p>

<p>For example, let’s say you’re tracking high scores for a game. A single <code class="language-plaintext highlighter-rouge">Parse.Object</code> could contain:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-6">📋</button><code id="code-6"><span class="nx">score</span><span class="p">:</span> <span class="mi">1337</span><span class="p">,</span> <span class="nx">playerName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sean Plott</span><span class="dl">"</span><span class="p">,</span> <span class="nx">cheatMode</span><span class="p">:</span> <span class="kc">false</span>
</code></pre></div></div>

<p>Keys must be alphanumeric strings. Values can be strings, numbers, booleans, or even arrays and dictionaries - anything that can be JSON-encoded.</p>

<p>Each <code class="language-plaintext highlighter-rouge">Parse.Object</code> is an instance of a specific subclass with a class name that you can use to distinguish different sorts of data. For example, we could call the high score object a <code class="language-plaintext highlighter-rouge">GameScore</code>. We recommend that you NameYourClassesLikeThis and nameYourKeysLikeThis, just to keep your code looking pretty.</p>

<p>To create a new subclass, use the <code class="language-plaintext highlighter-rouge">Parse.Object.extend</code> method.  Any <code class="language-plaintext highlighter-rouge">Parse.Query</code> will return instances of the new class for any <code class="language-plaintext highlighter-rouge">Parse.Object</code> with the same classname.  If you’re familiar with <code class="language-plaintext highlighter-rouge">Backbone.Model</code>, then you already know how to use <code class="language-plaintext highlighter-rouge">Parse.Object</code>.  It’s designed to be created and modified in the same ways.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-7">📋</button><code id="code-7"><span class="c1">// Simple syntax to create a new subclass of Parse.Object.</span>
<span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Create a new instance of that class.</span>
<span class="kd">const</span> <span class="nx">gameScore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameScore</span><span class="p">();</span>

<span class="c1">// Alternatively, you can use the typical Backbone syntax.</span>
<span class="kd">const</span> <span class="nx">Achievement</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="na">className</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Achievement</span><span class="dl">"</span>
<span class="p">});</span>
</code></pre></div></div>

<p>You can add additional methods and properties to your subclasses of <code class="language-plaintext highlighter-rouge">Parse.Object</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-8">📋</button><code id="code-8">
<span class="c1">// A complex subclass of Parse.Object</span>
<span class="kd">const</span> <span class="nx">Monster</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Monster</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// Instance methods</span>
  <span class="na">hasSuperHumanStrength</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">strength</span><span class="dl">"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="c1">// Instance properties go in an initialize method</span>
  <span class="na">initialize</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">attrs</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sound</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Rawr</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="c1">// Class methods</span>
  <span class="na">spawn</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">strength</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">monster</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Monster</span><span class="p">();</span>
    <span class="nx">monster</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">strength</span><span class="dl">"</span><span class="p">,</span> <span class="nx">strength</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">monster</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">monster</span> <span class="o">=</span> <span class="nx">Monster</span><span class="p">.</span><span class="nx">spawn</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">monster</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">strength</span><span class="dl">'</span><span class="p">));</span>  <span class="c1">// Displays 200.</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">monster</span><span class="p">.</span><span class="nx">sound</span><span class="p">);</span> <span class="c1">// Displays Rawr.</span>
</code></pre></div></div>

<p>To create a single instance of any Parse Object class, you can also use the <code class="language-plaintext highlighter-rouge">Parse.Object</code> constructor directly. <code class="language-plaintext highlighter-rouge">new Parse.Object(className)</code> will create a single Parse Object with that class name.</p>

<p>If you’re already using ES6 in your codebase, good news! From version 1.6.0 onwards, the JavaScript SDK is compatible with ES6 classes. You can subclass <code class="language-plaintext highlighter-rouge">Parse.Object</code> with the <code class="language-plaintext highlighter-rouge">extends</code> keyword:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-9">📋</button><code id="code-9"><span class="kd">class</span> <span class="nx">Monster</span> <span class="kd">extends</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Pass the ClassName to the Parse.Object constructor</span>
    <span class="k">super</span><span class="p">(</span><span class="dl">'</span><span class="s1">Monster</span><span class="dl">'</span><span class="p">);</span>
    <span class="c1">// All other initialization</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sound</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Rawr</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">hasSuperHumanStrength</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">strength</span><span class="dl">'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">static</span> <span class="nx">spawn</span><span class="p">(</span><span class="nx">strength</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">monster</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Monster</span><span class="p">();</span>
    <span class="nx">monster</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">strength</span><span class="dl">'</span><span class="p">,</span> <span class="nx">strength</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">monster</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>However, when using <code class="language-plaintext highlighter-rouge">extends</code>, the SDK is not automatically aware of your subclass. If you want objects returned from queries to use your subclass of <code class="language-plaintext highlighter-rouge">Parse.Object</code>, you will need to register the subclass, similar to what we do on other platforms.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-10">📋</button><code id="code-10"><span class="c1">// After specifying the Monster subclass...</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">registerSubclass</span><span class="p">(</span><span class="dl">'</span><span class="s1">Monster</span><span class="dl">'</span><span class="p">,</span> <span class="nx">Monster</span><span class="p">);</span>
</code></pre></div></div>

<p>Similarly, you can use <code class="language-plaintext highlighter-rouge">extends</code> with <code class="language-plaintext highlighter-rouge">Parse.User</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-11">📋</button><code id="code-11"><span class="kd">class</span> <span class="nx">CustomUser</span> <span class="kd">extends</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">attributes</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">attributes</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">doSomething</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">5</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">registerSubclass</span><span class="p">(</span><span class="dl">'</span><span class="s1">_User</span><span class="dl">'</span><span class="p">,</span> <span class="nx">CustomUser</span><span class="p">);</span>
</code></pre></div></div>

<p>In addition to queries, <code class="language-plaintext highlighter-rouge">logIn</code> and <code class="language-plaintext highlighter-rouge">signUp</code> will return the subclass <code class="language-plaintext highlighter-rouge">CustomUser</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-12">📋</button><code id="code-12"><span class="kd">const</span> <span class="nx">customUser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CustomUser</span><span class="p">({</span> <span class="na">foo</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span> <span class="p">});</span>
<span class="nx">customUser</span><span class="p">.</span><span class="nx">setUsername</span><span class="p">(</span><span class="dl">'</span><span class="s1">username</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">customUser</span><span class="p">.</span><span class="nx">setPassword</span><span class="p">(</span><span class="dl">'</span><span class="s1">password</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">customUser</span><span class="p">.</span><span class="nx">signUp</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// user is an instance of CustomUser</span>
  <span class="nx">user</span><span class="p">.</span><span class="nx">doSomething</span><span class="p">();</span> <span class="c1">// return 5</span>
  <span class="nx">user</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">);</span>    <span class="c1">// return 'bar'</span>
<span class="p">});</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">CustomUser.logIn</code> and <code class="language-plaintext highlighter-rouge">CustomUser.signUp</code> will return the subclass <code class="language-plaintext highlighter-rouge">CustomUser</code> (SDK v2.3.0).</p>

<h2 id="saving-objects"><a class="anchorjs-link " href="/js/guide/#saving-objects" aria-label="Anchor link for: saving objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Saving Objects</h2>

<p>Let’s say you want to save the <code class="language-plaintext highlighter-rouge">GameScore</code> described above to the Parse Cloud. The interface is similar to a <code class="language-plaintext highlighter-rouge">Backbone.Model</code>, including the <code class="language-plaintext highlighter-rouge">save</code> method:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-13">📋</button><code id="code-13"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">gameScore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameScore</span><span class="p">();</span>

<span class="nx">gameScore</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">,</span> <span class="mi">1337</span><span class="p">);</span>
<span class="nx">gameScore</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Sean Plott</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">gameScore</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">cheatMode</span><span class="dl">"</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

<span class="nx">gameScore</span><span class="p">.</span><span class="nx">save</span><span class="p">()</span>
<span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">gameScore</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Execute any logic that should take place after the object is saved.</span>
  <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">New object created with objectId: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="p">},</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Execute any logic that should take place if the save fails.</span>
  <span class="c1">// error is a Parse.Error with an error code and message.</span>
  <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Failed to create new object, with error code: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>After this code runs, you will probably be wondering if anything really happened. To make sure the data was saved, you can look at the Data Browser in your app on Parse. You should see something like this:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-14">📋</button><code id="code-14"><span class="p">{</span><span class="w">
  </span><span class="nl">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xWMyZ4YEGZ"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"playerName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sean Plott"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cheatMode"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2022-01-01T12:23:45.678Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="s2">"2022-01-01T12:23:45.678Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>There are two things to note here. You didn’t have to configure or set up a new Class called <code class="language-plaintext highlighter-rouge">GameScore</code> before running this code. Your Parse app lazily creates this Class for you when it first encounters it.</p>

<p>There are also a few fields you don’t need to specify that are provided as a convenience. <code class="language-plaintext highlighter-rouge">objectId</code> is a unique identifier for each saved object. <code class="language-plaintext highlighter-rouge">createdAt</code> and <code class="language-plaintext highlighter-rouge">updatedAt</code> represent the time that each object was created and last modified in the cloud. Each of these fields is filled in by Parse, so they don’t exist on a <code class="language-plaintext highlighter-rouge">Parse.Object</code> until a save operation has completed.</p>

<p>If you prefer, you can set attributes directly in your call to <code class="language-plaintext highlighter-rouge">save</code> instead.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-15">📋</button><code id="code-15"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">gameScore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameScore</span><span class="p">();</span>

<span class="nx">gameScore</span><span class="p">.</span><span class="nx">save</span><span class="p">({</span>
  <span class="na">score</span><span class="p">:</span> <span class="mi">1337</span><span class="p">,</span>
  <span class="na">playerName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sean Plott</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">cheatMode</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">gameScore</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// The object was saved successfully.</span>
<span class="p">},</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// The save failed.</span>
  <span class="c1">// error is a Parse.Error with an error code and message.</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="saving-nested-objects"><a class="anchorjs-link " href="/js/guide/#saving-nested-objects" aria-label="Anchor link for: saving nested objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Saving Nested Objects</h3>
<p>You may add a <code class="language-plaintext highlighter-rouge">Parse.Object</code> as the value of a property in another <code class="language-plaintext highlighter-rouge">Parse.Object</code>. By default, when you call <code class="language-plaintext highlighter-rouge">save()</code> on the parent object, all nested objects will be created and/or saved as well in a batch operation. This feature makes it really easy to manage relational data as you don’t have to take care of creating the objects in any specific order.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-16">📋</button><code id="code-16"><span class="kd">const</span> <span class="nx">Child</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Child</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">child</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Child</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">Parent</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Parent</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">parent</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parent</span><span class="p">();</span>

<span class="nx">parent</span><span class="p">.</span><span class="nx">save</span><span class="p">({</span> <span class="na">child</span><span class="p">:</span> <span class="nx">child</span> <span class="p">});</span>
<span class="c1">// Automatically the object Child is created on the server</span>
<span class="c1">// just before saving the Parent</span>
</code></pre></div></div>

<p>In some scenarios, you may want to prevent this default chain save. For example, when saving a team member’s profile that points to an account owned by another user to which you don’t have write access. In this case, setting the option <code class="language-plaintext highlighter-rouge">cascadeSave</code> to <code class="language-plaintext highlighter-rouge">false</code> may be useful:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-17">📋</button><code id="code-17"><span class="kd">const</span> <span class="nx">TeamMember</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">TeamMember</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">teamMember</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TeamMember</span><span class="p">();</span>
<span class="nx">teamMember</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">ownerAccount</span><span class="dl">'</span><span class="p">,</span> <span class="nx">ownerAccount</span><span class="p">);</span>   <span class="c1">// Suppose `ownerAccount` has been created earlier.</span>

<span class="nx">teamMember</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span> <span class="na">cascadeSave</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
<span class="c1">// Will save `teamMember` wihout attempting to save or modify `ownerAccount`</span>

</code></pre></div></div>

<h3 id="cloud-code-context"><a class="anchorjs-link " href="/js/guide/#cloud-code-context" aria-label="Anchor link for: cloud code context" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Cloud Code context</h3>

<p><em>Requires Parse Server 4.3.0+</em></p>

<p>You may pass a <code class="language-plaintext highlighter-rouge">context</code> dictionary that is accessible in Cloud Code <code class="language-plaintext highlighter-rouge">beforeSave</code> and <code class="language-plaintext highlighter-rouge">afterSave</code> triggers for that <code class="language-plaintext highlighter-rouge">Parse.Object</code>. This is useful if you want to condition certain operations in Cloud Code triggers on ephemeral information that should not be saved with the <code class="language-plaintext highlighter-rouge">Parse.Object</code> in the database. The context is ephemeral in the sense that it vanishes after the Cloud Code triggers for that particular <code class="language-plaintext highlighter-rouge">Parse.Object</code> have executed. For example:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-18">📋</button><code id="code-18"><span class="kd">const</span> <span class="nx">TeamMember</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">TeamMember</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">teamMember</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TeamMember</span><span class="p">();</span>
<span class="nx">teamMember</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">team</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">A</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">context</span> <span class="o">=</span> <span class="p">{</span> <span class="na">notifyTeam</span><span class="p">:</span> <span class="kc">false</span> <span class="p">};</span>
<span class="k">await</span> <span class="nx">teamMember</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span> <span class="na">context</span><span class="p">:</span> <span class="nx">context</span> <span class="p">});</span>
</code></pre></div></div>

<p>The context is then accessible in Cloud Code:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-19">📋</button><code id="code-19"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">afterSave</span><span class="p">(</span><span class="dl">"</span><span class="s2">TeamMember</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">notifyTeam</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">notifyTeam</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">notifyTeam</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Notify team about new member.</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="retrieving-objects"><a class="anchorjs-link " href="/js/guide/#retrieving-objects" aria-label="Anchor link for: retrieving objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Retrieving Objects</h2>

<p>Saving data to the cloud is fun, but it’s even more fun to get that data out again. If the <code class="language-plaintext highlighter-rouge">Parse.Object</code> has been uploaded to the server, you can use the <code class="language-plaintext highlighter-rouge">objectId</code> to get it using a <code class="language-plaintext highlighter-rouge">Parse.Query</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-20">📋</button><code id="code-20"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">xWMyZ4YEGZ</span><span class="dl">"</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">gameScore</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// The object was retrieved successfully.</span>
<span class="p">},</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// The object was not retrieved successfully.</span>
  <span class="c1">// error is a Parse.Error with an error code and message.</span>
<span class="p">});</span>
</code></pre></div></div>

<p>To get the values out of the <code class="language-plaintext highlighter-rouge">Parse.Object</code>, use the <code class="language-plaintext highlighter-rouge">get</code> method.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-21">📋</button><code id="code-21"><span class="kd">const</span> <span class="nx">score</span> <span class="o">=</span> <span class="nx">gameScore</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">playerName</span> <span class="o">=</span> <span class="nx">gameScore</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">cheatMode</span> <span class="o">=</span> <span class="nx">gameScore</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">cheatMode</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>Alternatively, the <code class="language-plaintext highlighter-rouge">attributes</code> property of the <code class="language-plaintext highlighter-rouge">Parse.Object</code> can be treated as a Javascript object, and even destructured.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-22">📋</button><code id="code-22"><span class="kd">const</span> <span class="p">{</span> <span class="nx">score</span><span class="p">,</span> <span class="nx">playerName</span><span class="p">,</span> <span class="nx">cheatMode</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">attributes</span><span class="p">;</span>
</code></pre></div></div>

<p>The four special reserved values are provided as properties and cannot be retrieved using the ‘get’ method nor modified with the ‘set’ method:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-23">📋</button><code id="code-23"><span class="kd">const</span> <span class="nx">objectId</span> <span class="o">=</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">updatedAt</span> <span class="o">=</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">updatedAt</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">createdAt</span> <span class="o">=</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">createdAt</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">acl</span> <span class="o">=</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">getACL</span><span class="p">();</span>
</code></pre></div></div>

<p>If you need to refresh an object you already have with the latest data that
    is in the Parse Cloud, you can call the <code class="language-plaintext highlighter-rouge">fetch</code> method like so:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-24">📋</button><code id="code-24"><span class="nx">myObject</span><span class="p">.</span><span class="nx">fetch</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">myObject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// The object was refreshed successfully.</span>
<span class="p">},</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// The object was not refreshed successfully.</span>
  <span class="c1">// error is a Parse.Error with an error code and message.</span>
<span class="p">});</span>
</code></pre></div></div>

<p>If you need to check if an object has been fetched, you can call the  <code class="language-plaintext highlighter-rouge">isDataAvailable()</code> method:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-25">📋</button><code id="code-25"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">myObject</span><span class="p">.</span><span class="nx">isDataAvailable</span><span class="p">())</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">myObject</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="updating-objects"><a class="anchorjs-link " href="/js/guide/#updating-objects" aria-label="Anchor link for: updating objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Updating Objects</h2>

<p>Updating an object is simple. Just set some new data on it and call the save method. For example:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-26">📋</button><code id="code-26"><span class="c1">// Create the object.</span>
<span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">gameScore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameScore</span><span class="p">();</span>

<span class="nx">gameScore</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">,</span> <span class="mi">1337</span><span class="p">);</span>
<span class="nx">gameScore</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Sean Plott</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">gameScore</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">cheatMode</span><span class="dl">"</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nx">gameScore</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">skills</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">pwnage</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">flying</span><span class="dl">"</span><span class="p">]);</span>

<span class="nx">gameScore</span><span class="p">.</span><span class="nx">save</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">gameScore</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Now let's update it with some new data. In this case, only cheatMode and score</span>
  <span class="c1">// will get sent to the cloud. playerName hasn't changed.</span>
  <span class="nx">gameScore</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">cheatMode</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="nx">gameScore</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">,</span> <span class="mi">1338</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Parse automatically figures out which data has changed so only “dirty” fields will be sent to the Parse Cloud. You don’t need to worry about squashing data that you didn’t intend to update.</p>

<h3 id="counters"><a class="anchorjs-link " href="/js/guide/#counters" aria-label="Anchor link for: counters" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Counters</h3>

<p>The above example contains a common use case. The “score” field is a counter that we’ll need to continually update with the player’s latest score. Using the above method works but it’s cumbersome and can lead to problems if you have multiple clients trying to update the same counter.</p>

<p>To help with storing counter-type data, Parse provides methods that atomically increment (or decrement) any number field. So, the same update can be rewritten as:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-27">📋</button><code id="code-27"><span class="nx">gameScore</span><span class="p">.</span><span class="nx">increment</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">gameScore</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>You can also increment by any amount by passing in a second argument to <code class="language-plaintext highlighter-rouge">increment</code>. When no amount is specified, 1 is used by default.</p>

<h3 id="arrays"><a class="anchorjs-link " href="/js/guide/#arrays" aria-label="Anchor link for: arrays" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Arrays</h3>

<p>To help with storing array data, there are three operations that can be used to atomically change an array associated with a given key:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">add</code> append the given object to the end of an array field.</li>
  <li><code class="language-plaintext highlighter-rouge">addUnique</code> add the given object only if it isn’t already contained in an array field. The position of the insert is not guaranteed.</li>
  <li><code class="language-plaintext highlighter-rouge">remove</code> remove all instances of the given object from an array field.</li>
</ul>

<p>For example, we can add items to the set-like “skills” field like so:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-28">📋</button><code id="code-28"><span class="nx">gameScore</span><span class="p">.</span><span class="nx">addUnique</span><span class="p">(</span><span class="dl">"</span><span class="s2">skills</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">flying</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">gameScore</span><span class="p">.</span><span class="nx">addUnique</span><span class="p">(</span><span class="dl">"</span><span class="s2">skills</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">kungfu</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">gameScore</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>Note that it is not currently possible to atomically add and remove items from an array in the same save. You will have to call <code class="language-plaintext highlighter-rouge">save</code> in between every different kind of array operation.</p>

<h2 id="destroying-objects"><a class="anchorjs-link " href="/js/guide/#destroying-objects" aria-label="Anchor link for: destroying objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Destroying Objects</h2>

<p>To delete an object from the cloud:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-29">📋</button><code id="code-29"><span class="nx">myObject</span><span class="p">.</span><span class="nx">destroy</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">myObject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// The object was deleted from the Parse Cloud.</span>
<span class="p">},</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// The delete failed.</span>
  <span class="c1">// error is a Parse.Error with an error code and message.</span>
<span class="p">});</span>
</code></pre></div></div>

<p>You can delete a single field from an object with the <code class="language-plaintext highlighter-rouge">unset</code> method:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-30">📋</button><code id="code-30"><span class="c1">// After this, the playerName field will be empty</span>
<span class="nx">myObject</span><span class="p">.</span><span class="nx">unset</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Saves the field deletion to the Parse Cloud.</span>
<span class="c1">// If the object's field is an array, call save() after every unset() operation.</span>
<span class="nx">myObject</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>Please note that use of object.set(null) to remove a field from an object is not recommended and will result in unexpected functionality.</p>

<h2 id="relational-data"><a class="anchorjs-link " href="/js/guide/#relational-data" aria-label="Anchor link for: relational data" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Relational Data</h2>

<p>Objects may have relationships with other objects. For example, in a blogging application, a <code class="language-plaintext highlighter-rouge">Post</code> object may have many <code class="language-plaintext highlighter-rouge">Comment</code> objects. Parse supports all kind of relationships, including one-to-one, one-to-many, and many-to-many.</p>

<h3 id="one-to-one-and-one-to-many-relationships"><a class="anchorjs-link " href="/js/guide/#one-to-one-and-one-to-many-relationships" aria-label="Anchor link for: one to one and one to many relationships" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>One-to-One and One-to-Many Relationships</h3>

<p>One-to-one and one-to-many relationships are modeled by saving a <code class="language-plaintext highlighter-rouge">Parse.Object</code> as a value in the other object. For example, each <code class="language-plaintext highlighter-rouge">Comment</code> in a blogging app might correspond to one <code class="language-plaintext highlighter-rouge">Post</code>.</p>

<p>To create a new <code class="language-plaintext highlighter-rouge">Post</code> with a single <code class="language-plaintext highlighter-rouge">Comment</code>, you could write:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-31">📋</button><code id="code-31"><span class="c1">// Declare the types.</span>
<span class="kd">const</span> <span class="nx">Post</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Post</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">Comment</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Comment</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Create the post</span>
<span class="kd">const</span> <span class="nx">myPost</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Post</span><span class="p">();</span>
<span class="nx">myPost</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">I'm Hungry</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">myPost</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Where should we go for lunch?</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Create the comment</span>
<span class="kd">const</span> <span class="nx">myComment</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Comment</span><span class="p">();</span>
<span class="nx">myComment</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Let's do Sushirrito.</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Add the post as a value in the comment</span>
<span class="nx">myComment</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">parent</span><span class="dl">"</span><span class="p">,</span> <span class="nx">myPost</span><span class="p">);</span>

<span class="c1">// This will save both myPost and myComment</span>
<span class="nx">myComment</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>Internally, the Parse framework will store the referred-to object in just one place, to maintain consistency. You can also link objects using just their <code class="language-plaintext highlighter-rouge">objectId</code>s like so:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-32">📋</button><code id="code-32"><span class="kd">const</span> <span class="nx">post</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Post</span><span class="p">();</span>
<span class="nx">post</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1zEcyElZ80</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">myComment</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">parent</span><span class="dl">"</span><span class="p">,</span> <span class="nx">post</span><span class="p">);</span>
</code></pre></div></div>

<p>By default, when fetching an object, related <code class="language-plaintext highlighter-rouge">Parse.Object</code>s are not fetched.  These objects’ values cannot be retrieved until they have been fetched like so:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-33">📋</button><code id="code-33"><span class="kd">const</span> <span class="nx">post</span> <span class="o">=</span> <span class="nx">fetchedComment</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">parent</span><span class="dl">"</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">post</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">post</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="many-to-many-relationships"><a class="anchorjs-link " href="/js/guide/#many-to-many-relationships" aria-label="Anchor link for: many to many relationships" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Many-to-Many Relationships</h3>

<p>Many-to-many relationships are modeled using <code class="language-plaintext highlighter-rouge">Parse.Relation</code>. This works similar to storing an array of <code class="language-plaintext highlighter-rouge">Parse.Object</code>s in a key, except that you don’t need to fetch all of the objects in a relation at once.  In addition, this allows <code class="language-plaintext highlighter-rouge">Parse.Relation</code> to scale to many more objects than the array of <code class="language-plaintext highlighter-rouge">Parse.Object</code> approach.  For example, a <code class="language-plaintext highlighter-rouge">User</code> may have many <code class="language-plaintext highlighter-rouge">Posts</code> that she might like. In this case, you can store the set of <code class="language-plaintext highlighter-rouge">Posts</code> that a <code class="language-plaintext highlighter-rouge">User</code> likes using <code class="language-plaintext highlighter-rouge">relation</code>.  In order to add a <code class="language-plaintext highlighter-rouge">Post</code> to the “likes” list of the <code class="language-plaintext highlighter-rouge">User</code>, you can do:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-34">📋</button><code id="code-34"><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">relation</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">relation</span><span class="p">(</span><span class="dl">"</span><span class="s2">likes</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">relation</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">post</span><span class="p">);</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>You can remove a post from a <code class="language-plaintext highlighter-rouge">Parse.Relation</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-35">📋</button><code id="code-35"><span class="nx">relation</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">post</span><span class="p">);</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>You can call <code class="language-plaintext highlighter-rouge">add</code> and <code class="language-plaintext highlighter-rouge">remove</code> multiple times before calling save:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-36">📋</button><code id="code-36"><span class="nx">relation</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">post1</span><span class="p">);</span>
<span class="nx">relation</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">post2</span><span class="p">);</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>You can also pass in an array of <code class="language-plaintext highlighter-rouge">Parse.Object</code> to <code class="language-plaintext highlighter-rouge">add</code> and <code class="language-plaintext highlighter-rouge">remove</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-37">📋</button><code id="code-37"><span class="nx">relation</span><span class="p">.</span><span class="nx">add</span><span class="p">([</span><span class="nx">post1</span><span class="p">,</span> <span class="nx">post2</span><span class="p">,</span> <span class="nx">post3</span><span class="p">]);</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>By default, the list of objects in this relation are not downloaded.  You can get a list of the posts that a user likes by using the <code class="language-plaintext highlighter-rouge">Parse.Query</code> returned by <code class="language-plaintext highlighter-rouge">query</code>.  The code looks like:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-38">📋</button><code id="code-38"><span class="nx">relation</span><span class="p">.</span><span class="nx">query</span><span class="p">().</span><span class="nx">find</span><span class="p">({</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// list contains the posts that the current user likes.</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>If you want only a subset of the Posts, you can add extra constraints to the <code class="language-plaintext highlighter-rouge">Parse.Query</code> returned by query like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-39">📋</button><code id="code-39"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">relation</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">I'm Hungry</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span>
  <span class="na">success</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// list contains post liked by the current user which have the title "I'm Hungry".</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>For more details on <code class="language-plaintext highlighter-rouge">Parse.Query</code>, please look at the query portion of this guide. A <code class="language-plaintext highlighter-rouge">Parse.Relation</code> behaves similar to an array of <code class="language-plaintext highlighter-rouge">Parse.Object</code> for querying purposes, so any query you can do on an array of objects, you can do on a <code class="language-plaintext highlighter-rouge">Parse.Relation</code>.</p>

<h2 id="data-types"><a class="anchorjs-link " href="/js/guide/#data-types" aria-label="Anchor link for: data types" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Data Types</h2>

<p>So far we’ve used values with type <code class="language-plaintext highlighter-rouge">String</code>, <code class="language-plaintext highlighter-rouge">Number</code>, and <code class="language-plaintext highlighter-rouge">Parse.Object</code>. Parse also supports <code class="language-plaintext highlighter-rouge">Date</code>s and <code class="language-plaintext highlighter-rouge">null</code>. You can nest <code class="language-plaintext highlighter-rouge">JSON Object</code>s and <code class="language-plaintext highlighter-rouge">JSON Array</code>s to store more structured data within a single <code class="language-plaintext highlighter-rouge">Parse.Object</code>. Overall, the following types are allowed for each field in your object:</p>

<ul>
  <li>String =&gt; <code class="language-plaintext highlighter-rouge">String</code></li>
  <li>Number =&gt; <code class="language-plaintext highlighter-rouge">Number</code></li>
  <li>Bool =&gt; <code class="language-plaintext highlighter-rouge">bool</code></li>
  <li>Array =&gt; <code class="language-plaintext highlighter-rouge">JSON Array</code></li>
  <li>Object =&gt; <code class="language-plaintext highlighter-rouge">JSON Object</code></li>
  <li>Date =&gt; <code class="language-plaintext highlighter-rouge">Date</code></li>
  <li>File =&gt; <code class="language-plaintext highlighter-rouge">Parse.File</code></li>
  <li>Pointer =&gt; other <code class="language-plaintext highlighter-rouge">Parse.Object</code></li>
  <li>Relation =&gt; <code class="language-plaintext highlighter-rouge">Parse.Relation</code></li>
  <li>Null =&gt; <code class="language-plaintext highlighter-rouge">null</code></li>
</ul>

<p>Some examples:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-40">📋</button><code id="code-40"><span class="kd">const</span> <span class="nx">number</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">bool</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">string</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">the number is </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">number</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="nx">string</span><span class="p">,</span> <span class="nx">number</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">object</span> <span class="o">=</span> <span class="p">{</span> <span class="na">number</span><span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="na">string</span><span class="p">:</span> <span class="nx">string</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">pointer</span> <span class="o">=</span> <span class="nx">MyClassName</span><span class="p">.</span><span class="nx">createWithoutData</span><span class="p">(</span><span class="nx">objectId</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">BigObject</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">BigObject</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">bigObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BigObject</span><span class="p">();</span>
<span class="nx">bigObject</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">myNumber</span><span class="dl">"</span><span class="p">,</span> <span class="nx">number</span><span class="p">);</span>
<span class="nx">bigObject</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">myBool</span><span class="dl">"</span><span class="p">,</span> <span class="nx">bool</span><span class="p">);</span>
<span class="nx">bigObject</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">myString</span><span class="dl">"</span><span class="p">,</span> <span class="nx">string</span><span class="p">);</span>
<span class="nx">bigObject</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">myDate</span><span class="dl">"</span><span class="p">,</span> <span class="nx">date</span><span class="p">);</span>
<span class="nx">bigObject</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">myArray</span><span class="dl">"</span><span class="p">,</span> <span class="nx">array</span><span class="p">);</span>
<span class="nx">bigObject</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">myObject</span><span class="dl">"</span><span class="p">,</span> <span class="nx">object</span><span class="p">);</span>
<span class="nx">bigObject</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">anyKey</span><span class="dl">"</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span> <span class="c1">// this value can only be saved to an existing key</span>
<span class="nx">bigObject</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">myPointerKey</span><span class="dl">"</span><span class="p">,</span> <span class="nx">pointer</span><span class="p">);</span> <span class="c1">// shows up as Pointer &amp;lt;MyClassName&amp;gt; in the Data Browser</span>
<span class="nx">bigObject</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>We do not recommend storing large pieces of binary data like images or documents on <code class="language-plaintext highlighter-rouge">Parse.Object</code>. We recommend you use <code class="language-plaintext highlighter-rouge">Parse.File</code>s to store images, documents, and other types of files. You can do so by instantiating a <code class="language-plaintext highlighter-rouge">Parse.File</code> object and setting it on a field. See <a href="/js/guide/#files">Files</a> for more details.</p>

<p>For more information about how Parse handles data, check out our documentation on <a href="/js/guide/#data">Data</a>.</p>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/objects.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/queries.md">
    <h1 id="queries"><a class="anchorjs-link " href="/js/guide/#queries" aria-label="Anchor link for: queries" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Queries</h1>

<p>We’ve already seen how a <code class="language-plaintext highlighter-rouge">Parse.Query</code> with <code class="language-plaintext highlighter-rouge">get</code> can retrieve a single <code class="language-plaintext highlighter-rouge">Parse.Object</code> from Parse. There are many other ways to retrieve data with <code class="language-plaintext highlighter-rouge">Parse.Query</code> - you can retrieve many objects at once, put conditions on the objects you wish to retrieve, and more.</p>

<h2 id="basic-queries"><a class="anchorjs-link " href="/js/guide/#basic-queries" aria-label="Anchor link for: basic queries" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Basic Queries</h2>

<p>In many cases, <code class="language-plaintext highlighter-rouge">get</code> isn’t powerful enough to specify which objects you want to retrieve. <code class="language-plaintext highlighter-rouge">Parse.Query</code> offers different ways to retrieve a list of objects rather than just a single object.</p>

<p>The general pattern is to create a <code class="language-plaintext highlighter-rouge">Parse.Query</code>, put conditions on it, and then retrieve an <code class="language-plaintext highlighter-rouge">Array</code> of matching <code class="language-plaintext highlighter-rouge">Parse.Object</code>s using <code class="language-plaintext highlighter-rouge">find</code>. For example, to retrieve the scores that have a particular <code class="language-plaintext highlighter-rouge">playerName</code>, use the <code class="language-plaintext highlighter-rouge">equalTo</code> method to constrain the value for a key.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-41">📋</button><code id="code-41"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Dan Stemkoski</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
<span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully retrieved </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> scores.</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// Do something with the returned Parse.Object values</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">object</span> <span class="o">=</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="nx">alert</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> - </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">object</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">playerName</span><span class="dl">'</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="query-constraints"><a class="anchorjs-link " href="/js/guide/#query-constraints" aria-label="Anchor link for: query constraints" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Query Constraints</h2>

<p>There are several ways to put constraints on the objects found by a <code class="language-plaintext highlighter-rouge">Parse.Query</code>. You can filter out objects with a particular key-value pair with <code class="language-plaintext highlighter-rouge">notEqualTo</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-42">📋</button><code id="code-42"><span class="nx">query</span><span class="p">.</span><span class="nx">notEqualTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Michael Yabuti</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>You can give multiple constraints, and objects will only be in the results if they match all of the constraints.  In other words, it’s like an AND of constraints.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-43">📋</button><code id="code-43"><span class="nx">query</span><span class="p">.</span><span class="nx">notEqualTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Michael Yabuti</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">greaterThan</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerAge</span><span class="dl">"</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
</code></pre></div></div>

<p>You can limit the number of results by setting <code class="language-plaintext highlighter-rouge">limit</code>. By default, results are limited to 100. In the old Parse hosted backend, the maximum limit was 1,000, but Parse Server removed that constraint:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-44">📋</button><code id="code-44"><span class="nx">query</span><span class="p">.</span><span class="nx">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// limit to at most 10 results</span>
</code></pre></div></div>

<p>If you want exactly one result, a more convenient alternative may be to use <code class="language-plaintext highlighter-rouge">first</code> instead of using <code class="language-plaintext highlighter-rouge">find</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-45">📋</button><code id="code-45"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerEmail</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">dstemkoski@example.com</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">object</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">first</span><span class="p">();</span>
</code></pre></div></div>

<p>You can skip the first results by setting <code class="language-plaintext highlighter-rouge">skip</code>. In the old Parse hosted backend, the maximum skip value was 10,000, but Parse Server removed that constraint. This can be useful for pagination:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-46">📋</button><code id="code-46"><span class="nx">query</span><span class="p">.</span><span class="nx">skip</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// skip the first 10 results</span>
</code></pre></div></div>

<p>If you want to know the total number of rows in a table satisfying your query, for  e.g. pagination purposes - you can use <code class="language-plaintext highlighter-rouge">withCount</code>.</p>

<p><strong>Note:</strong> Enabling this flag will change the structure of response, see the example below.</p>

<p>Let’s say you have 200 rows in a table called <code class="language-plaintext highlighter-rouge">GameScore</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-47">📋</button><code id="code-47"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>

<span class="nx">query</span><span class="p">.</span><span class="nx">limit</span><span class="p">(</span><span class="mi">25</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span> <span class="c1">// [ GameScore, GameScore, ...]</span>

<span class="c1">// to include count:</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">withCount</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span> <span class="c1">// { results: [ GameScore, ... ], count: 200 }</span>
</code></pre></div></div>
<p>⚠️ Сount operations can be slow and expensive.</p>

<p>If you only want to get the count without objects - use <a href="/js/guide/#counting-objects">Counting Objects</a>.</p>

<p>For sortable types like numbers and strings, you can control the order in which results are returned:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-48">📋</button><code id="code-48"><span class="c1">// Sorts the results in ascending order by the score field</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">ascending</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Sorts the results in descending order by the score field</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">descending</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>For sortable types, you can also use comparisons in queries:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-49">📋</button><code id="code-49"><span class="c1">// Restricts to wins &lt; 50</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">lessThan</span><span class="p">(</span><span class="dl">"</span><span class="s2">wins</span><span class="dl">"</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>

<span class="c1">// Restricts to wins &lt;= 50</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">lessThanOrEqualTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">wins</span><span class="dl">"</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>

<span class="c1">// Restricts to wins &gt; 50</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">greaterThan</span><span class="p">(</span><span class="dl">"</span><span class="s2">wins</span><span class="dl">"</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>

<span class="c1">// Restricts to wins &gt;= 50</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">greaterThanOrEqualTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">wins</span><span class="dl">"</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
</code></pre></div></div>

<p>If you want to retrieve objects matching any of the values in a list of values, you can use <code class="language-plaintext highlighter-rouge">containedIn</code>, providing an array of acceptable values. This is often useful to replace multiple queries with a single query. For example, if you want to retrieve scores made by any player in a particular list:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-50">📋</button><code id="code-50"><span class="c1">// Finds scores from any of Jonathan, Dario, or Shawn</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">containedIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span>
                  <span class="p">[</span><span class="dl">"</span><span class="s2">Jonathan Walsh</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Dario Wunsch</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Shawn Simon</span><span class="dl">"</span><span class="p">]);</span>
</code></pre></div></div>

<p>If you want to retrieve objects that do not match any of  several values you can use <code class="language-plaintext highlighter-rouge">notContainedIn</code>, providing an array of acceptable values.  For example if you want to retrieve scores from players besides those in a list:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-51">📋</button><code id="code-51"><span class="c1">// Finds scores from anyone who is neither Jonathan, Dario, nor Shawn</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">notContainedIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span>
                     <span class="p">[</span><span class="dl">"</span><span class="s2">Jonathan Walsh</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Dario Wunsch</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Shawn Simon</span><span class="dl">"</span><span class="p">]);</span>
</code></pre></div></div>

<p>If you want to retrieve objects that have a particular key set, you can use <code class="language-plaintext highlighter-rouge">exists</code>. Conversely, if you want to retrieve objects without a particular key set, you can use <code class="language-plaintext highlighter-rouge">doesNotExist</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-52">📋</button><code id="code-52"><span class="c1">// Finds objects that have the score set</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Finds objects that don't have the score set</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">doesNotExist</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>You can use the <code class="language-plaintext highlighter-rouge">matchesKeyInQuery</code> method to get objects where a key matches the value of a key in a set of objects resulting from another query.  For example, if you have a class containing sports teams and you store a user’s hometown in the user class, you can issue one query to find the list of users whose hometown teams have winning records.  The query would look like:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-53">📋</button><code id="code-53"><span class="kd">const</span> <span class="nx">Team</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Team</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">teamQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Team</span><span class="p">);</span>
<span class="nx">teamQuery</span><span class="p">.</span><span class="nx">greaterThan</span><span class="p">(</span><span class="dl">"</span><span class="s2">winPct</span><span class="dl">"</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">userQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span>
<span class="nx">userQuery</span><span class="p">.</span><span class="nx">matchesKeyInQuery</span><span class="p">(</span><span class="dl">"</span><span class="s2">hometown</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">city</span><span class="dl">"</span><span class="p">,</span> <span class="nx">teamQuery</span><span class="p">);</span>
<span class="c1">// results has the list of users with a hometown team with a winning record</span>
<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">userQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>Conversely, to get objects where a key does not match the value of a key in a set of objects resulting from another query, use <code class="language-plaintext highlighter-rouge">doesNotMatchKeyInQuery</code>. For example, to find users whose hometown teams have losing records:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-54">📋</button><code id="code-54"><span class="kd">const</span> <span class="nx">losingUserQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span>
<span class="nx">losingUserQuery</span><span class="p">.</span><span class="nx">doesNotMatchKeyInQuery</span><span class="p">(</span><span class="dl">"</span><span class="s2">hometown</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">city</span><span class="dl">"</span><span class="p">,</span> <span class="nx">teamQuery</span><span class="p">);</span>
<span class="c1">// results has the list of users with a hometown team with a losing record</span>
<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">losingUserQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>To filter rows based on <code class="language-plaintext highlighter-rouge">objectId</code>’s from pointers in a second table, you can use dot notation:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-55">📋</button><code id="code-55"><span class="kd">const</span> <span class="nx">rolesOfTypeX</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">'</span><span class="s1">Role</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">rolesOfTypeX</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">x</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">groupsWithRoleX</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">'</span><span class="s1">Group</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">groupsWithRoleX</span><span class="p">.</span><span class="nx">matchesKeyInQuery</span><span class="p">(</span><span class="dl">'</span><span class="s1">objectId</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">belongsTo.objectId</span><span class="dl">'</span><span class="p">,</span> <span class="nx">rolesOfTypeX</span><span class="p">);</span>
<span class="nx">groupsWithRoleX</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">// results has the list of groups with role x</span>
<span class="p">});</span>
</code></pre></div></div>

<p>You can restrict the fields returned by calling <code class="language-plaintext highlighter-rouge">select</code> with a list of keys. To retrieve documents that contain only the <code class="language-plaintext highlighter-rouge">score</code> and <code class="language-plaintext highlighter-rouge">playerName</code> fields (and also special built-in fields such as <code class="language-plaintext highlighter-rouge">objectId</code>, <code class="language-plaintext highlighter-rouge">createdAt</code>, and <code class="language-plaintext highlighter-rouge">updatedAt</code>):</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-56">📋</button><code id="code-56"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// each of results will only have the selected fields available.</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Similarly, use <code class="language-plaintext highlighter-rouge">exclude</code> to remove undesired fields while retrieving the rest:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-57">📋</button><code id="code-57"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">exclude</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Now each result will have all fields except `playerName`</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The remaining fields can be fetched later by calling <code class="language-plaintext highlighter-rouge">fetch</code> on the returned objects:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-58">📋</button><code id="code-58"><span class="nx">query</span><span class="p">.</span><span class="nx">first</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// only the selected fields of the object will now be available here.</span>
  <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// all fields of the object will now be available here.</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="queries-on-array-values"><a class="anchorjs-link " href="/js/guide/#queries-on-array-values" aria-label="Anchor link for: queries on array values" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Queries on Array Values</h2>

<p>For keys with an array type, you can find objects where the key’s array value contains 2 by:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-59">📋</button><code id="code-59"><span class="c1">// Find objects where the array in arrayKey contains 2.</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">arrayKey</span><span class="dl">"</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</code></pre></div></div>

<p>You can also find objects where the key’s array value contains each of the elements 2, 3, and 4 with the following:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-60">📋</button><code id="code-60"><span class="c1">// Find objects where the array in arrayKey contains all of the elements 2, 3, and 4.</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">containsAll</span><span class="p">(</span><span class="dl">"</span><span class="s2">arrayKey</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>
</code></pre></div></div>

<h2 id="queries-on-string-values"><a class="anchorjs-link " href="/js/guide/#queries-on-string-values" aria-label="Anchor link for: queries on string values" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Queries on String Values</h2>

<p>Use <code class="language-plaintext highlighter-rouge">startsWith</code> to restrict to string values that start with a particular string. Similar to a MySQL LIKE operator, this is indexed so it is efficient for large datasets:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-61">📋</button><code id="code-61"><span class="c1">// Finds barbecue sauces that start with "Big Daddy's".</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">BarbecueSauce</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Big Daddy's</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>The above example will match any <code class="language-plaintext highlighter-rouge">BarbecueSauce</code> objects where the value in the “name” String key starts with “Big Daddy’s”. For example, both “Big Daddy’s” and “Big Daddy’s BBQ” will match, but “big daddy’s” or “BBQ Sauce: Big Daddy’s” will not.</p>

<p>Queries that have regular expression constraints are very expensive, especially for classes with over 100,000 records. Parse restricts how many such operations can be run on a particular app at any given time.</p>

<h3 id="full-text-search"><a class="anchorjs-link " href="/js/guide/#full-text-search" aria-label="Anchor link for: full text search" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Full Text Search</h3>

<p>You can use <code class="language-plaintext highlighter-rouge">fullText</code> for efficient search capabilities. Text indexes are automatically created for you. Your strings are turned into tokens for fast searching.</p>

<ul>
  <li>
    <p>Note: Full Text Search can be resource intensive. Ensure the cost of using indexes is worth the benefit, see <a href="https://docs.mongodb.com/manual/core/index-text/#storage-requirements-and-performance-costs">storage requirements &amp; performance costs of text indexes.</a>.</p>
  </li>
  <li>
    <p>Parse Server 2.5.0+</p>
  </li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-62">📋</button><code id="code-62"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">BarbecueSauce</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">fullText</span><span class="p">(</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">bbq</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>The above example will match any <code class="language-plaintext highlighter-rouge">BarbecueSauce</code> objects where the value in the “name” String key contains “bbq”. For example, both “Big Daddy’s BBQ”, “Big Daddy’s bbq” and “Big BBQ Daddy” will match.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-63">📋</button><code id="code-63"><span class="c1">// You can sort by weight / rank. ascending() and select()</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">BarbecueSauce</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">fullText</span><span class="p">(</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">bbq</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">ascending</span><span class="p">(</span><span class="dl">'</span><span class="s1">$score</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="dl">'</span><span class="s1">$score</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// results contains a weight / rank in result.get('score')</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// There was an error.</span>
  <span class="p">});</span>
</code></pre></div></div>

<p>For Case or Diacritic Sensitive search, please use the <a href="/rest/guide/#queries-on-string-values">REST API</a>.</p>

<h2 id="relational-queries"><a class="anchorjs-link " href="/js/guide/#relational-queries" aria-label="Anchor link for: relational queries" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Relational Queries</h2>

<p>There are several ways to issue queries for relational data. If you want to retrieve objects where a field matches a particular <code class="language-plaintext highlighter-rouge">Parse.Object</code>, you can use <code class="language-plaintext highlighter-rouge">equalTo</code> just like for other data types. For example, if each <code class="language-plaintext highlighter-rouge">Comment</code> has a <code class="language-plaintext highlighter-rouge">Post</code> object in its <code class="language-plaintext highlighter-rouge">post</code> field, you can fetch comments for a particular <code class="language-plaintext highlighter-rouge">Post</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-64">📋</button><code id="code-64"><span class="c1">// Assume Parse.Object myPost was previously created.</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Comment</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">post</span><span class="dl">"</span><span class="p">,</span> <span class="nx">myPost</span><span class="p">);</span>
<span class="c1">// comments now contains the comments for myPost</span>
<span class="kd">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>If you want to retrieve objects where a field contains a <code class="language-plaintext highlighter-rouge">Parse.Object</code> that matches a different query, you can use <code class="language-plaintext highlighter-rouge">matchesQuery</code>. In order to find comments for posts containing images, you can do:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-65">📋</button><code id="code-65"><span class="kd">const</span> <span class="nx">Post</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Post</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">Comment</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Comment</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">innerQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Post</span><span class="p">);</span>
<span class="nx">innerQuery</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="dl">"</span><span class="s2">image</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Comment</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">matchesQuery</span><span class="p">(</span><span class="dl">"</span><span class="s2">post</span><span class="dl">"</span><span class="p">,</span> <span class="nx">innerQuery</span><span class="p">);</span>
<span class="c1">// comments now contains the comments for posts with images.</span>
<span class="kd">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>If you want to retrieve objects where a field contains a <code class="language-plaintext highlighter-rouge">Parse.Object</code> that does not match a different query, you can use <code class="language-plaintext highlighter-rouge">doesNotMatchQuery</code>.  In order to find comments for posts without images, you can do:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-66">📋</button><code id="code-66"><span class="kd">const</span> <span class="nx">Post</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Post</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">Comment</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Comment</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">innerQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Post</span><span class="p">);</span>
<span class="nx">innerQuery</span><span class="p">.</span><span class="nx">exists</span><span class="p">(</span><span class="dl">"</span><span class="s2">image</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Comment</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">doesNotMatchQuery</span><span class="p">(</span><span class="dl">"</span><span class="s2">post</span><span class="dl">"</span><span class="p">,</span> <span class="nx">innerQuery</span><span class="p">);</span>
<span class="c1">// comments now contains the comments for posts without images.</span>
<span class="kd">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>You can also do relational queries by <code class="language-plaintext highlighter-rouge">objectId</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-67">📋</button><code id="code-67"><span class="kd">const</span> <span class="nx">post</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Post</span><span class="p">();</span>
<span class="nx">post</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1zEcyElZ80</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">post</span><span class="dl">"</span><span class="p">,</span> <span class="nx">post</span><span class="p">);</span>
</code></pre></div></div>

<p>In some situations, you want to return multiple types of related objects in one query. You can do this with the <code class="language-plaintext highlighter-rouge">include</code> method. For example, let’s say you are retrieving the last ten comments, and you want to retrieve their related posts at the same time:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-68">📋</button><code id="code-68"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Comment</span><span class="p">);</span>

<span class="c1">// Retrieve the most recent ones</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">descending</span><span class="p">(</span><span class="dl">"</span><span class="s2">createdAt</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Only retrieve the last ten</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

<span class="c1">// Include the post data with each comment</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="dl">"</span><span class="s2">post</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Comments now contains the last ten comments, and the "post" field</span>
<span class="kd">const</span> <span class="nx">comments</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
<span class="c1">// has been populated. For example:</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">comments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// This does not require a network access.</span>
  <span class="kd">const</span> <span class="nx">post</span> <span class="o">=</span> <span class="nx">comments</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">post</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can also do multi level includes using dot notation.  If you wanted to include the post for a comment and the post’s author as well you can do:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-69">📋</button><code id="code-69"><span class="nx">query</span><span class="p">.</span><span class="nx">include</span><span class="p">([</span><span class="dl">"</span><span class="s2">post.author</span><span class="dl">"</span><span class="p">]);</span>
</code></pre></div></div>

<p>You can issue a query with multiple fields included by calling <code class="language-plaintext highlighter-rouge">include</code> multiple times. This functionality also works with Parse.Query helpers like <code class="language-plaintext highlighter-rouge">first</code> and <code class="language-plaintext highlighter-rouge">get</code>.</p>

<h2 id="counting-objects"><a class="anchorjs-link " href="/js/guide/#counting-objects" aria-label="Anchor link for: counting objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Counting Objects</h2>

<p>Note: In the old Parse hosted backend, count queries were rate limited to a maximum of 160 requests per minute. They also returned inaccurate results for classes with more than 1,000 objects. But, Parse Server has removed both constraints and can count objects well above 1,000.</p>

<p>If you just need to count how many objects match a query, but you do not need to retrieve all the objects that match, you can use <code class="language-plaintext highlighter-rouge">count</code> instead of <code class="language-plaintext highlighter-rouge">find</code>. For example, to count how many games have been played by a particular player:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-70">📋</button><code id="code-70"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Sean Plott</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">count</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">count</span><span class="p">();</span>
<span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sean has played </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">count</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> games</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="compound-queries"><a class="anchorjs-link " href="/js/guide/#compound-queries" aria-label="Anchor link for: compound queries" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Compound Queries</h2>

<p>For more complex queries you might need compound queries. A compound query is a logical combination (e. g. “and” or “or”) of sub queries.</p>

<p>Note that we do not support GeoPoint or non-filtering constraints (e.g. <code class="language-plaintext highlighter-rouge">near</code>, <code class="language-plaintext highlighter-rouge">withinGeoBox</code>, <code class="language-plaintext highlighter-rouge">limit</code>, <code class="language-plaintext highlighter-rouge">skip</code>, <code class="language-plaintext highlighter-rouge">ascending</code>/<code class="language-plaintext highlighter-rouge">descending</code>, <code class="language-plaintext highlighter-rouge">include</code>) in the subqueries of the compound query.</p>

<h3 id="or-ed-query-constraints"><a class="anchorjs-link " href="/js/guide/#or-ed-query-constraints" aria-label="Anchor link for: or ed query constraints" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>OR-ed query constraints</h3>

<p>If you want to find objects that match one of several queries, you can use <code class="language-plaintext highlighter-rouge">Parse.Query.or</code> method to construct a query that is an OR of the queries passed in.  For instance if you want to find players who either have a lot of wins or a few wins, you can do:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-71">📋</button><code id="code-71"><span class="kd">const</span> <span class="nx">lotsOfWins</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Player</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">lotsOfWins</span><span class="p">.</span><span class="nx">greaterThan</span><span class="p">(</span><span class="dl">"</span><span class="s2">wins</span><span class="dl">"</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">fewWins</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Player</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">fewWins</span><span class="p">.</span><span class="nx">lessThan</span><span class="p">(</span><span class="dl">"</span><span class="s2">wins</span><span class="dl">"</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">mainQuery</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">.</span><span class="nx">or</span><span class="p">(</span><span class="nx">lotsOfWins</span><span class="p">,</span> <span class="nx">fewWins</span><span class="p">);</span>
<span class="nx">mainQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// results contains a list of players that either have won a lot of games or won only a few games.</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// There was an error.</span>
  <span class="p">});</span>
</code></pre></div></div>

<h3 id="and-ed-query-constraints"><a class="anchorjs-link " href="/js/guide/#and-ed-query-constraints" aria-label="Anchor link for: and ed query constraints" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>AND-ed query constraints</h3>

<p>If you want to find objects that match all conditions, you normally would use just one query. You can add additional constraints to the newly created <code class="language-plaintext highlighter-rouge">Parse.Query</code> that act as an ‘and’ operator.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-72">📋</button><code id="code-72"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">greaterThan</span><span class="p">(</span><span class="dl">"</span><span class="s2">age</span><span class="dl">"</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">greaterThan</span><span class="p">(</span><span class="dl">"</span><span class="s2">friends</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// results contains a list of users both older than 18 and having friends.</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// There was an error.</span>
  <span class="p">});</span>
</code></pre></div></div>

<p>Sometimes the world is more complex than this simple example and you may need a compound query of sub queries. You can use <code class="language-plaintext highlighter-rouge">Parse.Query.and</code> method to construct a query that is an AND of the queries passed in. For instance if you want to find users in the age of 16 or 18 who have either no friends or at least 2 friends, you can do:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-73">📋</button><code id="code-73"><span class="kd">const</span> <span class="nx">age16Query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">age16Query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">age</span><span class="dl">"</span><span class="p">,</span> <span class="mi">16</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">age18Query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">age18Query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">age</span><span class="dl">"</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">friends0Query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">friends0Query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">friends</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">friends2Query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">friends2Query</span><span class="p">.</span><span class="nx">greaterThan</span><span class="p">(</span><span class="dl">"</span><span class="s2">friends</span><span class="dl">"</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">mainQuery</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">.</span><span class="nx">and</span><span class="p">(</span>
  <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">.</span><span class="nx">or</span><span class="p">(</span><span class="nx">age16Query</span><span class="p">,</span> <span class="nx">age18Query</span><span class="p">),</span>
  <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">.</span><span class="nx">or</span><span class="p">(</span><span class="nx">friends0Query</span><span class="p">,</span> <span class="nx">friends2Query</span><span class="p">)</span>
<span class="p">);</span>
<span class="nx">mainQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// results contains a list of users in the age of 16 or 18 who have either no friends or at least 2 friends</span>
    <span class="c1">// results: (age 16 or 18) and (0 or &gt;2 friends)</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// There was an error.</span>
  <span class="p">});</span>
</code></pre></div></div>

<h2 id="aggregate"><a class="anchorjs-link " href="/js/guide/#aggregate" aria-label="Anchor link for: aggregate" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Aggregate</h2>

<p>Queries can be made using aggregates, allowing you to retrieve objects over a set of input values. The results will not be <code class="language-plaintext highlighter-rouge">Parse.Object</code>s since you will be aggregating your own fields</p>

<ul>
  <li>Parse Server 2.7.1+</li>
  <li><code class="language-plaintext highlighter-rouge">MasterKey</code> is Required.</li>
</ul>

<p>Aggregates use stages to filter results by piping results from one stage to the next.</p>

<p>You can create a pipeline using an Array or an Object.</p>

<p>The following example is a pipeline similar to <code class="language-plaintext highlighter-rouge">distinct</code> grouping by name field.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-74">📋</button><code id="code-74"><span class="kd">const</span> <span class="nx">pipelineObject</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">group</span><span class="p">:</span> <span class="p">{</span> <span class="na">objectId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">$name</span><span class="dl">'</span> <span class="p">}</span>
 <span class="p">};</span>

<span class="kd">const</span> <span class="nx">pipelineArray</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">group</span><span class="p">:</span> <span class="p">{</span> <span class="na">objectId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">$name</span><span class="dl">'</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">];</span>
</code></pre></div></div>

<p>For a list of available operators please refer to <a href="https://docs.mongodb.com/v3.2/reference/operator/aggregation/">Mongo Aggregate Documentation</a>.</p>

<ul>
  <li>Note: Most operations in Mongo Aggregate Documentation will work with Parse Server, but <code class="language-plaintext highlighter-rouge">_id</code> doesn’t exist. Please replace with <code class="language-plaintext highlighter-rouge">objectId</code>.</li>
</ul>

<p>Group pipeline is similar to <code class="language-plaintext highlighter-rouge">distinct</code>.</p>

<p>You can group by a field.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-75">📋</button><code id="code-75"><span class="c1">// score is the field. $ before score lets the database know this is a field</span>
<span class="kd">const</span> <span class="nx">pipeline</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">group</span><span class="p">:</span> <span class="p">{</span> <span class="na">objectId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">$score</span><span class="dl">'</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">];</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">aggregate</span><span class="p">(</span><span class="nx">pipeline</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// results contains unique score values</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// There was an error.</span>
  <span class="p">});</span>
</code></pre></div></div>

<p>You can apply collective calculations like $sum, $avg, $max, $min.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-76">📋</button><code id="code-76"><span class="c1">// total will be a newly created field to hold the sum of score field</span>
<span class="kd">const</span> <span class="nx">pipeline</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">group</span><span class="p">:</span> <span class="p">{</span> <span class="na">objectId</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="na">total</span><span class="p">:</span> <span class="p">{</span> <span class="na">$sum</span><span class="p">:</span> <span class="dl">'</span><span class="s1">$score</span><span class="dl">'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">];</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">aggregate</span><span class="p">(</span><span class="nx">pipeline</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// results contains sum of score field and stores it in results[0].total</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// There was an error.</span>
  <span class="p">});</span>
</code></pre></div></div>

<p>Project pipeline is similar to <code class="language-plaintext highlighter-rouge">keys</code> or <code class="language-plaintext highlighter-rouge">select</code>, add or remove existing fields.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-77">📋</button><code id="code-77"><span class="kd">const</span> <span class="nx">pipeline</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">project</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">];</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">aggregate</span><span class="p">(</span><span class="nx">pipeline</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// results contains only name field</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// There was an error.</span>
  <span class="p">});</span>
</code></pre></div></div>

<p>Match pipeline is similar to <code class="language-plaintext highlighter-rouge">equalTo</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-78">📋</button><code id="code-78"><span class="kd">const</span> <span class="nx">pipeline</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">match</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BBQ</span><span class="dl">'</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">];</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">aggregate</span><span class="p">(</span><span class="nx">pipeline</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// results contains name that matches 'BBQ'</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// There was an error.</span>
  <span class="p">});</span>
</code></pre></div></div>

<p>You can match by comparison.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-79">📋</button><code id="code-79"><span class="kd">const</span> <span class="nx">pipeline</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">match</span><span class="p">:</span> <span class="p">{</span> <span class="na">score</span><span class="p">:</span> <span class="p">{</span> <span class="na">$gt</span><span class="p">:</span> <span class="mi">15</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">];</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">aggregate</span><span class="p">(</span><span class="nx">pipeline</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// results contains score greater than 15</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// There was an error.</span>
  <span class="p">});</span>
</code></pre></div></div>

<h2 id="distinct"><a class="anchorjs-link " href="/js/guide/#distinct" aria-label="Anchor link for: distinct" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Distinct</h2>

<p>Queries can be made using distinct, allowing you find unique values for a specified field.</p>

<ul>
  <li>Parse Server 2.7.1+</li>
  <li><code class="language-plaintext highlighter-rouge">MasterKey</code> is required.</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-80">📋</button><code id="code-80"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">distinct</span><span class="p">(</span><span class="dl">"</span><span class="s2">age</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// results contains unique age</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// There was an error.</span>
  <span class="p">});</span>
</code></pre></div></div>

<p>You can also restrict results by using <code class="language-plaintext highlighter-rouge">equalTo</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-81">📋</button><code id="code-81"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">User</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">distinct</span><span class="p">(</span><span class="dl">"</span><span class="s2">age</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// results contains unique age where name is foo</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// There was an error.</span>
  <span class="p">});</span>
</code></pre></div></div>

<h2 id="read-preference"><a class="anchorjs-link " href="/js/guide/#read-preference" aria-label="Anchor link for: read preference" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Read Preference</h2>

<p>When using a MongoDB replica set, you can use the <code class="language-plaintext highlighter-rouge">query.readPreference(readPreference, includeReadPreference, subqueryReadPreference)</code> function to choose from which replica the objects will be retrieved. The <code class="language-plaintext highlighter-rouge">includeReadPreference</code> argument chooses from which replica the included pointers will be retrieved and the <code class="language-plaintext highlighter-rouge">subqueryReadPreference</code> argument chooses in which replica the subqueries will run. The possible values are <code class="language-plaintext highlighter-rouge">PRIMARY</code> (default), <code class="language-plaintext highlighter-rouge">PRIMARY_PREFERRED</code>, <code class="language-plaintext highlighter-rouge">SECONDARY</code>, <code class="language-plaintext highlighter-rouge">SECONDARY_PREFERRED</code>, or <code class="language-plaintext highlighter-rouge">NEAREST</code>. If the <code class="language-plaintext highlighter-rouge">includeReadPreference</code> argument is not passed, the same replica chosen for <code class="language-plaintext highlighter-rouge">readPreference</code> will be also used for the includes. The same rule applies for the <code class="language-plaintext highlighter-rouge">subqueryReadPreference</code> argument.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-82">📋</button><code id="code-82"><span class="nx">query</span><span class="p">.</span><span class="nx">readPreference</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">SECONDARY</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">SECONDARY_PREFERRED</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">NEAREST</span><span class="dl">'</span>
<span class="p">);</span>
</code></pre></div></div>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/queries.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/live-queries.md">
    <h1 id="live-queries"><a class="anchorjs-link " href="/js/guide/#live-queries" aria-label="Anchor link for: live queries" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Live Queries</h1>

<h2 id="standard-api"><a class="anchorjs-link " href="/js/guide/#standard-api" aria-label="Anchor link for: standard api" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Standard API</h2>
<p>As we discussed in our <a href="https://github.com/parse-community/parse-server/wiki/Parse-LiveQuery-Protocol-Specification">LiveQuery protocol</a>, we maintain a WebSocket connection to communicate with the Parse LiveQuery server. When used server side we use the <a href="https://www.npmjs.com/package/ws"><code class="language-plaintext highlighter-rouge">ws</code></a> package and in the browser we use <a href="https://developer.mozilla.org/en-US/Web/API/WebSockets_API"><code class="language-plaintext highlighter-rouge">window.WebSocket</code></a>. We think in most cases it isn’t necessary to deal with the WebSocket connection directly. Thus, we developed a simple API to let you focus on your own business logic.</p>

<p>Note: Live Queries is supported only in <a href="https://github.com/parse-community/parse-server">Parse Server</a> with <a href="https://github.com/parse-community/Parse-SDK-JS">JS SDK ~1.8</a>.</p>

<h2 id="create-a-subscription"><a class="anchorjs-link " href="/js/guide/#create-a-subscription" aria-label="Anchor link for: create a subscription" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Create a subscription</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-83">📋</button><code id="code-83"><span class="kd">let</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">'</span><span class="s1">Game</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">subscription</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">();</span>
</code></pre></div></div>

<ul>
  <li>Since release <code class="language-plaintext highlighter-rouge">2.3.0</code> of Parse JS SDK, the <code class="language-plaintext highlighter-rouge">query.subscribe()</code> function returns a <code class="language-plaintext highlighter-rouge">Promise</code> that resolves to the subscription object. Previous releases return the subscription object directly and require you to write <code class="language-plaintext highlighter-rouge">let subscription = query.subscribe();</code> instead.</li>
</ul>

<p>The subscription you get is actually an event emitter. For more information on event emitter, check <a href="https://nodejs.org/api/events.html">here</a>. You’ll get the LiveQuery events through this <code class="language-plaintext highlighter-rouge">subscription</code>. The first time you call subscribe, we’ll try to open the WebSocket connection to the LiveQuery server for you.</p>

<h2 id="event-handling"><a class="anchorjs-link " href="/js/guide/#event-handling" aria-label="Anchor link for: event handling" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Event Handling</h2>
<p>We define several types of events you’ll get through a subscription object:</p>

<h3 id="open-event"><a class="anchorjs-link " href="/js/guide/#open-event" aria-label="Anchor link for: open event" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Open event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-84">📋</button><code id="code-84"><span class="nx">subscription</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
 <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">subscription opened</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When you call <code class="language-plaintext highlighter-rouge">query.subscribe()</code>, we send a subscribe request to the LiveQuery server. When we get the confirmation from the LiveQuery server, this event will be emitted.</p>

<p>When the client loses WebSocket connection to the LiveQuery server, we’ll try to auto reconnect the LiveQuery server. If we reconnect the LiveQuery server and successfully resubscribe the <code class="language-plaintext highlighter-rouge">ParseQuery</code>, you’ll also get this event.</p>

<h3 id="create-event"><a class="anchorjs-link " href="/js/guide/#create-event" aria-label="Anchor link for: create event" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Create event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-85">📋</button><code id="code-85"><span class="nx">subscription</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">create</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">object created</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When a new <code class="language-plaintext highlighter-rouge">ParseObject</code> is created and it fulfills the <code class="language-plaintext highlighter-rouge">ParseQuery</code> you subscribe, you’ll get this event. The <code class="language-plaintext highlighter-rouge">object</code> is the <code class="language-plaintext highlighter-rouge">ParseObject</code> which was created.</p>

<h3 id="update-event"><a class="anchorjs-link " href="/js/guide/#update-event" aria-label="Anchor link for: update event" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Update event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-86">📋</button><code id="code-86"><span class="nx">subscription</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">update</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">object updated</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When an existing <code class="language-plaintext highlighter-rouge">ParseObject</code> which fulfills the <code class="language-plaintext highlighter-rouge">ParseQuery</code> you subscribe is updated (The <code class="language-plaintext highlighter-rouge">ParseObject</code> fulfills the <code class="language-plaintext highlighter-rouge">ParseQuery</code> before and after changes), you’ll get this event. The <code class="language-plaintext highlighter-rouge">object</code> is the <code class="language-plaintext highlighter-rouge">ParseObject</code> which was updated. Its content is the latest value of the <code class="language-plaintext highlighter-rouge">ParseObject</code>.</p>

<h3 id="enter-event"><a class="anchorjs-link " href="/js/guide/#enter-event" aria-label="Anchor link for: enter event" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Enter event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-87">📋</button><code id="code-87"><span class="nx">subscription</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">enter</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">object entered</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When an existing <code class="language-plaintext highlighter-rouge">ParseObject</code>’s old value does not fulfill the <code class="language-plaintext highlighter-rouge">ParseQuery</code> but its new value fulfills the <code class="language-plaintext highlighter-rouge">ParseQuery</code>, you’ll get this event. The <code class="language-plaintext highlighter-rouge">object</code> is the <code class="language-plaintext highlighter-rouge">ParseObject</code> which enters the <code class="language-plaintext highlighter-rouge">ParseQuery</code>. Its content is the latest value of the <code class="language-plaintext highlighter-rouge">ParseObject</code>.</p>

<h3 id="leave-event"><a class="anchorjs-link " href="/js/guide/#leave-event" aria-label="Anchor link for: leave event" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Leave event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-88">📋</button><code id="code-88"><span class="nx">subscription</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">leave</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">object left</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When an existing <code class="language-plaintext highlighter-rouge">ParseObject</code>’s old value fulfills the <code class="language-plaintext highlighter-rouge">ParseQuery</code> but its new value doesn’t fulfill the <code class="language-plaintext highlighter-rouge">ParseQuery</code>, you’ll get this event. The <code class="language-plaintext highlighter-rouge">object</code> is the <code class="language-plaintext highlighter-rouge">ParseObject</code> which leaves the <code class="language-plaintext highlighter-rouge">ParseQuery</code>. Its content is the latest value of the <code class="language-plaintext highlighter-rouge">ParseObject</code>.</p>

<h3 id="delete-event"><a class="anchorjs-link " href="/js/guide/#delete-event" aria-label="Anchor link for: delete event" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Delete event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-89">📋</button><code id="code-89"><span class="nx">subscription</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">delete</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">object deleted</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When an existing <code class="language-plaintext highlighter-rouge">ParseObject</code> which fulfills the <code class="language-plaintext highlighter-rouge">ParseQuery</code> is deleted, you’ll get this event. The <code class="language-plaintext highlighter-rouge">object</code> is the <code class="language-plaintext highlighter-rouge">ParseObject</code> which is deleted.</p>

<h3 id="close-event"><a class="anchorjs-link " href="/js/guide/#close-event" aria-label="Anchor link for: close event" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Close event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-90">📋</button><code id="code-90"><span class="nx">subscription</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">subscription closed</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When the client loses the WebSocket connection to the LiveQuery server and we can’t get anymore events, you’ll get this event.</p>

<h2 id="unsubscribe"><a class="anchorjs-link " href="/js/guide/#unsubscribe" aria-label="Anchor link for: unsubscribe" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Unsubscribe</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-91">📋</button><code id="code-91"><span class="nx">subscription</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
</code></pre></div></div>

<p>If you would like to stop receiving events from a <code class="language-plaintext highlighter-rouge">ParseQuery</code>, you can just unsubscribe the <code class="language-plaintext highlighter-rouge">subscription</code>. After that, you won’t get any events from the <code class="language-plaintext highlighter-rouge">subscription</code> object.</p>

<h2 id="close"><a class="anchorjs-link " href="/js/guide/#close" aria-label="Anchor link for: close" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Close</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-92">📋</button><code id="code-92"><span class="nx">Parse</span><span class="p">.</span><span class="nx">LiveQuery</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
</code></pre></div></div>

<p>When you are done using LiveQuery, you can call <code class="language-plaintext highlighter-rouge">Parse.LiveQuery.close()</code>. This function will close the WebSocket connection to the LiveQuery server, cancel the auto reconnect, and unsubscribe all subscriptions based on it. If you call <code class="language-plaintext highlighter-rouge">query.subscribe()</code> after this, we will create a new WebSocket connection to the LiveQuery server.</p>

<h2 id="setup-server-url"><a class="anchorjs-link " href="/js/guide/#setup-server-url" aria-label="Anchor link for: setup server url" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Setup server URL</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-93">📋</button><code id="code-93"><span class="nx">Parse</span><span class="p">.</span><span class="nx">liveQueryServerURL</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ws://XXXX</span><span class="dl">'</span>
</code></pre></div></div>

<p>Most of the time you do not need to manually set this. If you have setup your <code class="language-plaintext highlighter-rouge">Parse.serverURL</code>, we will try to extract the hostname and use <code class="language-plaintext highlighter-rouge">ws://hostname</code> as the default <code class="language-plaintext highlighter-rouge">liveQueryServerURL</code>. However, if you want to define your own <code class="language-plaintext highlighter-rouge">liveQueryServerURL</code> or use a different protocol such as <code class="language-plaintext highlighter-rouge">wss</code>, you should set it by yourself.</p>

<h2 id="websocket-status"><a class="anchorjs-link " href="/js/guide/#websocket-status" aria-label="Anchor link for: websocket status" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>WebSocket Status</h2>
<p>We expose three events to help you monitor the status of the WebSocket connection:</p>

<h3 id="open-event-1"><a class="anchorjs-link " href="/js/guide/#open-event-1" aria-label="Anchor link for: open event 1" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Open event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-94">📋</button><code id="code-94"><span class="nx">Parse</span><span class="p">.</span><span class="nx">LiveQuery</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">socket connection established</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When we establish the WebSocket connection to the LiveQuery server, you’ll get this event.</p>

<h3 id="close-event-1"><a class="anchorjs-link " href="/js/guide/#close-event-1" aria-label="Anchor link for: close event 1" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Close event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-95">📋</button><code id="code-95"><span class="nx">Parse</span><span class="p">.</span><span class="nx">LiveQuery</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">socket connection closed</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When we lose the WebSocket connection to the LiveQuery server, you’ll get this event.</p>

<h3 id="error-event"><a class="anchorjs-link " href="/js/guide/#error-event" aria-label="Anchor link for: error event" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Error event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-96">📋</button><code id="code-96"><span class="nx">Parse</span><span class="p">.</span><span class="nx">LiveQuery</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When some network error or LiveQuery server error happens, you’ll get this event.</p>

<hr>

<h2 id="advanced-api"><a class="anchorjs-link " href="/js/guide/#advanced-api" aria-label="Anchor link for: advanced api" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Advanced API</h2>
<p>In our standard API, we manage a global WebSocket connection for you, which is suitable for most cases. However, for some cases, like when you have multiple LiveQuery servers and want to connect to all of them, a single WebSocket connection isn’t enough. We’ve exposed the <code class="language-plaintext highlighter-rouge">LiveQueryClient</code> for these scenarios.</p>

<h2 id="livequeryclient"><a class="anchorjs-link " href="/js/guide/#livequeryclient" aria-label="Anchor link for: livequeryclient" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>LiveQueryClient</h2>
<p>A <code class="language-plaintext highlighter-rouge">LiveQueryClient</code> is a wrapper of a standard WebSocket client. We add several useful methods to help you connect/disconnect to LiveQueryServer and subscribe/unsubscribe a <code class="language-plaintext highlighter-rouge">ParseQuery</code> easily.</p>

<h3 id="initialize"><a class="anchorjs-link " href="/js/guide/#initialize" aria-label="Anchor link for: initialize" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Initialize</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-97">📋</button><code id="code-97"><span class="kd">let</span> <span class="nx">Parse</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">parse/node</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">LiveQueryClient</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">LiveQueryClient</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LiveQueryClient</span><span class="p">({</span>
  <span class="na">applicationId</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
  <span class="na">serverURL</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
  <span class="na">javascriptKey</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
  <span class="na">masterKey</span><span class="p">:</span> <span class="dl">''</span>
<span class="p">});</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">applicationId</code> is mandatory, it’s the <code class="language-plaintext highlighter-rouge">applicationId</code> of your Parse app</li>
  <li><code class="language-plaintext highlighter-rouge">serverURL</code> is mandatory, it’s the URL of your LiveQuery server</li>
  <li><code class="language-plaintext highlighter-rouge">javascriptKey</code> and <code class="language-plaintext highlighter-rouge">masterKey</code> are optional, they are used for verifying the <code class="language-plaintext highlighter-rouge">LiveQueryClient</code> when it tries to connect to the LiveQuery server. If you set them, they should match your Parse app. You can check LiveQuery protocol <a href="https://github.com/parse-community/parse-server/wiki/Parse-LiveQuery-Protocol-Specification">here</a> for more details.</li>
</ul>

<h3 id="open"><a class="anchorjs-link " href="/js/guide/#open" aria-label="Anchor link for: open" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Open</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-98">📋</button><code id="code-98"><span class="nx">client</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span>
</code></pre></div></div>

<p>After you call this, the <code class="language-plaintext highlighter-rouge">LiveQueryClient</code> will try to send a connect request to the LiveQuery server.</p>

<h3 id="subscribe"><a class="anchorjs-link " href="/js/guide/#subscribe" aria-label="Anchor link for: subscribe" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Subscribe</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-99">📋</button><code id="code-99"><span class="kd">let</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">'</span><span class="s1">Game</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">subscription</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">sessionToken</span><span class="p">);</span> 
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">query</code> is mandatory, it is the <code class="language-plaintext highlighter-rouge">ParseQuery</code> you want to subscribe</li>
  <li><code class="language-plaintext highlighter-rouge">sessionToken</code> is optional, if you provide the <code class="language-plaintext highlighter-rouge">sessionToken</code>, when the LiveQuery server gets <code class="language-plaintext highlighter-rouge">ParseObject</code>’s updates from parse server, it’ll try to check whether the <code class="language-plaintext highlighter-rouge">sessionToken</code> fulfills the <code class="language-plaintext highlighter-rouge">ParseObject</code>’s ACL. The LiveQuery server will only send updates to clients whose sessionToken is fit for the <code class="language-plaintext highlighter-rouge">ParseObject</code>’s ACL. You can check the LiveQuery protocol <a href="https://github.com/parse-community/parse-server/wiki/Parse-LiveQuery-Protocol-Specification">here</a> for more details.
The <code class="language-plaintext highlighter-rouge">subscription</code> you get is the same <code class="language-plaintext highlighter-rouge">subscription</code> you get from our Standard API. You can check our Standard API about how to use the <code class="language-plaintext highlighter-rouge">subscription</code> to get events.</li>
</ul>

<h3 id="unsubscribe-1"><a class="anchorjs-link " href="/js/guide/#unsubscribe-1" aria-label="Anchor link for: unsubscribe 1" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Unsubscribe</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-100">📋</button><code id="code-100"><span class="nx">client</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">(</span><span class="nx">subscription</span><span class="p">);</span> 
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">subscription</code> is mandatory, it’s the subscription you want to unsubscribe from.
After you call this, you won’t get any events from the subscription object.</li>
</ul>

<h3 id="close-1"><a class="anchorjs-link " href="/js/guide/#close-1" aria-label="Anchor link for: close 1" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Close</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-101">📋</button><code id="code-101"><span class="nx">client</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
</code></pre></div></div>

<p>This function will close the WebSocket connection to this <code class="language-plaintext highlighter-rouge">LiveQueryClient</code>, cancel the auto reconnect, and unsubscribe all subscriptions based on it.</p>

<h2 id="event-handling-1"><a class="anchorjs-link " href="/js/guide/#event-handling-1" aria-label="Anchor link for: event handling 1" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Event Handling</h2>
<p>We expose three events to help you monitor the status of the <code class="language-plaintext highlighter-rouge">LiveQueryClient</code>.</p>

<h3 id="open-event-2"><a class="anchorjs-link " href="/js/guide/#open-event-2" aria-label="Anchor link for: open event 2" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Open event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-102">📋</button><code id="code-102"><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">open</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">connection opened</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When we establish the WebSocket connection to the LiveQuery server, you’ll get this event.</p>

<h3 id="close-event-2"><a class="anchorjs-link " href="/js/guide/#close-event-2" aria-label="Anchor link for: close event 2" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Close event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-103">📋</button><code id="code-103"><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">close</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">connection closed</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When we lose the WebSocket connection to the LiveQuery server, you’ll get this event.</p>

<h3 id="error-event-1"><a class="anchorjs-link " href="/js/guide/#error-event-1" aria-label="Anchor link for: error event 1" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Error event</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-104">📋</button><code id="code-104"><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">connection error</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>When some network error or LiveQuery server error happens, you’ll get this event.</p>

<hr>

<h2 id="reconnect"><a class="anchorjs-link " href="/js/guide/#reconnect" aria-label="Anchor link for: reconnect" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Reconnect</h2>
<p>Since the whole LiveQuery feature relies on the WebSocket connection to the LiveQuery server, we always try to maintain an open WebSocket connection. Thus, when we find we lose the connection to the LiveQuery server, we will try to auto reconnect. We do exponential back off under the hood. However, if the WebSocket connection is closed due to <code class="language-plaintext highlighter-rouge">Parse.LiveQuery.close()</code> or <code class="language-plaintext highlighter-rouge">client.close()</code>, we’ll cancel the auto reconnect.</p>

<hr>

<h2 id="sessiontoken"><a class="anchorjs-link " href="/js/guide/#sessiontoken" aria-label="Anchor link for: sessiontoken" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>SessionToken</h2>
<p>We send <code class="language-plaintext highlighter-rouge">sessionToken</code> to the LiveQuery server when you subscribe to a <code class="language-plaintext highlighter-rouge">ParseQuery</code>. For the standard API, we use the <code class="language-plaintext highlighter-rouge">sessionToken</code> of the current user by default. For the advanced API, you can use any <code class="language-plaintext highlighter-rouge">sessionToken</code> when you subscribe to a <code class="language-plaintext highlighter-rouge">ParseQuery</code>. An important thing to be aware of is when you log out or the <code class="language-plaintext highlighter-rouge">sessionToken</code> you are using is invalid, you should unsubscribe the subscription and subscribe to the <code class="language-plaintext highlighter-rouge">ParseQuery</code> again. Otherwise you may face a security issue since you’ll get events which shouldn’t be sent to you.</p>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/live-queries.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/users.md">
    <h1 id="users"><a class="anchorjs-link " href="/js/guide/#users" aria-label="Anchor link for: users" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Users</h1>

<p>At the core of many apps, there is a notion of user accounts that lets users access their information in a secure manner. We provide a specialized user class called <code class="language-plaintext highlighter-rouge">Parse.User</code> that automatically handles much of the functionality required for user account management.</p>

<p>With this class, you’ll be able to add user account functionality in your app.</p>

<p><code class="language-plaintext highlighter-rouge">Parse.User</code> is a subclass of <code class="language-plaintext highlighter-rouge">Parse.Object</code>, and has all the same features, such as flexible schema, automatic persistence, and a key value interface. All the methods that are on <code class="language-plaintext highlighter-rouge">Parse.Object</code> also exist in <code class="language-plaintext highlighter-rouge">Parse.User</code>. The difference is that <code class="language-plaintext highlighter-rouge">Parse.User</code> has some special additions specific to user accounts.</p>

<h2 id="parseuser-properties"><a class="anchorjs-link " href="/js/guide/#parseuser-properties" aria-label="Anchor link for: parseuser properties" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a><code class="language-plaintext highlighter-rouge">Parse.User</code> Properties</h2>

<p><code class="language-plaintext highlighter-rouge">Parse.User</code> has several values that set it apart from <code class="language-plaintext highlighter-rouge">Parse.Object</code>:</p>

<ul>
  <li>username: The username for the user (required).</li>
  <li>password: The password for the user (required on signup).</li>
  <li>email: The email address for the user (optional).</li>
</ul>

<p>We’ll go through each of these in detail as we run through the various use cases for users.</p>

<h2 id="signing-up"><a class="anchorjs-link " href="/js/guide/#signing-up" aria-label="Anchor link for: signing up" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Signing Up</h2>

<p>The first thing your app will do is probably ask the user to sign up. The following code illustrates a typical sign up:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-105">📋</button><code id="code-105"><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">();</span>
<span class="nx">user</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">my name</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">user</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">my pass</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">user</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">email@example.com</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// other fields can be set just like with Parse.Object</span>
<span class="nx">user</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">phone</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">415-392-0202</span><span class="dl">"</span><span class="p">);</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">signUp</span><span class="p">();</span>
  <span class="c1">// Hooray! Let them use the app now.</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Show the error message somewhere and let the user try again.</span>
  <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">code</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This call will asynchronously create a new user in your Parse App. Before it does this, it also checks to make sure that both the username and email are unique. Also, it securely hashes the password in the cloud using bcrypt. We never store passwords in plaintext, nor will we ever transmit passwords back to the client in plaintext.</p>

<p>Note that we used the <code class="language-plaintext highlighter-rouge">signUp</code> method, not the <code class="language-plaintext highlighter-rouge">save</code> method. New <code class="language-plaintext highlighter-rouge">Parse.User</code>s should always be created using the <code class="language-plaintext highlighter-rouge">signUp</code> method. Subsequent updates to a user can be done by calling <code class="language-plaintext highlighter-rouge">save</code>.</p>

<p>If a signup isn’t successful, you should read the error object that is returned. The most likely case is that the username or email has already been taken by another user. You should clearly communicate this to your users, and ask them try a different username.</p>

<p>You are free to use an email address as the username. Simply ask your users to enter their email, but fill it in the username property — <code class="language-plaintext highlighter-rouge">Parse.User</code> will work as normal. We’ll go over how this is handled in the reset password section.</p>

<h2 id="logging-in"><a class="anchorjs-link " href="/js/guide/#logging-in" aria-label="Anchor link for: logging in" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Logging In</h2>

<p>Of course, after you allow users to sign up, you need to let them log in to their account in the future. To do this, you can use the class method <code class="language-plaintext highlighter-rouge">logIn</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-106">📋</button><code id="code-106"><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">myname</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mypass</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// Do stuff after successful login.</span>
</code></pre></div></div>

<p>By default, the SDK uses the GET HTTP method. If you would like to override this and use a POST HTTP method instead, you may pass an optional Boolean property in the options argument with the key <code class="language-plaintext highlighter-rouge">usePost</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-107">📋</button><code id="code-107"><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">myname</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mypass</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">usePost</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="c1">// Do stuff after successful login.</span>
</code></pre></div></div>
<blockquote>
  <p>Available with SDK version 2.17.0 and later</p>
</blockquote>

<h2 id="verifying-emails"><a class="anchorjs-link " href="/js/guide/#verifying-emails" aria-label="Anchor link for: verifying emails" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Verifying Emails</h2>

<p>Enabling email verification in an application’s settings allows the application to reserve part of its experience for users with confirmed email addresses. Email verification adds the <code class="language-plaintext highlighter-rouge">emailVerified</code> key to the <code class="language-plaintext highlighter-rouge">Parse.User</code> object. When a <code class="language-plaintext highlighter-rouge">Parse.User</code>’s <code class="language-plaintext highlighter-rouge">email</code> is set or modified, <code class="language-plaintext highlighter-rouge">emailVerified</code> is set to <code class="language-plaintext highlighter-rouge">false</code>. Parse then emails the user a link which will set <code class="language-plaintext highlighter-rouge">emailVerified</code> to <code class="language-plaintext highlighter-rouge">true</code>.</p>

<p>There are three <code class="language-plaintext highlighter-rouge">emailVerified</code> states to consider:</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">true</code> - the user confirmed his or her email address by clicking on the link Parse emailed them. <code class="language-plaintext highlighter-rouge">Parse.Users</code> can never have a <code class="language-plaintext highlighter-rouge">true</code> value when the user account is first created.</li>
  <li><code class="language-plaintext highlighter-rouge">false</code> - at the time the <code class="language-plaintext highlighter-rouge">Parse.User</code> object was last refreshed, the user had not confirmed his or her email address. If <code class="language-plaintext highlighter-rouge">emailVerified</code> is <code class="language-plaintext highlighter-rouge">false</code>, consider calling <code class="language-plaintext highlighter-rouge">fetch</code> on the <code class="language-plaintext highlighter-rouge">Parse.User</code>.</li>
  <li><em>missing</em> - the <code class="language-plaintext highlighter-rouge">Parse.User</code> was created when email verification was off or the <code class="language-plaintext highlighter-rouge">Parse.User</code> does not have an <code class="language-plaintext highlighter-rouge">email</code>.</li>
</ol>

<h2 id="current-user"><a class="anchorjs-link " href="/js/guide/#current-user" aria-label="Anchor link for: current user" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Current User</h2>

<p>It would be bothersome if the user had to log in every time they open your app. You can avoid this by using the cached current <code class="language-plaintext highlighter-rouge">Parse.User</code> object.</p>

<p>Please note that this functionality is disabled by default on Node.js environments (such as React Native) to discourage stateful usages on server-side configurations. To bypass this behavior on this particular use case, call once <code class="language-plaintext highlighter-rouge">Parse.User.enableUnsafeCurrentUser()</code> right before using any cached-user related functionalities.</p>

<p>Whenever you use any signup or login methods, the user is cached in localStorage, or in any storage you configured via the <code class="language-plaintext highlighter-rouge">Parse.setAsyncStorage</code> method. You can treat this cache as a session, and automatically assume the user is logged in:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-108">📋</button><code id="code-108"><span class="kd">const</span> <span class="nx">currentUser</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">currentUser</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do stuff with the user</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// show the signup or login page</span>
<span class="p">}</span>
</code></pre></div></div>

<p>When using a platform with an async storage system you should call <code class="language-plaintext highlighter-rouge">currentAsync()</code> instead.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-109">📋</button><code id="code-109"><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">currentAsync</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do stuff with your user</span>
<span class="p">});</span>
</code></pre></div></div>

<p>You can clear the current user by logging them out:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-110">📋</button><code id="code-110"><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logOut</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">currentUser</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>  <span class="c1">// this will now be null</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="setting-the-current-user"><a class="anchorjs-link " href="/js/guide/#setting-the-current-user" aria-label="Anchor link for: setting the current user" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Setting the Current User</h2>

<p>If you’ve created your own authentication routines, or otherwise logged in a user on the server side, you can now pass the session token to the client and use the <code class="language-plaintext highlighter-rouge">become</code> method. This method will ensure the session token is valid before setting the current user.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-111">📋</button><code id="code-111"><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">become</span><span class="p">(</span><span class="dl">"</span><span class="s2">session-token-here</span><span class="dl">"</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// The current user is now set to user.</span>
<span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// The token could not be validated.</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="security-for-user-objects"><a class="anchorjs-link " href="/js/guide/#security-for-user-objects" aria-label="Anchor link for: security for user objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Security For User Objects</h2>

<p>The <code class="language-plaintext highlighter-rouge">Parse.User</code> class is secured by default. Data stored in a <code class="language-plaintext highlighter-rouge">Parse.User</code> can only be modified by that user. By default, the data can still be read by any client. Thus, some <code class="language-plaintext highlighter-rouge">Parse.User</code> objects are authenticated and can be modified, whereas others are read-only.</p>

<p>Specifically, you are not able to invoke any of the <code class="language-plaintext highlighter-rouge">save</code> or <code class="language-plaintext highlighter-rouge">delete</code> methods unless the <code class="language-plaintext highlighter-rouge">Parse.User</code> was obtained using an authenticated method, like <code class="language-plaintext highlighter-rouge">logIn</code> or <code class="language-plaintext highlighter-rouge">signUp</code>. This ensures that only the user can alter their own data.</p>

<p>The following illustrates this security policy:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-112">📋</button><code id="code-112"><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">my_username</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">my_password</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">user</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">my_new_username</span><span class="dl">"</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
<span class="c1">// This succeeds, since the user was authenticated on the device</span>

<span class="c1">// Get the user from a non-authenticated method</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">userAgain</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">objectId</span><span class="p">);</span>
<span class="nx">userAgain</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">another_username</span><span class="dl">"</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">userAgain</span><span class="p">.</span><span class="nx">save</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// This will error, since the Parse.User is not authenticated</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">Parse.User</code> obtained from <code class="language-plaintext highlighter-rouge">Parse.User.current()</code> will always be authenticated.</p>

<p>If you need to check if a <code class="language-plaintext highlighter-rouge">Parse.User</code> is authenticated, you can invoke the <code class="language-plaintext highlighter-rouge">authenticated</code> method. You do not need to check <code class="language-plaintext highlighter-rouge">authenticated</code> with <code class="language-plaintext highlighter-rouge">Parse.User</code> objects that are obtained via an authenticated method.</p>

<h2 id="encrypting-current-user"><a class="anchorjs-link " href="/js/guide/#encrypting-current-user" aria-label="Anchor link for: encrypting current user" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Encrypting Current User</h2>

<p>Often you may want to be more careful with user information stored in the browser, if this is the case you can encrypt the current user object:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-113">📋</button><code id="code-113">
<span class="nx">Parse</span><span class="p">.</span><span class="nx">enableEncryptedUser</span><span class="p">();</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nx">secret</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">my Secrey Key</span><span class="dl">'</span><span class="p">;</span>

</code></pre></div></div>
<ul>
  <li>It’s important to remember that this function will not work if <code class="language-plaintext highlighter-rouge">Parse.secret</code> is not set.</li>
  <li>Also note that this only works in the browser.</li>
</ul>

<p>Now the record in Local Storage looks like a random string and only can be read using <code class="language-plaintext highlighter-rouge">Parse.User.current()</code>
You can check if this feature is enabled with the function <code class="language-plaintext highlighter-rouge">Parse.isEncryptedUserEnabled()</code>.</p>

<h2 id="security-for-other-objects"><a class="anchorjs-link " href="/js/guide/#security-for-other-objects" aria-label="Anchor link for: security for other objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Security For Other Objects</h2>

<p>The same security model that applies to the <code class="language-plaintext highlighter-rouge">Parse.User</code> can be applied to other objects. For any object, you can specify which users are allowed to read the object, and which users are allowed to modify an object. To support this type of security, each object has an <a href="https://en.wikipedia.org/wiki/Access_control_list">access control list</a>, implemented by the <code class="language-plaintext highlighter-rouge">Parse.ACL</code> class.</p>

<p>The simplest way to use a <code class="language-plaintext highlighter-rouge">Parse.ACL</code> is to specify that an object may only be read or written by a single user. This is done by initializing a Parse.ACL with a <code class="language-plaintext highlighter-rouge">Parse.User</code>: <code class="language-plaintext highlighter-rouge">new Parse.ACL(user)</code> generates a <code class="language-plaintext highlighter-rouge">Parse.ACL</code> that limits access to that user. An object’s ACL is updated when the object is saved, like any other property. Thus, to create a private note that can only be accessed by the current user:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-114">📋</button><code id="code-114"><span class="kd">const</span> <span class="nx">Note</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Note</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">privateNote</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Note</span><span class="p">();</span>
<span class="nx">privateNote</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">This note is private!</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">privateNote</span><span class="p">.</span><span class="nx">setACL</span><span class="p">(</span><span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">()));</span>
<span class="nx">privateNote</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>This note will then only be accessible to the current user, although it will be accessible to any device where that user is signed in. This functionality is useful for applications where you want to enable access to user data across multiple devices, like a personal todo list.</p>

<p>Permissions can also be granted on a per-user basis. You can add permissions individually to a <code class="language-plaintext highlighter-rouge">Parse.ACL</code> using <code class="language-plaintext highlighter-rouge">setReadAccess</code> and <code class="language-plaintext highlighter-rouge">setWriteAccess</code>. For example, let’s say you have a message that will be sent to a group of several users, where each of them have the rights to read and delete that message:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-115">📋</button><code id="code-115"><span class="kd">const</span> <span class="nx">Message</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Message</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">groupMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Message</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">groupACL</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">();</span>

<span class="c1">// userList is an array with the users we are sending this message to.</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">userList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">groupACL</span><span class="p">.</span><span class="nx">setReadAccess</span><span class="p">(</span><span class="nx">userList</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="kc">true</span><span class="p">);</span>
  <span class="nx">groupACL</span><span class="p">.</span><span class="nx">setWriteAccess</span><span class="p">(</span><span class="nx">userList</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">groupMessage</span><span class="p">.</span><span class="nx">setACL</span><span class="p">(</span><span class="nx">groupACL</span><span class="p">);</span>
<span class="nx">groupMessage</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>You can also grant permissions to all users at once using <code class="language-plaintext highlighter-rouge">setPublicReadAccess</code> and <code class="language-plaintext highlighter-rouge">setPublicWriteAccess</code>. This allows patterns like posting comments on a message board. For example, to create a post that can only be edited by its author, but can be read by anyone:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-116">📋</button><code id="code-116"><span class="kd">const</span> <span class="nx">publicPost</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Post</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">postACL</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span>
<span class="nx">postACL</span><span class="p">.</span><span class="nx">setPublicReadAccess</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="nx">publicPost</span><span class="p">.</span><span class="nx">setACL</span><span class="p">(</span><span class="nx">postACL</span><span class="p">);</span>
<span class="nx">publicPost</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>Operations that are forbidden, such as deleting an object that you do not have write access to, result in a <code class="language-plaintext highlighter-rouge">Parse.Error.OBJECT_NOT_FOUND</code> error code. For security purposes, this prevents clients from distinguishing which object ids exist but are secured, versus which object ids do not exist at all.</p>

<h2 id="resetting-passwords"><a class="anchorjs-link " href="/js/guide/#resetting-passwords" aria-label="Anchor link for: resetting passwords" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Resetting Passwords</h2>

<p>It’s a fact that as soon as you introduce passwords into a system, users will forget them. In such cases, our library provides a way to let them securely reset their password.</p>

<p>To kick off the password reset flow, ask the user for their email address, and call:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-117">📋</button><code id="code-117"><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">requestPasswordReset</span><span class="p">(</span><span class="dl">"</span><span class="s2">email@example.com</span><span class="dl">"</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Password reset request was sent successfully</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Show the error message somewhere</span>
  <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">code</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>This will attempt to match the given email with the user’s email or username field, and will send them a password reset email. By doing this, you can opt to have users use their email as their username, or you can collect it separately and store it in the email field.</p>

<p>The flow for password reset is as follows:</p>

<ol>
  <li>User requests that their password be reset by typing in their email.</li>
  <li>Parse sends an email to their address, with a special password reset link.</li>
  <li>User clicks on the reset link, and is directed to a special Parse page that will allow them type in a new password.</li>
  <li>User types in a new password. Their password has now been reset to a value they specify.</li>
</ol>

<p>Note that the messaging in this flow will reference your app by the name that you specified when you created this app on Parse.</p>

<h2 id="querying"><a class="anchorjs-link " href="/js/guide/#querying" aria-label="Anchor link for: querying" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Querying</h2>

<p>To query for users, you can simple create a new <code class="language-plaintext highlighter-rouge">Parse.Query</code> for <code class="language-plaintext highlighter-rouge">Parse.User</code>s:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-118">📋</button><code id="code-118"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">gender</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">female</span><span class="dl">"</span><span class="p">);</span>  <span class="c1">// find all the women</span>
<span class="kd">const</span> <span class="nx">women</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="associations"><a class="anchorjs-link " href="/js/guide/#associations" aria-label="Anchor link for: associations" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Associations</h2>

<p>Associations involving a <code class="language-plaintext highlighter-rouge">Parse.User</code> work right of the box. For example, let’s say you’re making a blogging app. To store a new post for a user and retrieve all their posts:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-119">📋</button><code id="code-119"><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>

<span class="c1">// Make a new post</span>
<span class="kd">const</span> <span class="nx">Post</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Post</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">post</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Post</span><span class="p">();</span>
<span class="nx">post</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">My New Post</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">post</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">body</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">This is some great content.</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">post</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">post</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
<span class="c1">// Find all posts by the current user</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Post</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">userPosts</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
<span class="c1">// userPosts contains all of the posts by the current user.</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="facebook-users"><a class="anchorjs-link " href="/js/guide/#facebook-users" aria-label="Anchor link for: facebook users" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Facebook Users</h2>

<p>Parse provides an easy way to integrate Facebook with your application. The <code class="language-plaintext highlighter-rouge">Parse.FacebookUtils</code> class integrates <code class="language-plaintext highlighter-rouge">Parse.User</code> and the Facebook Javascript SDK to make linking your users to their Facebook identities easy.</p>

<p>Using our Facebook integration, you can associate an authenticated Facebook user with a <code class="language-plaintext highlighter-rouge">Parse.User</code>. With just a few lines of code, you’ll be able to provide a “log in with Facebook” option in your app, and be able to save their data to Parse.</p>

<h3 id="setting-up-facebook"><a class="anchorjs-link " href="/js/guide/#setting-up-facebook" aria-label="Anchor link for: setting up facebook" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Setting up Facebook</h3>

<p>To start using Facebook with Parse, you need to:</p>

<ol>
  <li><a href="https://developers.facebook.com/">Create a Facebook Developer account</a>.</li>
  <li><a href="https://developers.facebook.com/apps">Create an app</a>.</li>
  <li>In your app Dashboard, add a product -&gt; Facebook Login.</li>
  <li><a href="/parse-server/guide/#oauth-and-3rd-party-authentication">Add appIds to Parse Server auth configuration</a> or pass <code class="language-plaintext highlighter-rouge">facebookAppIds</code> into configuration</li>
</ol>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-120">📋</button><code id="code-120"><span class="nt">&lt;script&gt;</span>
  <span class="c1">// Initialize Parse</span>
  <span class="nx">Parse</span><span class="p">.</span><span class="nx">initialize</span><span class="p">(</span><span class="dl">"</span><span class="s2">$PARSE_APPLICATION_ID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">$PARSE_JAVASCRIPT_KEY</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">Parse</span><span class="p">.</span><span class="nx">serverURL</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">http://YOUR_PARSE_SERVER:1337/parse</span><span class="dl">'</span><span class="p">;</span>

  <span class="nb">window</span><span class="p">.</span><span class="nx">fbAsyncInit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Parse</span><span class="p">.</span><span class="nx">FacebookUtils</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
      <span class="na">appId</span>      <span class="p">:</span> <span class="dl">'</span><span class="s1">{facebook-app-id}</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// Facebook App ID</span>
      <span class="na">status</span>     <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// check Facebook Login status</span>
      <span class="na">cookie</span>     <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// enable cookies to allow Parse to access the session</span>
      <span class="na">xfbml</span>      <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">// initialize Facebook social plugins on the page</span>
      <span class="na">version</span>    <span class="p">:</span> <span class="dl">'</span><span class="s1">v2.3</span><span class="dl">'</span> <span class="c1">// point to the latest Facebook Graph API version</span>
    <span class="p">});</span>
    <span class="c1">// Run code after the Facebook SDK is loaded.</span>
    <span class="c1">// ...</span>
  <span class="p">};</span>

  <span class="c1">// Load Facebook SDK</span>
  <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">id</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">js</span><span class="p">,</span> <span class="nx">fjs</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">))</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>
    <span class="nx">js</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span> <span class="nx">js</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
    <span class="nx">js</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">//connect.facebook.net/en_US/sdk.js</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">fjs</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">js</span><span class="p">,</span> <span class="nx">fjs</span><span class="p">);</span>
  <span class="p">}(</span><span class="nb">document</span><span class="p">,</span> <span class="dl">'</span><span class="s1">script</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">facebook-jssdk</span><span class="dl">'</span><span class="p">));</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>The function assigned to <code class="language-plaintext highlighter-rouge">fbAsyncInit</code> is run as soon as the Facebook JavaScript SDK has completed loading. Any code that you want to run after the Facebook JavaScript SDK is loaded should be placed within this function and after the call to <code class="language-plaintext highlighter-rouge">Parse.FacebookUtils.init()</code>.</p>

<p>If you encounter any issues that are Facebook-related, a good resource is the <a href="https://developers.facebook.com/docs/reference/javascript/">official getting started guide from Facebook</a>.</p>

<p>There are two main ways to use Facebook with your Parse users: (1) <a href="/js/guide/#login--signup">logging in as a Facebook user</a> and creating a <code class="language-plaintext highlighter-rouge">Parse.User</code>, or (2) <a href="/js/guide/#linking">linking Facebook</a> to an existing <code class="language-plaintext highlighter-rouge">Parse.User</code>.</p>

<h3 id="login--signup"><a class="anchorjs-link " href="/js/guide/#login--signup" aria-label="Anchor link for: login  signup" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Login &amp; Signup</h3>

<p><code class="language-plaintext highlighter-rouge">Parse.FacebookUtils</code> provides a way to allow your <code class="language-plaintext highlighter-rouge">Parse.User</code>s to log in or sign up through Facebook. This is accomplished using the <code class="language-plaintext highlighter-rouge">logIn()</code> method:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-121">📋</button><code id="code-121"><span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">users</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">FacebookUtils</span><span class="p">.</span><span class="nx">logIn</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">.</span><span class="nx">existed</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">User signed up and logged in through Facebook!</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">User logged in through Facebook!</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">User cancelled the Facebook login or did not fully authorize.</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>When this code is run, the following happens:</p>

<ol>
  <li>The user is shown the Facebook login dialog.</li>
  <li>The user authenticates via Facebook, and your app receives a callback.</li>
  <li>Our SDK receives the Facebook data and saves it to a <code class="language-plaintext highlighter-rouge">Parse.User</code>. If it’s a new user based on the Facebook ID, then that user is created.</li>
</ol>

<p>You may optionally provide a comma-delimited string that specifies what <a href="https://developers.facebook.com/docs/authentication/permissions/">permissions</a> your app requires from the Facebook user. For example:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-122">📋</button><code id="code-122"><span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">FacebookUtils</span><span class="p">.</span><span class="nx">logIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">user_likes,email</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<div class="tip info"><div>
  It is up to you to record any data that you need from the Facebook user after they authenticate. To accomplish this, you'll need to do a graph query using the Facebook SDK.
</div></div>

<h3 id="linking"><a class="anchorjs-link " href="/js/guide/#linking" aria-label="Anchor link for: linking" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Linking</h3>

<p>If you want to associate an existing <code class="language-plaintext highlighter-rouge">Parse.User</code> to a Facebook account, you can link it like so:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-123">📋</button><code id="code-123"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">FacebookUtils</span><span class="p">.</span><span class="nx">isLinked</span><span class="p">(</span><span class="nx">user</span><span class="p">))</span> <span class="p">{</span>
  <span class="k">try</span>  <span class="p">{</span>
    <span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">FacebookUtils</span><span class="p">.</span><span class="nx">link</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Woohoo, user logged in with Facebook!</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{}</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">User cancelled the Facebook login or ddid not fully authorize.</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The steps that happen when linking are very similar to log in. The difference is that on successful login, the existing <code class="language-plaintext highlighter-rouge">Parse.User</code> is updated with the Facebook information. Future logins via Facebook will now log the user into their existing account.</p>

<p>For advanced API: If you have a Facebook <code class="language-plaintext highlighter-rouge">access_token</code>, you can use <a href="/js/guide/#Linking-Users">linkWith()</a>.</p>

<p>If you want to unlink Facebook from a user, simply do this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-124">📋</button><code id="code-124"><span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">FacebookUtils</span><span class="p">.</span><span class="nx">unlink</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
<span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">The user is no longer associated with their Facebook account.</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="facebook-sdk-and-parse"><a class="anchorjs-link " href="/js/guide/#facebook-sdk-and-parse" aria-label="Anchor link for: facebook sdk and parse" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Facebook SDK and Parse</h3>

<p>The Facebook Javascript SDK provides a main <code class="language-plaintext highlighter-rouge">FB</code> object that is the starting point for many of the interactions with Facebook’s API. <a href="https://developers.facebook.com/docs/reference/javascript/">You can read more about their SDK here</a>.</p>

<p>Facebook login using the Parse SDK requires that the Facebook SDK already be loaded before calling <code class="language-plaintext highlighter-rouge">Parse.FacebookUtils.init()</code>.</p>

<p>Our library manages the <code class="language-plaintext highlighter-rouge">FB</code> object for you. The <code class="language-plaintext highlighter-rouge">FB</code> singleton is synchronized with the current user by default, so any methods you call on it will be acting on the Facebook user associated with the current <code class="language-plaintext highlighter-rouge">Parse.User</code>. Calling <code class="language-plaintext highlighter-rouge">FB.login()</code> or <code class="language-plaintext highlighter-rouge">FB.logOut()</code> explicitly will cause the <code class="language-plaintext highlighter-rouge">Parse.User</code> and <code class="language-plaintext highlighter-rouge">FB</code> object to fall out of synchronization, and is not recommended.</p>

<h2 id="linking-users"><a class="anchorjs-link " href="/js/guide/#linking-users" aria-label="Anchor link for: linking users" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Linking Users</h2>

<p>Parse allows you to link your users with <a href="/parse-server/guide/#oauth-and-3rd-party-authentication">3rd party authentication</a>, enabling your users to sign up or log into your application using their existing identities. This is accomplished through <a href="https://parseplatform.org/Parse-SDK-JS/api/2.9.0/Parse.User.html#linkWith"><code class="language-plaintext highlighter-rouge">linkWith</code></a> method by providing authentication data for the service you wish to link to a user in the <code class="language-plaintext highlighter-rouge">authData</code> field. Once your user is associated with a service, the <code class="language-plaintext highlighter-rouge">authData</code> for the service will be stored with the user and is retrievable by logging in.</p>

<p><code class="language-plaintext highlighter-rouge">authData</code> is a JSON object with keys for each linked service containing the data below. The <code class="language-plaintext highlighter-rouge">authData</code> object is required to at least have a key named <code class="language-plaintext highlighter-rouge">id</code>, which is used to identify the user on subsequent login attempts with linked account data.</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">_linkWith</code> has been deprecated since version 2.9.0, see <a href="https://parseplatform.org/Parse-SDK-JS/api/master/Parse.User.html#_linkWith">_linkWith</a></p>
</blockquote>

<h3 id="signing-up-and-logging-in"><a class="anchorjs-link " href="/js/guide/#signing-up-and-logging-in" aria-label="Anchor link for: signing up and logging in" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Signing Up and Logging In</h3>

<p>Signing a user up with a linked service and logging them in with that service uses the same <code class="language-plaintext highlighter-rouge">linkWith()</code> method, in which the <code class="language-plaintext highlighter-rouge">authData</code> for the user is specified.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-125">📋</button><code id="code-125"><span class="kd">const</span> <span class="nx">myAuthData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">12345678</span><span class="dl">'</span>  <span class="c1">// Required field. Used to uniquely identify the linked account.</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">();</span>
<span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">linkWith</span><span class="p">(</span><span class="dl">'</span><span class="s1">providerName</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">authData</span><span class="p">:</span> <span class="nx">myAuthData</span> <span class="p">});</span>
</code></pre></div></div>

<p>Parse then verifies that the provided <code class="language-plaintext highlighter-rouge">authData</code> is valid and checks to see if a user is already associated with this data.  If so, it returns a status code of <code class="language-plaintext highlighter-rouge">200 OK</code> and the details (including a <code class="language-plaintext highlighter-rouge">sessionToken</code> for the user):</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-126">📋</button><code id="code-126"><span class="nx">Status</span><span class="p">:</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="nx">Location</span><span class="p">:</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//YOUR.PARSE-SERVER.HERE/parse/users/uMz0YZeAqc</span>
</code></pre></div></div>

<p>With a response body like:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-127">📋</button><code id="code-127"><span class="p">{</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Parse"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-01-01T12:23:45.678Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-01-01T12:23:45.678Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uMz0YZeAqc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"r:samplei3l83eerhnln0ecxgy5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"authData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"providerName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>If the user has never been linked with this account, you will instead receive a status code of <code class="language-plaintext highlighter-rouge">201 Created</code>, indicating that a new user was created:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-128">📋</button><code id="code-128"><span class="nx">Status</span><span class="p">:</span> <span class="mi">201</span> <span class="nx">Created</span>
<span class="nx">Location</span><span class="p">:</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//YOUR.PARSE-SERVER.HERE/parse/users/uMz0YZeAqc</span>
</code></pre></div></div>
<p>The body of the response will contain the <code class="language-plaintext highlighter-rouge">objectId</code>, <code class="language-plaintext highlighter-rouge">createdAt</code>, <code class="language-plaintext highlighter-rouge">sessionToken</code>, and an automatically-generated unique <code class="language-plaintext highlighter-rouge">username</code>.  For example:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-129">📋</button><code id="code-129"><span class="p">{</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iwz8sna7sug28v4eyu7t89fij"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-01-01T12:23:45.678Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uMz0YZeAqc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"r:samplei3l83eerhnln0ecxgy5"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="linking-un-authenticated-users"><a class="anchorjs-link " href="/js/guide/#linking-un-authenticated-users" aria-label="Anchor link for: linking un authenticated users" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Linking un-authenticated users</h4>
<p>To create a link to an un-authenticated user (for example in cloud code), options can be passed to <code class="language-plaintext highlighter-rouge">linkWith()</code> to either use the <code class="language-plaintext highlighter-rouge">masterKey</code> or pass a <code class="language-plaintext highlighter-rouge">sessionToken</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-130">📋</button><code id="code-130"><span class="kd">const</span> <span class="nx">myAuthData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">id</span><span class="p">:</span> <span class="nx">xzx5tt123</span><span class="p">,</span>  <span class="c1">// The id key is required in the authData-object. Otherwise Parse Server will throw the Error 252 'This authentication method is unsupported'.</span>
  <span class="na">access</span><span class="p">:</span> <span class="nx">token</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">).</span><span class="kd">get</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>

<span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">linkWith</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">providerName</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">{</span> <span class="na">authData</span><span class="p">:</span> <span class="nx">myAuthData</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">useMasterKey</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<p>On rest, web, mobile, or TV clients, users can then login using the <code class="language-plaintext highlighter-rouge">CustomAdapter</code> by passing <code class="language-plaintext highlighter-rouge">myAuthData</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-131">📋</button><code id="code-131"><span class="kd">const</span> <span class="nx">loggedIn</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logInWith</span><span class="p">(</span><span class="dl">'</span><span class="s1">CustomAdapter</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">authData</span><span class="p">:</span> <span class="nx">myAuthData</span><span class="p">});</span>

</code></pre></div></div>

<h3 id="custom-authentication-module"><a class="anchorjs-link " href="/js/guide/#custom-authentication-module" aria-label="Anchor link for: custom authentication module" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Custom Authentication Module</h3>

<p>Parse Server supports many <a href="/parse-server/guide/#oauth-and-3rd-party-authentication">3rd Party Authenications</a>.
It is possible to <code class="language-plaintext highlighter-rouge">linkWith</code> any 3rd Party Authentication by creating a custom authentication module. A custom authentication module normally consists of a client-side AuthProvider object and a back-end AuthAdapter. The client-side object should implement the <a href="https://github.com/parse-community/Parse-SDK-JS/blob/master/src/interfaces/AuthProvider.js">AuthProvider interface</a>. The backend AuthAdapter should implement the the functions <code class="language-plaintext highlighter-rouge">validateAuthData</code> and <code class="language-plaintext highlighter-rouge">validateAppId</code>, check out this <a href="https://github.com/parse-community/parse-server/blob/master/src/Adapters/Auth/AuthAdapter.js">AuthAdapter example</a>.
When calling the <code class="language-plaintext highlighter-rouge">linkWith</code> function <strong>without</strong> an <code class="language-plaintext highlighter-rouge">authData</code> object the client side authenticate-method from the provider object will be called. In the other case the <code class="language-plaintext highlighter-rouge">authData</code> object will be sent directly to Parse Server for authentication using the backend module.</p>

<p>Note: The following is a minimal example implementing AuthProvider client-side and AuthAdapter on the backend.</p>

<p>A minimal  <code class="language-plaintext highlighter-rouge">CustomAuth.js</code> module in the backend:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-132">📋</button><code id="code-132"><span class="c1">// Don't require or import parse-server in this module.</span>
<span class="c1">// See this issue: https://github.com/parse-community/parse-server/issues/6467</span>
<span class="kd">function</span> <span class="nx">validateAuthData</span><span class="p">(</span><span class="nx">authData</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">({})</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">validateAppId</span><span class="p">(</span><span class="nx">appIds</span><span class="p">,</span> <span class="nx">authData</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">({});</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">validateAppId</span><span class="p">,</span>
  <span class="nx">validateAuthData</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Configure the server to make the <code class="language-plaintext highlighter-rouge">CustomAuth</code> available:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-133">📋</button><code id="code-133"><span class="kd">const</span> <span class="nx">CustomAuth</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./CustomAuth</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ParseServer</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="na">auth</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">myAuth</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">module</span><span class="p">:</span> <span class="nx">CustomAuth</span><span class="p">,</span>
      <span class="na">option1</span><span class="p">:</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">option2</span><span class="p">:</span> <span class="dl">'</span><span class="s1">world</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="p">...</span>
<span class="p">});</span>
<span class="p">...</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/parse</span><span class="dl">'</span><span class="p">,</span> <span class="nx">api</span><span class="p">);</span>
</code></pre></div></div>

<p>Use the <code class="language-plaintext highlighter-rouge">CustomAuth</code>:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-134">📋</button><code id="code-134"><span class="kd">const</span> <span class="nx">provider</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">authenticate</span><span class="p">:</span> <span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Some code to get retrieve authData</span>
    <span class="c1">// If retrieved valid authData, call success function with the data</span>
    <span class="nx">options</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">1234</span>
    <span class="p">});</span>
    <span class="c1">// You can also handle error</span>
    <span class="c1">// options.error(this, {});</span>
  <span class="p">},</span>
  <span class="nx">restoreAuthentication</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">getAuthType</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="dl">'</span><span class="s1">myAuth</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">getAuthData</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">authData</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">id</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">};</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="c1">// Must register before linking</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">_registerAuthenticationProvider</span><span class="p">(</span><span class="nx">provider</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">();</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">setUsername</span><span class="p">(</span><span class="dl">'</span><span class="s1">Alice</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">setPassword</span><span class="p">(</span><span class="dl">'</span><span class="s1">sekrit</span><span class="dl">'</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">signUp</span><span class="p">();</span>
<span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">linkWith</span><span class="p">(</span><span class="nx">provider</span><span class="p">.</span><span class="nx">getAuthType</span><span class="p">(),</span> <span class="nx">provider</span><span class="p">.</span><span class="nx">getAuthData</span><span class="p">());</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">_isLinked</span><span class="p">(</span><span class="nx">provider</span><span class="p">);</span> <span class="c1">// true</span>
<span class="c1">// Unlink</span>
<span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">_unlinkFrom</span><span class="p">(</span><span class="nx">provider</span><span class="p">.</span><span class="nx">getAuthType</span><span class="p">());</span>
</code></pre></div></div>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/users.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="common/sessions.md">
    <h1 id="sessions"><a class="anchorjs-link " href="/js/guide/#sessions" aria-label="Anchor link for: sessions" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Sessions</h1>

<p>Sessions represent an instance of a user logged into a device. Sessions are automatically created when users log in or sign up. They are automatically deleted when users log out. There is one distinct <code class="language-plaintext highlighter-rouge">Session</code> object for each user-installation pair; if a user issues a login request from a device they’re already logged into, that user’s previous <code class="language-plaintext highlighter-rouge">Session</code> object for that Installation is automatically deleted. <code class="language-plaintext highlighter-rouge">Session</code> objects are stored on Parse in the Session class, and you can view them on the Parse Dashboard Data Browser. We provide a set of APIs to manage <code class="language-plaintext highlighter-rouge">Session</code> objects in your app.</p>

<p><code class="language-plaintext highlighter-rouge">Session</code> is a subclass of a Parse <code class="language-plaintext highlighter-rouge">Object</code>, so you can query, update, and delete sessions in the same way that you manipulate normal objects on Parse. Because Parse Server automatically creates sessions when you log in or sign up users, you should not manually create <code class="language-plaintext highlighter-rouge">Session</code> objects unless you are building an IoT app (e.g. Arduino or Embedded C). Deleting a <code class="language-plaintext highlighter-rouge">Session</code> will log the user out of the device that is currently using this session’s token.</p>

<p>Unlike other Parse objects, the <code class="language-plaintext highlighter-rouge">Session</code> class does not have Cloud Code triggers. So you cannot register a <code class="language-plaintext highlighter-rouge">beforeSave</code> or <code class="language-plaintext highlighter-rouge">afterSave</code> handler for the Session class.</p>

<h2 id="session-properties"><a class="anchorjs-link " href="/js/guide/#session-properties" aria-label="Anchor link for: session properties" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a><code class="language-plaintext highlighter-rouge">Session</code> Properties</h2>

<p>The <code class="language-plaintext highlighter-rouge">Session</code> object has these special fields:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">sessionToken</code> (readonly): String token for authentication on Parse API requests. In the response of <code class="language-plaintext highlighter-rouge">Session</code> queries, only your current <code class="language-plaintext highlighter-rouge">Session</code> object will contain a session token.</li>
  <li><code class="language-plaintext highlighter-rouge">user</code>: (readonly) Pointer to the <code class="language-plaintext highlighter-rouge">User</code> object that this session is for.</li>
  <li><code class="language-plaintext highlighter-rouge">createdWith</code> (readonly): Information about how this session was created (e.g. <code class="language-plaintext highlighter-rouge">{ "action": "login", "authProvider": "password"}</code>).
    <ul>
      <li><code class="language-plaintext highlighter-rouge">action</code> could have values: <code class="language-plaintext highlighter-rouge">login</code>, <code class="language-plaintext highlighter-rouge">signup</code>, <code class="language-plaintext highlighter-rouge">create</code>, or <code class="language-plaintext highlighter-rouge">upgrade</code>. The <code class="language-plaintext highlighter-rouge">create</code> action is when the developer manually creates the session by saving a <code class="language-plaintext highlighter-rouge">Session</code> object.  The <code class="language-plaintext highlighter-rouge">upgrade</code> action is when the user is upgraded to revocable session from a legacy session token.</li>
      <li><code class="language-plaintext highlighter-rouge">authProvider</code> could have values: <code class="language-plaintext highlighter-rouge">password</code>, <code class="language-plaintext highlighter-rouge">anonymous</code>, <code class="language-plaintext highlighter-rouge">facebook</code>, or <code class="language-plaintext highlighter-rouge">twitter</code>.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">expiresAt</code> (readonly): Approximate UTC date when this <code class="language-plaintext highlighter-rouge">Session</code> object will be automatically deleted. You can configure session expiration settings (either 1-year inactivity expiration or no expiration) in your app’s Parse Dashboard settings page.</li>
  <li><code class="language-plaintext highlighter-rouge">installationId</code> (can be set only once): String referring to the <code class="language-plaintext highlighter-rouge">Installation</code> where the session is logged in from. For Parse SDKs, this field will be automatically set when users log in or sign up.
All special fields except <code class="language-plaintext highlighter-rouge">installationId</code> can only be set automatically by Parse Server. You can add custom fields onto <code class="language-plaintext highlighter-rouge">Session</code> objects, but please keep in mind that any logged-in device (with session token) can read other sessions that belong to the same user (unless you disable Class-Level Permissions, see below).</li>
</ul>

<h2 id="handling-invalid-session-token-error"><a class="anchorjs-link " href="/js/guide/#handling-invalid-session-token-error" aria-label="Anchor link for: handling invalid session token error" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Handling Invalid Session Token Error</h2>

<p>With revocable sessions, your current session token could become invalid if its corresponding <code class="language-plaintext highlighter-rouge">Session</code> object is deleted from your Parse Server. This could happen if you implement a Session Manager UI that lets users log out of other devices, or if you manually delete the session via Cloud Code, REST API, or Data Browser. Sessions could also be deleted due to automatic expiration (if configured in app settings). When a device’s session token no longer corresponds to a <code class="language-plaintext highlighter-rouge">Session</code> object on your Parse Server, all API requests from that device will fail with “Error 209: invalid session token”.</p>

<p>To handle this error, we recommend writing a global utility function that is called by all of your Parse request error callbacks. You can then handle the “invalid session token” error in this global function. You should prompt the user to login again so that they can obtain a new session token. This code could look like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-135">📋</button><code id="code-135"><span class="kd">function</span> <span class="nx">handleParseError</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Error</span><span class="p">.</span><span class="nx">INVALID_SESSION_TOKEN</span><span class="p">:</span>
      <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logOut</span><span class="p">();</span>
      <span class="p">...</span> <span class="c1">// If web browser, render a log in screen</span>
      <span class="p">...</span> <span class="c1">// If Express.js, redirect the user to the log in route</span>
      <span class="k">break</span><span class="p">;</span>

    <span class="p">...</span> <span class="c1">// Other Parse API errors that you want to explicitly handle</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// For each API request, call the global error handler</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">handleParseError</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="session--security"><a class="anchorjs-link " href="/js/guide/#session--security" aria-label="Anchor link for: session  security" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a><code class="language-plaintext highlighter-rouge">Session</code>  Security</h2>

<p><code class="language-plaintext highlighter-rouge">Session</code> objects can only be accessed by the user specified in the user field. All <code class="language-plaintext highlighter-rouge">Session</code> objects have an ACL that is read and write by that user only. You cannot change this ACL. This means querying for sessions will only return objects that match the current logged-in user.</p>

<p>When you log in a user via a <code class="language-plaintext highlighter-rouge">User</code> login method, Parse will automatically create a new unrestricted <code class="language-plaintext highlighter-rouge">Session</code> object in your Parse Server. Same for signups and Facebook/Twitter logins.</p>

<p>You can configure Class-Level Permissions (CLPs) for the Session class just like other classes on Parse. CLPs restrict reading/writing of sessions via the <code class="language-plaintext highlighter-rouge">Session</code> API, but do not restrict Parse Server’s automatic session creation/deletion when users log in, sign up, and log out. We recommend that you disable all CLPs not needed by your app. Here are some common use cases for Session CLPs:</p>

<ul>
  <li><strong>Find</strong>, <strong>Delete</strong> — Useful for building a UI screen that allows users to see their active session on all devices, and log out of sessions on other devices. If your app does not have this feature, you should disable these permissions.</li>
  <li><strong>Create</strong> — Useful for apps that provision user sessions for other devices from the phone app. You should disable this permission when building apps for mobile and web. For IoT apps, you should check whether your IoT device actually needs to access user-specific data. If not, then your IoT device does not need a user session, and you should disable this permission.</li>
  <li><strong>Get</strong>, <strong>Update</strong>, <strong>Add Field</strong> — Unless you need these operations, you should disable these permissions.</li>
</ul>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/common/sessions.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/roles.md">
    <h1 id="roles"><a class="anchorjs-link " href="/js/guide/#roles" aria-label="Anchor link for: roles" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Roles</h1>

<p>As your app grows in scope and user-base, you may find yourself needing more coarse-grained control over access to pieces of your data than user-linked ACLs can provide. To address this requirement, Parse supports a form of <a href="https://en.wikipedia.org/wiki/Role-based_access_control">Role-based Access Control</a>. Roles provide a logical way of grouping users with common access privileges to your Parse data. Roles are named objects that contain users and other roles.  Any permission granted to a role is implicitly granted to its users as well as to the users of any roles that it contains.</p>

<p>For example, in your application with curated content, you may have a number of users that are considered “Moderators” and can modify and delete content created by other users.  You may also have a set of users that are “Administrators” and are allowed all of the same privileges as Moderators, but can also modify the global settings for the application. By adding users to these roles, you can ensure that new users can be made moderators or administrators, without having to manually grant permission to every resource for each user.</p>

<p>We provide a specialized class called <code class="language-plaintext highlighter-rouge">Parse.Role</code> that represents these role objects in your client code. <code class="language-plaintext highlighter-rouge">Parse.Role</code> is a subclass of <code class="language-plaintext highlighter-rouge">Parse.Object</code>, and has all of the same features, such as a flexible schema, automatic persistence, and a key value interface.  All the methods that are on <code class="language-plaintext highlighter-rouge">Parse.Object</code> also  exist on <code class="language-plaintext highlighter-rouge">Parse.Role</code>.  The difference is that <code class="language-plaintext highlighter-rouge">Parse.Role</code> has some additions specific to management of roles.</p>

<h2 id="parserole-properties"><a class="anchorjs-link " href="/js/guide/#parserole-properties" aria-label="Anchor link for: parserole properties" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a><code class="language-plaintext highlighter-rouge">Parse.Role</code> Properties</h2>

<p><code class="language-plaintext highlighter-rouge">Parse.Role</code> has several properties that set it apart from <code class="language-plaintext highlighter-rouge">Parse.Object</code>:</p>

<ul>
  <li><strong>name</strong>: The name for the role.  This value is required, and can only be set once as a role is being created.  The name must consist of alphanumeric characters, spaces, -, or _.  This name will be used to identify the Role without needing its objectId.</li>
  <li><strong>users</strong>: A <a href="/js/guide/#one-to-one-and-one-to-many-relationships">relation</a> to the set of users that will inherit permissions granted to the containing role.</li>
  <li><strong>roles</strong>: A <a href="/js/guide/#many-to-many-relationships">relation</a> to the set of roles whose users and roles will inherit permissions granted to the containing role.</li>
</ul>

<h2 id="security-for-role-objects"><a class="anchorjs-link " href="/js/guide/#security-for-role-objects" aria-label="Anchor link for: security for role objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Security for Role Objects</h2>

<p>The <code class="language-plaintext highlighter-rouge">Parse.Role</code> uses the same security scheme (ACLs) as all other objects on Parse, except that it requires an ACL to be set explicitly. Generally, only users with greatly elevated privileges (e.g. a master user or Administrator) should be able to create or modify a Role, so you should define its ACLs accordingly.  Remember, if you give write-access to a <code class="language-plaintext highlighter-rouge">Parse.Role</code> to a user, that user can add other users to the role, or even delete the role altogether.</p>

<p>To create a new <code class="language-plaintext highlighter-rouge">Parse.Role</code>, you would write:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-136">📋</button><code id="code-136"><span class="c1">// By specifying no write privileges for the ACL, we can ensure the role cannot be altered.</span>
<span class="kd">const</span> <span class="nx">roleACL</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">();</span>
<span class="nx">roleACL</span><span class="p">.</span><span class="nx">setPublicReadAccess</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">role</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Role</span><span class="p">(</span><span class="dl">"</span><span class="s2">Administrator</span><span class="dl">"</span><span class="p">,</span> <span class="nx">roleACL</span><span class="p">);</span>
<span class="nx">role</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>You can add users and roles that should inherit your new role’s permissions through the “users” and “roles” relations on <code class="language-plaintext highlighter-rouge">Parse.Role</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-137">📋</button><code id="code-137"><span class="kd">const</span> <span class="nx">role</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Role</span><span class="p">(</span><span class="nx">roleName</span><span class="p">,</span> <span class="nx">roleACL</span><span class="p">);</span>
<span class="nx">role</span><span class="p">.</span><span class="nx">getUsers</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">usersToAddToRole</span><span class="p">);</span>
<span class="nx">role</span><span class="p">.</span><span class="nx">getRoles</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">rolesToAddToRole</span><span class="p">);</span>
<span class="nx">role</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>Take great care when assigning ACLs to your roles so that they can only be modified by those who should have permissions to modify them.</p>

<h2 id="role-based-security-for-other-objects"><a class="anchorjs-link " href="/js/guide/#role-based-security-for-other-objects" aria-label="Anchor link for: role based security for other objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Role Based Security for Other Objects</h2>

<p>Now that you have created a set of roles for use in your application, you can use them with ACLs to define the privileges that their users will receive. Each <code class="language-plaintext highlighter-rouge">Parse.Object</code> can specify a <code class="language-plaintext highlighter-rouge">Parse.ACL</code>, which provides an access control list that indicates which users and roles should be granted read or write access to the object.</p>

<p>Giving a role read or write permission to an object is straightforward.  You can either use the <code class="language-plaintext highlighter-rouge">Parse.Role</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-138">📋</button><code id="code-138"><span class="kd">const</span> <span class="nx">moderators</span> <span class="o">=</span> <span class="cm">/* Query for some Parse.Role */</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">wallPost</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="dl">"</span><span class="s2">WallPost</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">postACL</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">();</span>
<span class="nx">postACL</span><span class="p">.</span><span class="nx">setRoleWriteAccess</span><span class="p">(</span><span class="nx">moderators</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">wallPost</span><span class="p">.</span><span class="nx">setACL</span><span class="p">(</span><span class="nx">postACL</span><span class="p">);</span>
<span class="nx">wallPost</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>You can avoid querying for a role by specifying its name for the ACL:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-139">📋</button><code id="code-139"><span class="kd">const</span> <span class="nx">wallPost</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="dl">"</span><span class="s2">WallPost</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">postACL</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">();</span>
<span class="nx">postACL</span><span class="p">.</span><span class="nx">setRoleWriteAccess</span><span class="p">(</span><span class="dl">"</span><span class="s2">Moderators</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">wallPost</span><span class="p">.</span><span class="nx">setACL</span><span class="p">(</span><span class="nx">postACL</span><span class="p">);</span>
<span class="nx">wallPost</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="role-hierarchy"><a class="anchorjs-link " href="/js/guide/#role-hierarchy" aria-label="Anchor link for: role hierarchy" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Role Hierarchy</h2>

<p>As described above, one role can contain another, establishing a parent-child relationship between the two roles. The consequence of this relationship is that any permission granted to the parent role is implicitly granted to all of its child roles.</p>

<p>These types of relationships are commonly found in applications with user-managed content, such as forums. Some small subset of users are “Administrators”, with the highest level of access to tweaking the application’s settings, creating new forums, setting global messages, and so on. Another set of users are “Moderators”, who are responsible for ensuring that the content created by users remains appropriate. Any user with Administrator privileges should also be granted the permissions of any Moderator. To establish this relationship, you would make your “Administrators” role a child role of “Moderators”, like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-140">📋</button><code id="code-140"><span class="kd">const</span> <span class="nx">administrators</span> <span class="o">=</span> <span class="cm">/* Your "Administrators" role */</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">moderators</span> <span class="o">=</span> <span class="cm">/* Your "Moderators" role */</span><span class="p">;</span>
<span class="nx">moderators</span><span class="p">.</span><span class="nx">getRoles</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">administrators</span><span class="p">);</span>
<span class="nx">moderators</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/roles.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/files.md">
    <h1 id="files"><a class="anchorjs-link " href="/js/guide/#files" aria-label="Anchor link for: files" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Files</h1>

<h2 id="creating-a-parsefile"><a class="anchorjs-link " href="/js/guide/#creating-a-parsefile" aria-label="Anchor link for: creating a parsefile" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Creating a Parse.File</h2>

<p><code class="language-plaintext highlighter-rouge">Parse.File</code> lets you store application files in the cloud that would otherwise be too large or cumbersome to fit into a regular <code class="language-plaintext highlighter-rouge">Parse.Object</code>. The most common use case is storing images, but you can also use it for documents, videos, music, and any other binary data.</p>

<p>Getting started with <code class="language-plaintext highlighter-rouge">Parse.File</code> is easy. There are a couple of ways to create a file. The first is with a base64-encoded String.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-141">📋</button><code id="code-141"><span class="kd">const</span> <span class="nx">base64</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">V29ya2luZyBhdCBQYXJzZSBpcyBncmVhdCE=</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">File</span><span class="p">(</span><span class="dl">"</span><span class="s2">myfile.txt</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">base64</span><span class="p">:</span> <span class="nx">base64</span> <span class="p">});</span>
</code></pre></div></div>

<p>Alternatively, you can create a file from an array of byte values:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-142">📋</button><code id="code-142"><span class="kd">const</span> <span class="nx">bytes</span> <span class="o">=</span> <span class="p">[</span> <span class="mh">0xBE</span><span class="p">,</span> <span class="mh">0xEF</span><span class="p">,</span> <span class="mh">0xCA</span><span class="p">,</span> <span class="mh">0xFE</span> <span class="p">];</span>
<span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">File</span><span class="p">(</span><span class="dl">"</span><span class="s2">myfile.txt</span><span class="dl">"</span><span class="p">,</span> <span class="nx">bytes</span><span class="p">);</span>
</code></pre></div></div>

<p>Parse will auto-detect the type of file you are uploading based on the file extension, but you can specify the <code class="language-plaintext highlighter-rouge">Content-Type</code> with a third parameter:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-143">📋</button><code id="code-143"><span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">File</span><span class="p">(</span><span class="dl">"</span><span class="s2">myfile.zzz</span><span class="dl">"</span><span class="p">,</span> <span class="nx">fileData</span><span class="p">,</span> <span class="dl">"</span><span class="s2">image/png</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="client-side"><a class="anchorjs-link " href="/js/guide/#client-side" aria-label="Anchor link for: client side" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Client Side</h3>
<p>In a browser, you’ll want to use an html form with a file upload control. To do this, create a file input tag which allows the user to pick a file from their local drive to upload:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-144">📋</button><code id="code-144"><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">id=</span><span class="s">"profilePhotoFileUpload"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>Then, in a click handler or other function, get a reference to that file:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-145">📋</button><code id="code-145"><span class="kd">const</span> <span class="nx">fileUploadControl</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">#profilePhotoFileUpload</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">fileUploadControl</span><span class="p">.</span><span class="nx">files</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">fileUploadControl</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="kd">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">photo.jpg</span><span class="dl">"</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">parseFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">File</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">file</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Notice in this example that we give the file a name of <code class="language-plaintext highlighter-rouge">photo.jpg</code>. There’s two things to note here:</p>

<ul>
  <li>You don’t need to worry about filename collisions. Each upload gets a unique identifier so there’s no problem with uploading multiple files named <code class="language-plaintext highlighter-rouge">photo.jpg</code>.</li>
  <li>It’s important that you give a name to the file that has a file extension. This lets Parse figure out the file type and handle it accordingly. So, if you’re storing PNG images, make sure your filename ends with <code class="language-plaintext highlighter-rouge">.png</code>.</li>
</ul>

<p>Next you’ll want to save the file up to the cloud. As with <code class="language-plaintext highlighter-rouge">Parse.Object</code>, there are many variants of the <code class="language-plaintext highlighter-rouge">save</code> method you can use depending on what sort of callback and error handling suits you.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-146">📋</button><code id="code-146"><span class="nx">parseFile</span><span class="p">.</span><span class="nx">save</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// The file has been saved to Parse.</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// The file either could not be read, or could not be saved to Parse.</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="server-side"><a class="anchorjs-link " href="/js/guide/#server-side" aria-label="Anchor link for: server side" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Server Side</h3>
<p>In Cloud Code you can fetch images or other files and store them as a <code class="language-plaintext highlighter-rouge">Parse.File</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-147">📋</button><code id="code-147"><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request-promise</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">Parse</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">parse/node</span><span class="dl">'</span><span class="p">);</span>

<span class="p">....</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">uri</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://bit.ly/2zD8fgm</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">resolveWithFullResponse</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">encoding</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// &lt;-- this is important for binary data like images.</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="dl">'</span><span class="s1">binary</span><span class="dl">'</span><span class="p">));</span>
    <span class="kd">const</span> <span class="nx">contentType</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">];</span>
    <span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">File</span><span class="p">(</span><span class="dl">'</span><span class="s1">logo</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">contentType</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">file</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">file</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">url</span><span class="p">())))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="embedding-files-in-other-objects"><a class="anchorjs-link " href="/js/guide/#embedding-files-in-other-objects" aria-label="Anchor link for: embedding files in other objects" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Embedding files in other objects</h3>
<p>Finally, after the save completes, you can associate a <code class="language-plaintext highlighter-rouge">Parse.File</code> with a <code class="language-plaintext highlighter-rouge">Parse.Object</code> just like any other piece of data:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-148">📋</button><code id="code-148"><span class="kd">const</span> <span class="nx">jobApplication</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="dl">"</span><span class="s2">JobApplication</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">jobApplication</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">applicantName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Joe Smith</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">jobApplication</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">applicantResumeFile</span><span class="dl">"</span><span class="p">,</span> <span class="nx">parseFile</span><span class="p">);</span>
<span class="nx">jobApplication</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="retrieving-file-contents"><a class="anchorjs-link " href="/js/guide/#retrieving-file-contents" aria-label="Anchor link for: retrieving file contents" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Retrieving File Contents</h2>

<p>How to best retrieve the file contents back depends on the context of your application. Because of cross-domain request issues, it’s best if you can make the browser do the work for you. Typically, that means rendering the file’s URL into the DOM. Here we render an uploaded profile photo on a page with jQuery:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-149">📋</button><code id="code-149"><span class="kd">const</span> <span class="nx">profilePhoto</span> <span class="o">=</span> <span class="nx">profile</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">photoFile</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">profileImg</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">profilePhoto</span><span class="p">.</span><span class="nx">url</span><span class="p">();</span>
</code></pre></div></div>

<p>If you want to process a File’s data in Cloud Code, you can retrieve the file using our http networking libraries:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-150">📋</button><code id="code-150"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">httpRequest</span><span class="p">({</span> <span class="na">url</span><span class="p">:</span> <span class="nx">profilePhoto</span><span class="p">.</span><span class="nx">url</span><span class="p">()</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// The file contents are in response.buffer.</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="deleting-files"><a class="anchorjs-link " href="/js/guide/#deleting-files" aria-label="Anchor link for: deleting files" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Deleting Files</h2>

<p>You can delete files that are referenced by objects using the <code class="language-plaintext highlighter-rouge">destroy</code> method. The master key is required to delete a file.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-151">📋</button><code id="code-151"><span class="kd">const</span> <span class="nx">profilePhoto</span> <span class="o">=</span> <span class="nx">profile</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">photoFile</span><span class="dl">"</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">profilePhoto</span><span class="p">.</span><span class="nx">destroy</span><span class="p">({</span> <span class="na">useMasterKey</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
</code></pre></div></div>

<h4 id="parse-server-420"><a class="anchorjs-link " href="/js/guide/#parse-server-420" aria-label="Anchor link for: parse server 420" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Parse Server &lt;4.2.0</h4>

<p>Use the <a href="/rest/guide/#deleting-files">REST API</a> to delete a file.</p>

<h2 id="adding-metadata-and-tags"><a class="anchorjs-link " href="/js/guide/#adding-metadata-and-tags" aria-label="Anchor link for: adding metadata and tags" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Adding Metadata and Tags</h2>

<p>Adding Metadata and Tags to your files allows you to add additional bits of data to the files that are stored within your storage solution (i.e AWS S3).</p>

<p>Note: not all storage adapters support metadata and tags. Check the documentation for the storage adapter you’re using for compatibility.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-152">📋</button><code id="code-152"><span class="c1">// Init with metadata and tags</span>
<span class="kd">const</span> <span class="nx">metadata</span> <span class="o">=</span> <span class="p">{</span> <span class="na">createdById</span><span class="p">:</span> <span class="dl">'</span><span class="s1">some-user-id</span><span class="dl">'</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">tags</span> <span class="o">=</span> <span class="p">{</span> <span class="na">groupId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">some-group-id</span><span class="dl">'</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">File</span><span class="p">(</span><span class="dl">'</span><span class="s1">myfile.zzz</span><span class="dl">'</span><span class="p">,</span> <span class="nx">fileData</span><span class="p">,</span> <span class="dl">'</span><span class="s1">image/png</span><span class="dl">'</span><span class="p">,</span> <span class="nx">metadata</span><span class="p">,</span> <span class="nx">tags</span><span class="p">);</span>

<span class="c1">// Add metadata and tags</span>
<span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">File</span><span class="p">(</span><span class="dl">'</span><span class="s1">myfile.zzz</span><span class="dl">'</span><span class="p">,</span> <span class="nx">fileData</span><span class="p">,</span> <span class="dl">'</span><span class="s1">image/png</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">file</span><span class="p">.</span><span class="nx">addMetadata</span><span class="p">(</span><span class="dl">'</span><span class="s1">createdById</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">some-user-id</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">file</span><span class="p">.</span><span class="nx">addTag</span><span class="p">(</span><span class="dl">'</span><span class="s1">groupId</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">some-group-id</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/files.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/promises.md">
    <h1 id="promises"><a class="anchorjs-link " href="/js/guide/#promises" aria-label="Anchor link for: promises" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Promises</h1>

<p>In addition to callbacks, every asynchronous method in the Parse JavaScript SDK returns a <code class="language-plaintext highlighter-rouge">Promise</code>. With promises, your code can be much cleaner than the nested code you get with callbacks.</p>

<h2 id="introduction-to-promises"><a class="anchorjs-link " href="/js/guide/#introduction-to-promises" aria-label="Anchor link for: introduction to promises" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Introduction to Promises</h2>

<p>Promises represent the next great paradigm in JavaScript programming. But understanding why they are so great is no simple matter. At its core, a <code class="language-plaintext highlighter-rouge">Promise</code> represents the result of a task, which may or may not have completed. The only interface requirement of a <code class="language-plaintext highlighter-rouge">Promise</code> is having a function called <code class="language-plaintext highlighter-rouge">then</code>, which can be given callbacks to be called when the promise is fulfilled or has failed. This is outlined in the <a href="http://wiki.commonjs.org/wiki/Promises/A">CommonJS Promises/A proposal</a>. For example, consider saving a <code class="language-plaintext highlighter-rouge">Parse.Object</code>, which is an asynchronous operation. In the old callback paradigm, your code would look like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-153">📋</button><code id="code-153"><span class="nx">object</span><span class="p">.</span><span class="nx">save</span><span class="p">({</span> <span class="na">key</span><span class="p">:</span> <span class="nx">value</span> <span class="p">},</span> <span class="p">{</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// the object was saved.</span>
  <span class="p">},</span>
  <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// saving the object failed.</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>In the new Promise paradigm, that same code would look like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-154">📋</button><code id="code-154"><span class="nx">object</span><span class="p">.</span><span class="nx">save</span><span class="p">({</span> <span class="na">key</span><span class="p">:</span> <span class="nx">value</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// the object was saved.</span>
  <span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// saving the object failed.</span>
  <span class="p">});</span>
</code></pre></div></div>

<p>Not much different, right? So what’s the big deal? Well, the real power of promises comes from chaining multiple of them together. Calling <code class="language-plaintext highlighter-rouge">promise.then(func)</code> returns a new promise, which is not fulfilled until <code class="language-plaintext highlighter-rouge">func</code> has completed. But there’s one really special thing about the way <code class="language-plaintext highlighter-rouge">func</code> is used. If a <strong>callback supplied to <code class="language-plaintext highlighter-rouge">then</code> returns a new promise, then the promise returned by <code class="language-plaintext highlighter-rouge">then</code> will not be fulfilled until the promise returned by the callback is fulfilled</strong>. The details of the behavior are explained in the <a href="https://github.com/promises-aplus/promises-spec">Promises/A+</a> proposal. This is a complex topic, but maybe an example would make it clearer.</p>

<p>Imagine you’re writing code to log in, find an object, and then update it. In the old callback paradigm, you’d end up with what we call pyramid code:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-155">📋</button><code id="code-155"><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pass</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span>
      <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">save</span><span class="p">({</span> <span class="na">key</span><span class="p">:</span> <span class="nx">value</span> <span class="p">},</span> <span class="p">{</span>
          <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// the object was saved.</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>That’s getting pretty ridiculous, and that’s without any error handling code even. But because of the way promise chaining works, the code can now be much flatter:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-156">📋</button><code id="code-156"><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pass</span><span class="dl">"</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">save</span><span class="p">({</span> <span class="na">key</span><span class="p">:</span> <span class="nx">value</span> <span class="p">});</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// the object was saved.</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Ah! Much better!</p>

<h2 id="the-then-method"><a class="anchorjs-link " href="/js/guide/#the-then-method" aria-label="Anchor link for: the then method" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>The <code class="language-plaintext highlighter-rouge">then</code> Method</h2>

<p>Every <code class="language-plaintext highlighter-rouge">Promise</code> has a method named <code class="language-plaintext highlighter-rouge">then</code> which takes a pair of callbacks. The first callback is called if the promise is <em>resolved</em>, while the second is called if the promise is <em>rejected</em>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-157">📋</button><code id="code-157"><span class="nx">obj</span><span class="p">.</span><span class="nx">save</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// the object was saved successfully.</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// the save failed.</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="chaining-promises-together"><a class="anchorjs-link " href="/js/guide/#chaining-promises-together" aria-label="Anchor link for: chaining promises together" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Chaining Promises Together</h2>
<p>Promises are a little bit magical, in that they let you chain them without nesting. If a callback for a promise returns a new promise, then the first one will not be resolved until the second one is. This lets you perform multiple actions without incurring the pyramid code you would get with callbacks.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-158">📋</button><code id="code-158"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Student</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">descending</span><span class="p">(</span><span class="dl">"</span><span class="s2">gpa</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">students</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">students</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">valedictorian</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">students</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">save</span><span class="p">();</span>

<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">valedictorian</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>

<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">students</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">students</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">salutatorian</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">students</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">save</span><span class="p">();</span>

<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">salutatorian</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Everything is done!</span>

<span class="p">});</span>
</code></pre></div></div>

<h2 id="error-handling-with-promises"><a class="anchorjs-link " href="/js/guide/#error-handling-with-promises" aria-label="Anchor link for: error handling with promises" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Error Handling With Promises</h2>

<p>The code samples above left out error handling for simplicity, but adding it back reiterates what a mess the old callback code could be:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-159">📋</button><code id="code-159"><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pass</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span>
      <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">save</span><span class="p">({</span> <span class="na">key</span><span class="p">:</span> <span class="nx">value</span> <span class="p">},</span> <span class="p">{</span>
          <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// the object was saved.</span>
          <span class="p">},</span>
          <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// An error occurred.</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">},</span>
      <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// An error occurred.</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="na">error</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// An error occurred.</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Because promises know whether they’ve been fulfilled or failed, they can propagate errors, not calling any callback until an error handler is encountered. For example, the code above could be written simply as:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-160">📋</button><code id="code-160"><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">logIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pass</span><span class="dl">"</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">save</span><span class="p">({</span> <span class="na">key</span><span class="p">:</span> <span class="nx">value</span> <span class="p">});</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// the object was saved.</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// there was some error.</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Generally, developers consider a failing promise to be the asynchronous equivalent to throwing an exception. In fact, if a callback passed to <code class="language-plaintext highlighter-rouge">then</code> throws an error, the promise returned will fail with that error. If any Promise in a chain returns an error, all of the success callbacks after it will be skipped until an error callback is encountered. The error callback can transform the error, or it can handle it by returning a new Promise that isn’t rejected. You can think of rejected promises kind of like throwing an exception. An error callback is like a catch block that can handle the error or rethrow it.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-161">📋</button><code id="code-161"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Student</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">descending</span><span class="p">(</span><span class="dl">"</span><span class="s2">gpa</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">students</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">students</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">valedictorian</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="c1">// Force this callback to fail.</span>
  <span class="k">return</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Promise</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">There was an error.</span><span class="dl">"</span><span class="p">);</span>

<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">valedictorian</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Now this will be skipped.</span>
  <span class="k">return</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>

<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">students</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// This will also be skipped.</span>
  <span class="nx">students</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">salutatorian</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">students</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">save</span><span class="p">();</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// This error handler WILL be called. error will be "There was an error.".</span>
  <span class="c1">// Let's handle the error by returning a new promise.</span>
  <span class="k">return</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Promise</span><span class="p">.</span><span class="k">as</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hello!</span><span class="dl">"</span><span class="p">);</span>

<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">hello</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Everything is done!</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// This isn't called because the error was already handled.</span>
<span class="p">});</span>
</code></pre></div></div>

<p>It’s often convenient to have a long chain of success callbacks with only one error handler at the end.</p>

<h2 id="promises-in-series"><a class="anchorjs-link " href="/js/guide/#promises-in-series" aria-label="Anchor link for: promises in series" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Promises in Series</h2>

<p>Promises are convenient when you want to do a series of tasks in a row, each one waiting for the previous to finish. For example, imagine you want to delete all of the comments on your blog.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-162">📋</button><code id="code-162"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Comments</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">post</span><span class="dl">"</span><span class="p">,</span> <span class="nx">post</span><span class="p">);</span>

<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Create a trivial resolved promise as a base case.</span>
  <span class="kd">let</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
  <span class="nx">results</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span>  <span class="p">{</span>
    <span class="c1">// For each item, extend the promise with a function to delete it.</span>
    <span class="nx">promise</span> <span class="o">=</span> <span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Return a promise that will be resolved when the delete is finished.</span>
      <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="nx">promise</span><span class="p">;</span>

<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Every comment was deleted.</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="promises-in-parallel"><a class="anchorjs-link " href="/js/guide/#promises-in-parallel" aria-label="Anchor link for: promises in parallel" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Promises in Parallel</h2>
<p>You can also use promises to perform several tasks in parallel, using the <code class="language-plaintext highlighter-rouge">when</code> method. You can start multiple operations at once, and use <code class="language-plaintext highlighter-rouge">Parse.Promise.when</code> to create a new promise that will be resolved when all of its input promises is resolved. The new promise will be successful if none of the passed-in promises fail; otherwise, it will fail with the last error. Performing operations in parallel will be faster than doing them serially, but may consume more system resources and bandwidth.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-163">📋</button><code id="code-163"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Comments</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">post</span><span class="dl">"</span><span class="p">,</span> <span class="nx">post</span><span class="p">);</span>

<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Collect one promise for each delete into an array.</span>
  <span class="kd">const</span> <span class="nx">promises</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">const</span> <span class="nx">promises</span> <span class="o">=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span><span class="err">&nbsp;</span><span class="p">{</span>
    <span class="c1">// Start this delete immediately and add its promise to the list.</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="c1">// Return a new promise that is resolved when all of the deletes are finished.</span>
  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">promises</span><span class="p">);</span>

<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Every comment was deleted.</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="creating-async-methods"><a class="anchorjs-link " href="/js/guide/#creating-async-methods" aria-label="Anchor link for: creating async methods" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Creating Async Methods</h2>
<p>With these tools, it’s easy to make your own asynchronous functions that return promises. For example, you can make a promisified version of <code class="language-plaintext highlighter-rouge">setTimeout</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-164">📋</button><code id="code-164"><span class="kd">const</span> <span class="nx">delay</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">millis</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="o">=&gt;</span><span class="err">&nbsp;</span><span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">millis</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="nx">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// This ran after 100ms!</span>
<span class="p">});</span>
</code></pre></div></div>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/promises.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/geopoints.md">
    <h1 id="geopoints"><a class="anchorjs-link " href="/js/guide/#geopoints" aria-label="Anchor link for: geopoints" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>GeoPoints</h1>

<p>Parse allows you to associate real-world latitude and longitude coordinates with an object.  Adding a <code class="language-plaintext highlighter-rouge">Parse.GeoPoint</code> to a <code class="language-plaintext highlighter-rouge">Parse.Object</code> allows queries to take into account the proximity of an object to a reference point.  This allows you to easily do things like find out what user is closest to another user or which places are closest to a user.</p>

<h2 id="parsegeopoint"><a class="anchorjs-link " href="/js/guide/#parsegeopoint" aria-label="Anchor link for: parsegeopoint" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Parse.GeoPoint</h2>

<p>To associate a point with an object you first need to create a <code class="language-plaintext highlighter-rouge">Parse.GeoPoint</code>.  For example, to create a point with latitude of 40.0 degrees and -30.0 degrees longitude:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-165">📋</button><code id="code-165"><span class="kd">const</span> <span class="nx">point</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">GeoPoint</span><span class="p">({</span><span class="na">latitude</span><span class="p">:</span> <span class="mf">40.0</span><span class="p">,</span> <span class="na">longitude</span><span class="p">:</span> <span class="o">-</span><span class="mf">30.0</span><span class="p">});</span>
</code></pre></div></div>

<p>This point is then stored in the object as a regular field.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-166">📋</button><code id="code-166"><span class="nx">placeObject</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="p">,</span> <span class="nx">point</span><span class="p">);</span>
</code></pre></div></div>

<p>Note: Currently only one key in a class may be a <code class="language-plaintext highlighter-rouge">Parse.GeoPoint</code>.</p>

<h2 id="geo-queries"><a class="anchorjs-link " href="/js/guide/#geo-queries" aria-label="Anchor link for: geo queries" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Geo Queries</h2>

<p>Now that you have a bunch of objects with spatial coordinates, it would be nice to find out which objects are closest to a point.  This can be done by adding another restriction to <code class="language-plaintext highlighter-rouge">Parse.Query</code> using <code class="language-plaintext highlighter-rouge">near</code>.  Getting a list of ten places that are closest to a user may look something like:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-167">📋</button><code id="code-167"><span class="c1">// User's location</span>
<span class="kd">const</span> <span class="nx">userGeoPoint</span> <span class="o">=</span> <span class="nx">userObject</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// Create a query for places</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">PlaceObject</span><span class="p">);</span>
<span class="c1">// Interested in locations near user.</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">near</span><span class="p">(</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="p">,</span> <span class="nx">userGeoPoint</span><span class="p">);</span>
<span class="c1">// Limit what could be a lot of points.</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="c1">// Final list of objects</span>
<span class="kd">const</span> <span class="nx">placesObjects</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>At this point <code class="language-plaintext highlighter-rouge">placesObjects</code> will be an array of objects ordered by distance (nearest to farthest) from <code class="language-plaintext highlighter-rouge">userGeoPoint</code>. Note that if an additional <code class="language-plaintext highlighter-rouge">ascending()</code>/<code class="language-plaintext highlighter-rouge">descending()</code> order-by constraint is applied, it will take precedence over the distance ordering.</p>

<p>To limit the results using distance, check out <code class="language-plaintext highlighter-rouge">withinMiles</code>, <code class="language-plaintext highlighter-rouge">withinKilometers</code>, and <code class="language-plaintext highlighter-rouge">withinRadians</code>. Use the <code class="language-plaintext highlighter-rouge">sorted</code> parameter to sort the results by distance ascending.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-168">📋</button><code id="code-168"><span class="kd">const</span> <span class="nx">location</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">GeoPoint</span><span class="p">(</span><span class="mf">37.708813</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.526398</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">distance</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">sorted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">PizzaPlaceObject</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">withinKilometers</span><span class="p">(</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="p">,</span> <span class="nx">location</span><span class="p">,</span> <span class="nx">distance</span><span class="p">,</span> <span class="nx">sorted</span><span class="p">);</span>
<span class="c1">// Pizza places within 5km sorted by distance</span>
<span class="kd">const</span> <span class="nx">pizzaPlacesInSF</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>If you add an additional sorting constraint set the <code class="language-plaintext highlighter-rouge">sorting</code> parameter to <code class="language-plaintext highlighter-rouge">false</code> for better query performance.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-169">📋</button><code id="code-169"><span class="kd">const</span> <span class="nx">location</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">GeoPoint</span><span class="p">(</span><span class="mf">37.708813</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.526398</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">distance</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">sorted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">PizzaPlaceObject</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">withinKilometers</span><span class="p">(</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="p">,</span> <span class="nx">location</span><span class="p">,</span> <span class="nx">distance</span><span class="p">,</span> <span class="nx">sorted</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">descending</span><span class="p">(</span><span class="dl">"</span><span class="s2">rating</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// Pizza places within 5km sorted by rating</span>
<span class="kd">const</span> <span class="nx">pizzaPlacesInSF</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>It’s also possible to query for the set of objects that are contained within a particular area.  To find the objects in a rectangular bounding box, add the <code class="language-plaintext highlighter-rouge">withinGeoBox</code> restriction to your <code class="language-plaintext highlighter-rouge">Parse.Query</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-170">📋</button><code id="code-170"><span class="kd">const</span> <span class="nx">southwestOfSF</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">GeoPoint</span><span class="p">(</span><span class="mf">37.708813</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.526398</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">northeastOfSF</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">GeoPoint</span><span class="p">(</span><span class="mf">37.822802</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.373962</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">PizzaPlaceObject</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">withinGeoBox</span><span class="p">(</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="p">,</span> <span class="nx">southwestOfSF</span><span class="p">,</span> <span class="nx">northeastOfSF</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">pizzaPlacesInSF</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>You can query for whether an object lies within or on a polygon of <code class="language-plaintext highlighter-rouge">Parse.GeoPoint</code> (minimum 3 points):</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-171">📋</button><code id="code-171"><span class="nx">query</span><span class="p">.</span><span class="nx">withinPolygon</span><span class="p">(</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="nx">geoPoint1</span><span class="p">,</span> <span class="nx">geoPoint2</span><span class="p">,</span> <span class="nx">geoPoint3</span><span class="p">]);</span>
<span class="kd">const</span> <span class="nx">robjectsWithGeoPointInPolygon</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>You can also query for whether an object <code class="language-plaintext highlighter-rouge">Parse.Polygon</code> contains a <code class="language-plaintext highlighter-rouge">Parse.GeoPoint</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-172">📋</button><code id="code-172"><span class="kd">const</span> <span class="nx">p1</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]];</span>
<span class="kd">const</span> <span class="nx">p2</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]];</span>
<span class="kd">const</span> <span class="nx">p3</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">15</span><span class="p">],</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">15</span><span class="p">],</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">]];</span>

<span class="kd">const</span> <span class="nx">polygon1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Polygon</span><span class="p">(</span><span class="nx">p1</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">polygon2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Polygon</span><span class="p">(</span><span class="nx">p2</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">polygon3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Polygon</span><span class="p">(</span><span class="nx">p3</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">point</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">GeoPoint</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">TestObject</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">polygonContains</span><span class="p">(</span><span class="dl">'</span><span class="s1">polygon</span><span class="dl">'</span><span class="p">,</span> <span class="nx">point</span><span class="p">);</span>
<span class="c1">// objects contains polygon1 and polygon2</span>
<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>To efficiently find if a <code class="language-plaintext highlighter-rouge">Parse.Polygon</code> contains a <code class="language-plaintext highlighter-rouge">Parse.GeoPoint</code> without querying use <code class="language-plaintext highlighter-rouge">containsPoint</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-173">📋</button><code id="code-173"><span class="kd">const</span> <span class="nx">points</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]];</span>
<span class="kd">const</span> <span class="nx">inside</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">GeoPoint</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">outside</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">GeoPoint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">polygon</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Polygon</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
<span class="c1">// Returns True</span>
<span class="nx">polygon</span><span class="p">.</span><span class="nx">containsPoint</span><span class="p">(</span><span class="nx">inside</span><span class="p">);</span>
<span class="c1">// Returns False</span>
<span class="nx">polygon</span><span class="p">.</span><span class="nx">containsPoint</span><span class="p">(</span><span class="nx">outside</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="caveats"><a class="anchorjs-link " href="/js/guide/#caveats" aria-label="Anchor link for: caveats" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Caveats</h2>

<p>At the moment there are a couple of things to watch out for:</p>

<ol>
  <li>Each Parse.Object class may only have one key with a Parse.GeoPoint object.</li>
  <li>Using the <code class="language-plaintext highlighter-rouge">near</code> constraint will also limit results to within 100 miles.</li>
  <li>Using the <code class="language-plaintext highlighter-rouge">near</code> constraint combined with an <code class="language-plaintext highlighter-rouge">ascending</code> or <code class="language-plaintext highlighter-rouge">descending</code> constraint is not recommended due to performance. This is because <code class="language-plaintext highlighter-rouge">$near</code> sorts objects by distance and an additional sort constraint re-orders the matching objects, effectively overriding the sort operation already performed.</li>
  <li>Points should not equal or exceed the extreme ends of the ranges.  Latitude should not be -90.0 or 90.0.  Longitude should not be -180.0 or 180.0.  Attempting to set latitude or longitude out of bounds will cause an error.</li>
</ol>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/geopoints.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/local-datastore.md">
    <h1 id="local-datastore"><a class="anchorjs-link " href="/js/guide/#local-datastore" aria-label="Anchor link for: local datastore" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Local Datastore</h1>

<p>The Parse JS SDK (Version 2.2.0+) provides a local datastore which can be used to store and retrieve <code class="language-plaintext highlighter-rouge">Parse.Object</code>s. To enable this functionality, call <code class="language-plaintext highlighter-rouge">Parse.enableLocalDatastore()</code>.</p>

<p>There are a couple of side effects of enabling the local datastore that you should be aware of. When enabled, there will only be one instance of any given <code class="language-plaintext highlighter-rouge">Parse.Object</code>. For example, imagine you have an instance of the <code class="language-plaintext highlighter-rouge">"GameScore"</code> class with an <code class="language-plaintext highlighter-rouge">objectId</code> of <code class="language-plaintext highlighter-rouge">"xWMyZ4YEGZ"</code>, and then you issue a <code class="language-plaintext highlighter-rouge">Parse.Query</code> for all instances of <code class="language-plaintext highlighter-rouge">"GameScore"</code> with that <code class="language-plaintext highlighter-rouge">objectId</code>. The result will be the same instance of the object you already have in memory.</p>

<p>Also if you don’t want to show the data in the local storage you can use <a href="https://github.com/softvar/secure-ls">secure-ls</a> to Encrypt it.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-174">📋</button><code id="code-174"><span class="k">import</span> <span class="nx">SecureLS</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">secure-ls</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">ls</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SecureLS</span><span class="p">({</span> <span class="na">isCompression</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">enableLocalDatastore</span><span class="p">();</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nx">setLocalDatastoreController</span><span class="p">({</span>
  <span class="na">fromPinWithName</span><span class="p">:</span> <span class="nx">name</span> <span class="o">=&gt;</span> <span class="nx">ls</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">name</span><span class="p">),</span>
  <span class="na">pinWithName</span><span class="p">:</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">objects</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">ls</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">objects</span><span class="p">)),</span>
  <span class="na">unPinWithName</span><span class="p">:</span> <span class="nx">name</span> <span class="o">=&gt;</span> <span class="nx">ls</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">name</span><span class="p">),</span>
  <span class="na">getAllContents</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">ls</span><span class="p">.</span><span class="nx">getAllKeys</span><span class="p">().</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">key</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">ls</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">key</span><span class="p">).</span><span class="nx">data</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">{</span><span class="dl">'</span><span class="p">)</span> <span class="p">?</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">:</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="na">clear</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">ls</span><span class="p">.</span><span class="nx">removeAll</span><span class="p">()</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="pinning"><a class="anchorjs-link " href="/js/guide/#pinning" aria-label="Anchor link for: pinning" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Pinning</h2>

<p>You can store a <code class="language-plaintext highlighter-rouge">Parse.Object</code> in the local datastore by pinning it. Pinning a <code class="language-plaintext highlighter-rouge">Parse.Object</code> is recursive, just like saving, so any objects that are pointed to by the one you are pinning will also be pinned. When an object is pinned, every time you update it by fetching or saving new data, the copy in the local datastore will be updated automatically. You don’t need to worry about it at all.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-175">📋</button><code id="code-175"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">gameScore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameScore</span><span class="p">();</span>

<span class="k">await</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
<span class="k">await</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">pin</span><span class="p">();</span>
</code></pre></div></div>

<p>If you have multiple objects, you can pin them all at once with the <code class="language-plaintext highlighter-rouge">Parse.Object.pinAll()</code> convenience method.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-176">📋</button><code id="code-176"><span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">pinAll</span><span class="p">(</span><span class="nx">listOfObjects</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="retrieving"><a class="anchorjs-link " href="/js/guide/#retrieving" aria-label="Anchor link for: retrieving" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Retrieving</h2>

<p>Storing objects is great, but it’s only useful if you can then get the objects back out later. Retrieving an object from the local datastore works just like retrieving one over the network. The only difference is calling the <code class="language-plaintext highlighter-rouge">fromLocalDatastore</code> method to tell the <code class="language-plaintext highlighter-rouge">Parse.Query</code> where to look for its results.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-177">📋</button><code id="code-177"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">fromLocalDatastore</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">xWMyZ4YE</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="querying-the-local-datastore"><a class="anchorjs-link " href="/js/guide/#querying-the-local-datastore" aria-label="Anchor link for: querying the local datastore" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Querying the Local Datastore</h2>

<p>Often, you’ll want to find a whole list of objects that match certain criteria, instead of getting a single object by id. To do that, you can use a <a href="/js/guide/#queries">Parse.Query</a>. Any <code class="language-plaintext highlighter-rouge">Parse.Query</code> can be used with the local datastore just as with the network. The results will include any object you have pinned that matches the query. Any unsaved changes you have made to the object will be considered when evaluating the query. So you can find a local object that matches, even if it was never returned from the server for this particular query. All query methods are supported except aggregate and distinct queries.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-178">📋</button><code id="code-178"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">playerName</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Joe Bob</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">fromLocalDatastore</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="unpinning"><a class="anchorjs-link " href="/js/guide/#unpinning" aria-label="Anchor link for: unpinning" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Unpinning</h2>

<p>When you are done with an object and no longer need it to be in the local datastore, you can simply unpin it. This will free up disk space and keep your queries on the local datastore running quickly. This will unpin from the default pin.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-179">📋</button><code id="code-179"><span class="k">await</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">unPin</span><span class="p">();</span>
</code></pre></div></div>

<p>There’s also a method to unpin several objects at once.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-180">📋</button><code id="code-180"><span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">unPinAll</span><span class="p">(</span><span class="nx">listOfObjects</span><span class="p">);</span>
</code></pre></div></div>

<p>There’s also a method to remove all objects from default pin</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-181">📋</button><code id="code-181"><span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">unPinAllObjects</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="pinning-with-labels"><a class="anchorjs-link " href="/js/guide/#pinning-with-labels" aria-label="Anchor link for: pinning with labels" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Pinning with Labels</h2>

<p>Labels indicate a group of objects that should be stored together.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-182">📋</button><code id="code-182"><span class="c1">// Add several objects with a label.</span>
<span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">pinAllWithName</span><span class="p">(</span><span class="dl">'</span><span class="s1">MyScores</span><span class="dl">'</span><span class="p">,</span> <span class="nx">listOfObjects</span><span class="p">);</span>

<span class="c1">// Add another object with the same label.</span>
<span class="k">await</span> <span class="nx">anotherGameScore</span><span class="p">.</span><span class="nx">pinWithName</span><span class="p">(</span><span class="dl">'</span><span class="s1">MyScores</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>To unpin all of the objects with the same label at the same time, you can pass a label to the unpin methods. This saves you from having to manually track which objects are in each group.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-183">📋</button><code id="code-183"><span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">unPinAllWithName</span><span class="p">(</span><span class="dl">'</span><span class="s1">MyScores</span><span class="dl">'</span><span class="p">,</span> <span class="nx">listOfObjects</span><span class="p">);</span>
</code></pre></div></div>

<p>There’s also a method to remove all objects from a label.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-184">📋</button><code id="code-184"><span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">unPinAllObjectsWithName</span><span class="p">(</span><span class="dl">'</span><span class="s1">MyScores</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>An Object will be kept in the datastore as long as it is pinned by at least one label. So an object pinned with two labels will stay in the datastore if one of the two labels is unpinned.</p>

<h2 id="caching-query-results"><a class="anchorjs-link " href="/js/guide/#caching-query-results" aria-label="Anchor link for: caching query results" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Caching Query Results</h2>

<p>Pinning with labels makes it easy to cache the results of queries. You can use one label to pin the results of each different query. To get new results from the network, just do a query and update the pinned objects.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-185">📋</button><code id="code-185"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
<span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">unPinAllObjectsWithName</span><span class="p">(</span><span class="dl">'</span><span class="s1">HighScores</span><span class="dl">'</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">pinAllWithName</span><span class="p">(</span><span class="dl">'</span><span class="s1">HighScores</span><span class="dl">'</span><span class="p">,</span> <span class="nx">results</span><span class="p">);</span>
</code></pre></div></div>

<p>When you want to get the cached results for the query, you can then run the same query against the local datastore.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-186">📋</button><code id="code-186"><span class="kd">const</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">fromLocalDatastore</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="dumping-contents"><a class="anchorjs-link " href="/js/guide/#dumping-contents" aria-label="Anchor link for: dumping contents" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Dumping Contents</h2>

<p>For testing purposes, you can use <code class="language-plaintext highlighter-rouge">Parse.dumpLocalDatastore()</code> to view the contents of your local datastore.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-187">📋</button><code id="code-187"><span class="kd">const</span> <span class="nx">LDS</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">dumpLocalDatastore</span><span class="p">();</span>
</code></pre></div></div>

<p>The local datastore is a dictionary of key / values. Each object has a key (className_objectId) and serves as a reference to this object.</p>

<p><code class="language-plaintext highlighter-rouge">pin()</code> will save this reference under the default pin <code class="language-plaintext highlighter-rouge">_default</code>
<code class="language-plaintext highlighter-rouge">pinWithName('YourPinName')</code> will save this reference under <code class="language-plaintext highlighter-rouge">parsePin_YourPinName</code></p>

<p>Unpinning will have the opposite effect.</p>

<h2 id="livequery"><a class="anchorjs-link " href="/js/guide/#livequery" aria-label="Anchor link for: livequery" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>LiveQuery</h2>

<p>If you are subscribed to a LiveQuery Update Event, the updated object will be stored in the LocalDatastore if pinned.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-188">📋</button><code id="code-188"><span class="kd">const</span> <span class="nx">gameScore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameScore</span><span class="p">();</span>
<span class="k">await</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
<span class="k">await</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">pin</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">objectId</span><span class="dl">'</span><span class="p">,</span> <span class="nx">gameScore</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">subscription</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">();</span>
<span class="nx">subscription</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">update</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Since object (gameScore) is pinned, LDS will update automatically</span>
<span class="p">});</span>
</code></pre></div></div>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/local-datastore.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/push-notifications.md">
    <h1 id="push-notifications"><a class="anchorjs-link " href="/js/guide/#push-notifications" aria-label="Anchor link for: push notifications" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Push Notifications</h1>

<p>If you haven’t installed the SDK yet, please <a href="/parse-server/guide/#push-notifications-quick-start">head over to the Push QuickStart</a> to get our SDK up and running.</p>

<h2 id="introduction"><a class="anchorjs-link " href="/js/guide/#introduction" aria-label="Anchor link for: introduction" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Introduction</h2>

<p>Push Notifications are a great way to keep your users engaged and informed about your app. You can reach your entire user base quickly and effectively. This guide will help you through the setup process and the general usage of Parse to send push notifications.</p>

<div class="tip info"><div>
The JavaScript SDK does not currently support receiving pushes. It can only be used to send notifications to iOS and Android applications. A common use case is to send pushes from Cloud Code.
</div></div>

<h2 id="setting-up-push"><a class="anchorjs-link " href="/js/guide/#setting-up-push" aria-label="Anchor link for: setting up push" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Setting Up Push</h2>

<p>There is no setup required to use the JavaScript SDK for sending push notifications. If you haven’t configured your <a href="/ios/guide/#setting-up-push">iOS</a> or <a href="/android/guide/#setting-up-push">Android</a> clients to use Push, take a look at their respective setup instruction using the platform toggle at the top.</p>

<h2 id="installations"><a class="anchorjs-link " href="/js/guide/#installations" aria-label="Anchor link for: installations" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Installations</h2>

<p>Every Parse application installed on a device registered for push notifications has an associated <code class="language-plaintext highlighter-rouge">Installation</code> object. The <code class="language-plaintext highlighter-rouge">Installation</code> object is where you store all the data needed to target push notifications. For example, in a baseball app, you could store the teams a user is interested in to send updates about their performance.</p>

<p>Note that <code class="language-plaintext highlighter-rouge">Installation</code> data can only be modified by the client SDKs, the data browser, or the REST API.</p>

<p>This class has several special fields that help you manage and target devices.</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">badge</code></strong>: The current value of the icon badge for iOS apps. Changes to this value on the server will be used for future badge-increment push notifications.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">channels</code></strong>: An array of the channels to which a device is currently subscribed.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">timeZone</code></strong>: The current time zone where the target device is located. This value is synchronized every time an <code class="language-plaintext highlighter-rouge">Installation</code> object is saved from the device.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">deviceType</code></strong>: The type of device, “ios”, “android”, “winrt”, “winphone”, or “dotnet”<em>(readonly)</em>.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">pushType</code></strong>: This field is reserved for directing Parse to the push delivery network to be used. If the device is registered to receive pushes via FCM, this field will be marked “gcm”. If this device is not using FCM, and is using Parse’s push notification service, it will be blank <em>(readonly)</em>.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">installationId</code></strong>: Universally Unique Identifier (UUID) for the device used by Parse. It must be unique across all of an app’s installations. <em>(readonly)</em>.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">deviceToken</code></strong>: The Apple or Google generated token used to deliver messages to the APNs or FCM push networks respectively.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">channelUris</code></strong>: The Microsoft-generated push URIs for Windows devices.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">appName</code></strong>: The display name of the client application to which this installation belongs.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">appVersion</code></strong>: The version string of the client application to which this installation belongs.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">parseVersion</code></strong>: The version of the Parse SDK which this installation uses.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">appIdentifier</code></strong>: A unique identifier for this installation’s client application. In iOS, this is the Bundle Identifier.</li>
</ul>

<h2 id="sending-pushes"><a class="anchorjs-link " href="/js/guide/#sending-pushes" aria-label="Anchor link for: sending pushes" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Sending Pushes</h2>

<p>There are two ways to send push notifications using Parse: <a href="/js/guide/#using-channels">channels</a> and <a href="/js/guide/#using-advanced-targeting">advanced targeting</a>. Channels offer a simple and easy to use model for sending pushes, while advanced targeting offers a more powerful and flexible model. Both are fully compatible with each other and will be covered in this section.</p>

<p>Sending notifications is often done from the Parse Dashboard push console, the <a href="/js/guide/#sending-pushes">REST API</a> or from <a href="/js/guide/#sending-pushes">Cloud Code</a>. Since the JavaScript SDK is used in Cloud Code, this is the place to start if you want to send pushes from your Cloud Functions. However, if you decide to send notifications from the JavaScript SDK outside of Cloud Code or any of the other client SDKs, you will need to set    <strong>Client Push Enabled</strong> in the Push Notifications settings of your Parse app.</p>

<p>However, be sure you understand that enabling Client Push can lead to a security vulnerability in your app. We recommend that you enable Client Push for testing purposes only, and move your push notification logic into Cloud Code when your app is ready to go into production.</p>

<p><img alt="" data-echo="/assets/images/client_push_settings.png"></p>

<p>You can view your past push notifications on the Parse Dashboard push console for up to 30 days after creating your push.  For pushes scheduled in the future, you can delete the push on the push console as long as no sends have happened yet.</p>

<p>After you send the push, the push console shows push analytics graphs.</p>

<h3 id="using-channels"><a class="anchorjs-link " href="/js/guide/#using-channels" aria-label="Anchor link for: using channels" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Using Channels</h3>

<p>The simplest way to start sending notifications is using channels. This allows you to use a publisher-subscriber model for sending pushes. Devices start by subscribing to one or more channels, and notifications can later be sent to these subscribers. The channels subscribed to by a given <code class="language-plaintext highlighter-rouge">Installation</code> are stored in the <code class="language-plaintext highlighter-rouge">channels</code> field of the <code class="language-plaintext highlighter-rouge">Installation</code> object.</p>

<h4 id="subscribing-to-channels"><a class="anchorjs-link " href="/js/guide/#subscribing-to-channels" aria-label="Anchor link for: subscribing to channels" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Subscribing to Channels</h4>

<p>The JavaScript SDK does not currently support subscribing iOS and Android devices for pushes. Take a look at the <a href="/ios/guide/#using-channels">iOS</a>, <a href="/android/guide/#using-channels">Android</a> or <a href="/rest/guide/#using-channels">REST</a> Push guide using the platform toggle at the top.</p>

<h4 id="sending-pushes-to-channels"><a class="anchorjs-link " href="/js/guide/#sending-pushes-to-channels" aria-label="Anchor link for: sending pushes to channels" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Sending Pushes to Channels</h4>

<p>With the JavaScript SDK, the following code can be used to alert all subscribers of the “Giants” and “Mets” channels about the results of the game. This will display a notification center alert to iOS users and a system tray notification to Android users.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-189">📋</button><code id="code-189"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">channels</span><span class="p">:</span> <span class="p">[</span> <span class="dl">"</span><span class="s2">Giants</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Mets</span><span class="dl">"</span> <span class="p">],</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">The Giants won against the Mets 2-3.</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Push was successful</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle error</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="using-advanced-targeting"><a class="anchorjs-link " href="/js/guide/#using-advanced-targeting" aria-label="Anchor link for: using advanced targeting" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Using Advanced Targeting</h3>

<p>While channels are great for many applications, sometimes you need more precision when targeting the recipients of your pushes. Parse allows you to write a query for any subset of your <code class="language-plaintext highlighter-rouge">Installation</code> objects using the <a href="/js/guide/#queries">querying API</a> and to send them a push.</p>

<p>Since <code class="language-plaintext highlighter-rouge">Installation</code> objects are just like any other object stored in Parse, you can save any data you want and even create relationships between <code class="language-plaintext highlighter-rouge">Installation</code> objects and your other objects. This allows you to send pushes to a very customized and dynamic segment of your user base.</p>

<h4 id="saving-installation-data"><a class="anchorjs-link " href="/js/guide/#saving-installation-data" aria-label="Anchor link for: saving installation data" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Saving Installation Data</h4>

<p>The JavaScript SDK does not currently support modifying <code class="language-plaintext highlighter-rouge">Installation</code> objects. Take a look at the <a href="/ios/guide/#installations">iOS</a>, <a href="/android/guide/#installations">Android</a> or <a href="/rest/guide/#installations">REST</a> Push guide for more on this topic.</p>

<h4 id="sending-pushes-to-queries"><a class="anchorjs-link " href="/js/guide/#sending-pushes-to-queries" aria-label="Anchor link for: sending pushes to queries" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Sending Pushes to Queries</h4>

<p>Once you have your data stored on your <code class="language-plaintext highlighter-rouge">Installation</code> objects, you can use a query to target a subset of these devices. <code class="language-plaintext highlighter-rouge">Parse.Installation</code> queries work just like any other <a href="/js/guide/#queries">Parse query</a>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-190">📋</button><code id="code-190"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">Installation</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">injuryReports</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">where</span><span class="p">:</span> <span class="nx">query</span><span class="p">,</span> <span class="c1">// Set our Installation query</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Willie Hayes injured by own pop fly.</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Push was successful</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle error</span>
<span class="p">});</span>
</code></pre></div></div>

<p>We can even use channels with our query. To send a push to all subscribers of the “Giants” channel but filtered by those who want score update, we can do the following:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-191">📋</button><code id="code-191"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">Installation</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">channels</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Giants</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Set our channel</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">scores</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">where</span><span class="p">:</span> <span class="nx">query</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Giants scored against the A's! It's now 2-2.</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Push was successful</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle error</span>
<span class="p">});</span>
</code></pre></div></div>

<p>If we store relationships to other objects in our <code class="language-plaintext highlighter-rouge">Installation</code> class, we can also use those in our query. For example, we could send a push notification to all users near a given location like this.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-192">📋</button><code id="code-192"><span class="c1">// Find users near a given location</span>
<span class="kd">const</span> <span class="nx">userQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span>
<span class="nx">userQuery</span><span class="p">.</span><span class="nx">withinMiles</span><span class="p">(</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="p">,</span> <span class="nx">stadiumLocation</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>

<span class="c1">// Find devices associated with these users</span>
<span class="kd">const</span> <span class="nx">pushQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">Installation</span><span class="p">);</span>
<span class="nx">pushQuery</span><span class="p">.</span><span class="nx">matchesQuery</span><span class="p">(</span><span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">,</span> <span class="nx">userQuery</span><span class="p">);</span>

<span class="c1">// Send push notification to query</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">where</span><span class="p">:</span> <span class="nx">pushQuery</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Free hotdogs at the Parse concession stand!</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Push was successful</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle error</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="sending-options"><a class="anchorjs-link " href="/js/guide/#sending-options" aria-label="Anchor link for: sending options" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Sending Options</h2>

<p>Push notifications can do more than just send a message. In iOS, pushes can also include the sound to be played, the badge number to display as well as any custom data you wish to send. In Android, it is even possible to specify an <code class="language-plaintext highlighter-rouge">Intent</code> to be fired upon receipt of a notification. An expiration date can also be set for the notification in case it is time sensitive.</p>

<h3 id="customizing-your-notifications"><a class="anchorjs-link " href="/js/guide/#customizing-your-notifications" aria-label="Anchor link for: customizing your notifications" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Customizing your Notifications</h3>

<p>If you want to send more than just a message, you can set other fields in the <code class="language-plaintext highlighter-rouge">data</code> dictionary. There are some reserved fields that have a special meaning.</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">alert</code></strong>: the notification’s message.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">badge</code></strong>: <em>(iOS only)</em> the value indicated in the top right corner of the app icon. This can be set to a value or to <code class="language-plaintext highlighter-rouge">Increment</code> in order to increment the current value by 1.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">sound</code></strong>: <em>(iOS only)</em> the name of a sound file in the application bundle.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">content-available</code></strong>: <em>(iOS only)</em> If you are a writing an app using the Remote Notification Background Mode <a href="https://developer.apple.com/library/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS7.html#//apple_ref/doc/uid/TP40013162-SW10">introduced in iOS7</a> (a.k.a. “Background Push”), set this value to 1 to trigger a background download. You also have to set <code class="language-plaintext highlighter-rouge">push_type</code> starting iOS 13 and watchOS 6.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">push_type</code></strong>: <em>(iOS only)</em> The type of the notification. The value is <code class="language-plaintext highlighter-rouge">alert</code> or <code class="language-plaintext highlighter-rouge">background</code>. Specify <code class="language-plaintext highlighter-rouge">alert</code> when the delivery of your notification displays an alert, plays a sound, or badges your app’s icon. Specify <code class="language-plaintext highlighter-rouge">background</code> for silent notifications that do not interact with the user. Defaults to <code class="language-plaintext highlighter-rouge">alert</code> if no value is set. Required when delivering notifications to devices running iOS 13 and later, or watchOS 6 and later.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">priority</code></strong>: <em>(iOS only)</em> The priority of the notification. Specify 10 to send the notification immediately. Specify 5 to send the notification based on power considerations on the user’s device. (<a href="https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/sending_notification_requests_to_apns">More detailed documentation</a>)</li>
  <li><strong><code class="language-plaintext highlighter-rouge">category</code></strong>: <em>(iOS only)</em> the identifier of the <a href="https://developer.apple.com/reference/usernotifications/unnotificationcategory"><code class="language-plaintext highlighter-rouge">UNNotification​Category</code></a> for this push notification.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">uri</code></strong>: <em>(Android only)</em> an optional field that contains a URI. When the notification is opened, an <code class="language-plaintext highlighter-rouge">Activity</code> associated      with opening the URI is launched.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">title</code></strong>: <em>(Android only)</em> the value displayed in the Android system tray notification.</li>
</ul>

<p>For example, to send a notification that increases the current badge number by 1 and plays a custom sound for iOS devices, and displays a particular title for Android users, you can do the following:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-193">📋</button><code id="code-193"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">channels</span><span class="p">:</span> <span class="p">[</span> <span class="dl">"</span><span class="s2">Mets</span><span class="dl">"</span> <span class="p">],</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">The Mets scored! The game is now tied 1-1.</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">badge</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Increment</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">sound</span><span class="p">:</span> <span class="dl">"</span><span class="s2">cheering.caf</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Mets Score!</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Push was successful</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle error</span>
<span class="p">});</span>
</code></pre></div></div>

<p>It is also possible to specify your own data in this dictionary. As explained in the Receiving Notifications section for <a href="/ios/guide/#receiving-pushes">iOS</a> and <a href="/android/guide/#receiving-pushes">Android</a>, iOS will give you access to this data only when the user opens your app via the notification and Android will provide you this data in the <code class="language-plaintext highlighter-rouge">Intent</code> if one is specified.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-194">📋</button><code id="code-194"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">Installation</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">channels</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Indians</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">injuryReports</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">where</span><span class="p">:</span> <span class="nx">query</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">action</span><span class="p">:</span> <span class="dl">"</span><span class="s2">com.example.UPDATE_STATUS</span><span class="dl">"</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Ricky Vaughn was injured in last night's game!</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Vaughn</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">newsItem</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Man bites dog</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Push was successful</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle error</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="setting-an-expiration-date"><a class="anchorjs-link " href="/js/guide/#setting-an-expiration-date" aria-label="Anchor link for: setting an expiration date" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Setting an Expiration Date</h3>

<p>When a user’s device is turned off or not connected to the internet, push notifications cannot be delivered. If you have a time sensitive notification that is not worth delivering late, you can set an expiration date. This avoids needlessly alerting users of information that may no longer be relevant.</p>

<p>There are two parameters provided by Parse to allow setting an expiration date for your notification. The first is <code class="language-plaintext highlighter-rouge">expiration_time</code> which takes a <code class="language-plaintext highlighter-rouge">Date</code> specifying when Parse should stop trying to send the notification. To expire the notification exactly 1 week from now, you can use the following:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-195">📋</button><code id="code-195"><span class="kd">const</span> <span class="nx">oneWeekAway</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(...);</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">where</span><span class="p">:</span> <span class="nx">everyoneQuery</span><span class="p">,</span>
  <span class="na">expiration_time</span><span class="p">:</span> <span class="nx">oneWeekAway</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Season tickets on sale until next week!</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Push was successful</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle error</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Alternatively, you can use the <code class="language-plaintext highlighter-rouge">expiration_interval</code> parameter to specify a duration of time before your notification expires. This value is relative to the <code class="language-plaintext highlighter-rouge">push_time</code> parameter used to <a href="/js/guide/#scheduling-pushes">schedule notifications</a>. This means that a push notification scheduled to be sent out in 1 day and an expiration interval of 6 days can be received up to a week from now.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-196">📋</button><code id="code-196"><span class="kd">const</span> <span class="nx">oneDayAway</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(...);</span>
<span class="kd">const</span> <span class="nx">sixDaysAwayEpoch</span> <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(...)).</span><span class="nx">getTime</span><span class="p">();</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">push_time</span><span class="p">:</span> <span class="nx">oneDayAway</span><span class="p">,</span>
  <span class="na">expiration_interval</span><span class="p">:</span> <span class="nx">sixDaysAwayEpoch</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Season tickets on sale until next week!</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Push was successful</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle error</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="targeting-by-platform"><a class="anchorjs-link " href="/js/guide/#targeting-by-platform" aria-label="Anchor link for: targeting by platform" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Targeting by Platform</h3>

<p>If you build a cross platform app, it is possible you may only want to target iOS or Android devices. There are two methods provided to filter which of these devices are targeted. Note that both platforms are targeted by default.</p>

<p>The following examples would send a different notification to Android and iOS users.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-197">📋</button><code id="code-197"><span class="c1">// Notification for Android users</span>
<span class="kd">const</span> <span class="nx">queryAndroid</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">Installation</span><span class="p">);</span>
<span class="nx">queryAndroid</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">deviceType</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">android</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">where</span><span class="p">:</span> <span class="nx">queryAndroid</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Your suitcase has been filled with tiny robots!</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Notification for iOS users</span>
<span class="kd">const</span> <span class="nx">queryIOS</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">Installation</span><span class="p">);</span>
<span class="nx">queryIOS</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">deviceType</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ios</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">where</span><span class="p">:</span> <span class="nx">queryIOS</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Your suitcase has been filled with tiny apples!</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Notification for Windows 8 users</span>
<span class="kd">const</span> <span class="nx">queryWindows</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">Installation</span><span class="p">);</span>
<span class="nx">queryWindows</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">deviceType</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">winrt</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">where</span><span class="p">:</span> <span class="nx">queryWindows</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Your suitcase has been filled with tiny glass!</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Notification for Windows Phone 8 users</span>
<span class="kd">const</span> <span class="nx">queryWindowsPhone</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">Installation</span><span class="p">);</span>
<span class="nx">queryWindowsPhone</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">deviceType</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">winphone</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">where</span><span class="p">:</span> <span class="nx">queryWindowsPhone</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Your suitcase is very hip; very metro.</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="scheduling-pushes"><a class="anchorjs-link " href="/js/guide/#scheduling-pushes" aria-label="Anchor link for: scheduling pushes" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Scheduling Pushes</h2>

<p>You can schedule a push in advance by specifying a <code class="language-plaintext highlighter-rouge">push_time</code>. For example, if a user schedules a game reminder for a game tomorrow at noon UTC, you can schedule the push notification by sending:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-198">📋</button><code id="code-198"><span class="kd">const</span> <span class="nx">tomorrowDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(...);</span>

<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">Installation</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">Push</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
  <span class="na">where</span><span class="p">:</span> <span class="nx">query</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">alert</span><span class="p">:</span> <span class="dl">"</span><span class="s2">You previously created a reminder for the game today</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="na">push_time</span><span class="p">:</span> <span class="nx">tomorrowDate</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Push was successful</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Handle error</span>
<span class="p">});</span>
</code></pre></div></div>

<p>If you also specify an <code class="language-plaintext highlighter-rouge">expiration_interval</code>, it will be calculated from the scheduled push time, not from the time the push is submitted. This means a push scheduled to be sent in a week with an expiration interval of a day will expire 8 days after the request is sent.</p>

<p>The scheduled time cannot be in the past, and can be up to two weeks in the future. It can be an ISO 8601 date with a date, time, and timezone, as in the example above, or it can be a numeric value representing a UNIX epoch time in seconds (UTC). To schedule an alert for 08/22/2015 at noon UTC time, you can set the <code class="language-plaintext highlighter-rouge">push_time</code> to either <code class="language-plaintext highlighter-rouge">2015-08-022T12:00:00</code> or <code class="language-plaintext highlighter-rouge">1440226800</code>.</p>

<h2 id="receiving-pushes"><a class="anchorjs-link " href="/js/guide/#receiving-pushes" aria-label="Anchor link for: receiving pushes" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Receiving Pushes</h2>

<p>The JavaScript SDK does not currently support receiving pushes. To learn more about handling received notifications in <a href="/ios/guide/#scheduling-pushes">iOS</a> or <a href="/android/guide/#scheduling-pushes">Android</a>, use the platform toggle at the top.</p>

<h2 id="troubleshooting"><a class="anchorjs-link " href="/js/guide/#troubleshooting" aria-label="Anchor link for: troubleshooting" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Troubleshooting</h2>

<p>For tips on troubleshooting push notifications, check the troubleshooting sections for <a href="/ios/guide/#troubleshooting">iOS</a>, <a href="/android/guide/#troubleshooting">Android</a>, and <a href="/dotnet/guide/#troubleshooting">.NET</a> using the platform toggle at the top.</p>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/push-notifications.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/config.md">
    <h1 id="config"><a class="anchorjs-link " href="/js/guide/#config" aria-label="Anchor link for: config" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Config</h1>

<p><code class="language-plaintext highlighter-rouge">Parse.Config</code> is a great way to configure your applications remotely by storing a single configuration object on Parse. It enables you to add things like feature gating or a simple “Message of the Day”. To start using <code class="language-plaintext highlighter-rouge">Parse.Config</code> you need to add a few key/value pairs (parameters) to your app on the Parse Config Dashboard.</p>

<p>After that you will be able to fetch the <code class="language-plaintext highlighter-rouge">Parse.Config</code> on the client, like in this example:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-199">📋</button><code id="code-199"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Config</span><span class="p">.</span><span class="kd">get</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">winningNumber</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">winningNumber</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Yay! The number is </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">winningNumber</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">!</span><span class="dl">"</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Something went wrong (e.g. request timed out)</span>
<span class="p">});</span>
</code></pre></div></div>
<h2 id="save--update-config"><a class="anchorjs-link " href="/js/guide/#save--update-config" aria-label="Anchor link for: save  update config" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Save &amp; Update Config</h2>

<p><code class="language-plaintext highlighter-rouge">ParseConfig</code> can be managed through the SDK when a <code class="language-plaintext highlighter-rouge">Master Key</code> is provided and <strong>only in a NodeJS environment</strong>. You can save new parameters and if you save already existing parameters they will be automatically updated.
After a successfully <code class="language-plaintext highlighter-rouge">.save()</code> it return the new updated <code class="language-plaintext highlighter-rouge">ParseConfig</code> and <code class="language-plaintext highlighter-rouge">Parse.Config.current()</code> is up to date too.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-200">📋</button><code id="code-200"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Config</span><span class="p">.</span><span class="nx">save</span><span class="p">({</span>
	<span class="na">welcomeMesssage</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Welcome to Parse</span><span class="dl">"</span><span class="p">,</span>
	<span class="na">ageOfParse</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
	<span class="na">tags</span> <span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">parse</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">sdk</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">js</span><span class="dl">"</span><span class="p">]</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Cool! Config was saved and fetched from the server.</span><span class="dl">"</span><span class="p">);</span>
  
  <span class="kd">const</span> <span class="nx">welcomeMessage</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">welcomeMessage</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Welcome Message = </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">welcomeMessage</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Failed to save.</span><span class="dl">"</span><span class="p">);</span>
  <span class="c1">//Try again later</span>
<span class="p">});</span>
</code></pre></div></div>
<h2 id="retrieving-config"><a class="anchorjs-link " href="/js/guide/#retrieving-config" aria-label="Anchor link for: retrieving config" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Retrieving Config</h2>

<p><code class="language-plaintext highlighter-rouge">ParseConfig</code> is built to be as robust and reliable as possible, even in the face of poor internet connections. Caching is used by default to ensure that the latest successfully fetched config is always available. In the below example we use <code class="language-plaintext highlighter-rouge">get</code> to retrieve the latest version of config from the server, and if the fetch fails we can simply fall back to the version that we successfully fetched before via <code class="language-plaintext highlighter-rouge">current</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-201">📋</button><code id="code-201"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Config</span><span class="p">.</span><span class="kd">get</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Yay! Config was fetched from the server.</span><span class="dl">"</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">welcomeMessage</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">welcomeMessage</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Welcome Message = </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">welcomeMessage</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Failed to fetch. Using Cached Config.</span><span class="dl">"</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Config</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>
  <span class="kd">let</span> <span class="nx">welcomeMessage</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">welcomeMessage</span><span class="dl">"</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">welcomeMessage</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">welcomeMessage</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Welcome!</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Welcome Message = </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">welcomeMessage</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="internal-config"><a class="anchorjs-link " href="/js/guide/#internal-config" aria-label="Anchor link for: internal config" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Internal Config</h2>

<p>By default, Parse Config parameters can be publicly read which may be undesired if the parameter contains sensitive information that should not be exposed to clients. A parameter can be saved as readable only with the master key by adding a flag as the second argument.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-202">📋</button><code id="code-202"><span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Config</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span>
  <span class="p">{</span> <span class="na">welcomeMessage</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Welcome to Parse</span><span class="dl">"</span><span class="p">,</span> <span class="na">secretMessage</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Psst 👀</span><span class="dl">"</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">secretMessage</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">publicConfig</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Config</span><span class="p">.</span><span class="kd">get</span><span class="p">();</span> <span class="c1">// Returns only `welcomeMessage`.</span>
<span class="kd">const</span> <span class="nx">internalConfig</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Config</span><span class="p">.</span><span class="kd">get</span><span class="p">({</span> <span class="na">useMasterKey</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span> <span class="c1">// Returns `welcomeMessage` and `secretMessage`.</span>
</code></pre></div></div>

<p>If a parameter is not provided or set to <code class="language-plaintext highlighter-rouge">false</code> in the second argument, it can be retrieved without using the master key.</p>

<h2 id="current-config"><a class="anchorjs-link " href="/js/guide/#current-config" aria-label="Anchor link for: current config" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Current Config</h2>

<p>Every <code class="language-plaintext highlighter-rouge">Parse.Config</code> instance that you get is always immutable. When you retrieve a new <code class="language-plaintext highlighter-rouge">Parse.Config</code> in the future from the network, it will not modify any existing <code class="language-plaintext highlighter-rouge">Parse.Config</code> instance, but will instead create a new one and make it available via <code class="language-plaintext highlighter-rouge">Parse.Config.current()</code>. Therefore, you can safely pass around any <code class="language-plaintext highlighter-rouge">current()</code> object and safely assume that it will not automatically change.</p>

<p>It might be troublesome to retrieve the config from the server every time you want to use it. You can avoid this by simply using the cached <code class="language-plaintext highlighter-rouge">current()</code> object and fetching the config only once in a while.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-203">📋</button><code id="code-203"><span class="c1">// Fetches the config at most once every 12 hours per app runtime</span>
<span class="kd">const</span> <span class="nx">refreshConfig</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">lastFetchedDate</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">configRefreshInterval</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">;</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">currentDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lastFetchedDate</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span>
        <span class="nx">currentDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">lastFetchedDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">&gt;</span> <span class="nx">configRefreshInterval</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Parse</span><span class="p">.</span><span class="nx">Config</span><span class="p">.</span><span class="kd">get</span><span class="p">();</span>
      <span class="nx">lastFetchedDate</span> <span class="o">=</span> <span class="nx">currentDate</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}();</span>
</code></pre></div></div>

<h2 id="parameters"><a class="anchorjs-link " href="/js/guide/#parameters" aria-label="Anchor link for: parameters" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Parameters</h2>

<p><code class="language-plaintext highlighter-rouge">ParseConfig</code>  supports most of the data types supported by <code class="language-plaintext highlighter-rouge">Parse.Object</code>:</p>

<ul>
  <li>string</li>
  <li>number</li>
  <li>Date</li>
  <li>Parse.File</li>
  <li>Parse.GeoPoint</li>
  <li>JS Array</li>
  <li>JS Object</li>
</ul>

<p>We currently allow up to <strong>100</strong> parameters in your config and a total size of <strong>128KB</strong> across all parameters.</p>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/config.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/analytics.md">
    <h1 id="analytics"><a class="anchorjs-link " href="/js/guide/#analytics" aria-label="Anchor link for: analytics" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Analytics</h1>

<p>Parse provides a number of hooks for you to get a glimpse into the ticking heart of your app. We understand that it’s important to understand what your app is doing, how frequently, and when.</p>

<p>While this section will cover different ways to instrument your app to best take advantage of Parse’s analytics backend, developers using Parse to store and retrieve data can already take advantage of metrics on Parse.</p>

<p>Without having to implement any client-side logic, you can view real-time graphs and breakdowns (by device type, Parse class name, or REST verb) of your API Requests in your app’s dashboard and save these graph filters to quickly access just the data you’re interested in.</p>

<h2 id="custom-analytics"><a class="anchorjs-link " href="/js/guide/#custom-analytics" aria-label="Anchor link for: custom analytics" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Custom Analytics</h2>

<p><code class="language-plaintext highlighter-rouge">Parse.Analytics</code> also allows you to track free-form events, with a handful of <code class="language-plaintext highlighter-rouge">string</code> keys and values. These extra dimensions allow segmentation of your custom events via your app’s Dashboard.</p>

<p>Say your app offers search functionality for apartment listings, and you want to track how often the feature is used, with some additional metadata.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-204">📋</button><code id="code-204"><span class="kd">const</span> <span class="nx">dimensions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// Define ranges to bucket data points into meaningful segments</span>
  <span class="na">priceRange</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1000-1500</span><span class="dl">'</span><span class="p">,</span>
  <span class="c1">// Did the user filter the query?</span>
  <span class="na">source</span><span class="p">:</span> <span class="dl">'</span><span class="s1">craigslist</span><span class="dl">'</span><span class="p">,</span>
  <span class="c1">// Do searches happen more often on weekdays or weekends?</span>
  <span class="na">dayType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">weekday</span><span class="dl">'</span>
<span class="p">};</span>
<span class="c1">// Send the dimensions to Parse along with the 'search' event</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nx">Analytics</span><span class="p">.</span><span class="nx">track</span><span class="p">(</span><span class="dl">'</span><span class="s1">search</span><span class="dl">'</span><span class="p">,</span> <span class="nx">dimensions</span><span class="p">);</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Parse.Analytics</code> can even be used as a lightweight error tracker — simply invoke the following and you’ll have access to an overview of the rate and frequency of errors, broken down by error code, in your application:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-205">📋</button><code id="code-205"><span class="kd">const</span> <span class="nx">codeString</span> <span class="o">=</span> <span class="dl">''</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">code</span><span class="p">;</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nx">Analytics</span><span class="p">.</span><span class="nx">track</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">code</span><span class="p">:</span> <span class="nx">codeString</span> <span class="p">});</span>
</code></pre></div></div>

<p>Note that Parse currently only stores the first eight dimension pairs per call to <code class="language-plaintext highlighter-rouge">Parse.Analytics.track()</code>.</p>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/analytics.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="common/data.md">
    <h1 id="data"><a class="anchorjs-link " href="/js/guide/#data" aria-label="Anchor link for: data" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Data</h1>

<p>We’ve designed the Parse SDKs so that you typically don’t need to worry about how data is saved while using the client SDKs. Simply add data to the Parse <code class="language-plaintext highlighter-rouge">Object</code>, and it’ll be saved correctly.</p>

<p>Nevertheless, there are some cases where it’s useful to be aware of how data is stored on the Parse platform.</p>

<h2 id="data-storage"><a class="anchorjs-link " href="/js/guide/#data-storage" aria-label="Anchor link for: data storage" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Data Storage</h2>

<p>Internally, Parse stores data as JSON, so any datatype that can be converted to JSON can be stored on Parse. Refer to the <a href="/js/guide/#data-types">Data Types in Objects</a> section of this guide to see platform-specific examples.</p>

<p>Keys including the characters <code class="language-plaintext highlighter-rouge">$</code> or <code class="language-plaintext highlighter-rouge">.</code>, along with the key <code class="language-plaintext highlighter-rouge">__type</code> key, are reserved for the framework to handle additional types, so don’t use those yourself. Key names must contain only numbers, letters, and underscore, and must start with a letter. Values can be anything that can be JSON-encoded.</p>

<h2 id="data-type-lock-in"><a class="anchorjs-link " href="/js/guide/#data-type-lock-in" aria-label="Anchor link for: data type lock in" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Data Type Lock-in</h2>

<p>When a class is initially created, it doesn’t have an inherent schema defined. This means that for the first object, it could have any types of fields you want.</p>

<p>However, after a field has been set at least once, that field is locked into the particular type that was saved. For example, if a <code class="language-plaintext highlighter-rouge">User</code> object is saved with field <code class="language-plaintext highlighter-rouge">name</code> of type <code class="language-plaintext highlighter-rouge">String</code>, that field will be restricted to the <code class="language-plaintext highlighter-rouge">String</code> type only (the server will return an error if you try to save anything else).</p>

<p>One special case is that any field can be set to <code class="language-plaintext highlighter-rouge">null</code>, no matter what type it is.</p>

<h2 id="the-data-browser"><a class="anchorjs-link " href="/js/guide/#the-data-browser" aria-label="Anchor link for: the data browser" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>The Data Browser</h2>

<p>The Data Browser is the web UI where you can update and create objects in each of your apps. Here, you can see the raw JSON values that are saved that represents each object in your class.</p>

<p>When using the interface, keep in mind the following:</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">objectId</code>, <code class="language-plaintext highlighter-rouge">createdAt</code>, <code class="language-plaintext highlighter-rouge">updatedAt</code> fields cannot be edited (these are set automatically).</li>
  <li>The value “(empty)” denotes that the field has not been set for that particular object (this is different than <code class="language-plaintext highlighter-rouge">null</code>).</li>
  <li>You can remove a field’s value by hitting your Delete key while the value is selected.</li>
</ul>

<p>The Data Browser is also a great place to test the Cloud Code validations contained in your Cloud Code functions (such as <code class="language-plaintext highlighter-rouge">beforeSave</code>). These are run whenever a value is changed or object is deleted from the Data Browser, just as they would be if the value was changed or deleted from your client code.</p>

<h2 id="importing-data"><a class="anchorjs-link " href="/js/guide/#importing-data" aria-label="Anchor link for: importing data" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Importing Data</h2>

<p>You may import data into your Parse app by using CSV or JSON files. To create a new class with data from a CSV or JSON file, go to the Data Browser and click the “Import” button on the left hand column.</p>

<p>The JSON format is an array of objects in our REST format or a JSON object with a <code class="language-plaintext highlighter-rouge">results</code> that contains an array of objects. It must adhere to the <a href="https://json.org/">JSON standard</a>. A file containing regular objects could look like:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-206">📋</button><code id="code-206"><span class="p">{</span><span class="w"> </span><span class="nl">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
    </span><span class="nl">"playerName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sean Plott"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cheatMode"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-01-01T12:23:45.678Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-01-01T12:23:45.678Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fchpZwSuGG"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Objects in either format should contain keys and values that also satisfy the following:</p>

<ul>
  <li>Key names must contain only numbers, letters, and underscore, and must start with a letter.</li>
  <li>No value may contain a hard newline ‘<code class="language-plaintext highlighter-rouge">\n</code>’.</li>
</ul>

<p>Normally, when objects are saved to Parse, they are automatically assigned a unique identifier through the <code class="language-plaintext highlighter-rouge">objectId</code> field, as well as a <code class="language-plaintext highlighter-rouge">createdAt</code> field and <code class="language-plaintext highlighter-rouge">updatedAt</code> field which represent the time that the object was created and last modified in your Parse Server. These fields can be manually set when data is imported from a JSON file. Please keep in mind the following:</p>

<ul>
  <li>Use a unique 10 character alphanumeric string as the value of your <code class="language-plaintext highlighter-rouge">objectId</code> fields.</li>
  <li>Use a UTC timestamp in the ISO 8601 format when setting a value for the <code class="language-plaintext highlighter-rouge">createdAt</code> field or the <code class="language-plaintext highlighter-rouge">updatedAt</code> field.</li>
</ul>

<p>In addition to the exposed fields, objects in the Parse User class can also have the <code class="language-plaintext highlighter-rouge">bcryptPassword</code> field set. The value of this field is a <code class="language-plaintext highlighter-rouge">String</code> that is the bcrypt hashed password + salt in the modular crypt format described in this <a href="https://stackoverflow.com/a/5882472/1351961">StackOverflow answer</a>. Most OpenSSL based bcrypt implementations should have built-in methods to produce these strings.</p>

<p>A file containing a <code class="language-plaintext highlighter-rouge">User</code> object could look like:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-207">📋</button><code id="code-207"><span class="p">{</span><span class="w"> </span><span class="nl">"results"</span><span class="p">:</span><span class="w">
  </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cooldude"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1983-09-13T22:42:30.548Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-04T10:12:42.137Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ttttSEpfXm"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sessionToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dfwfq3dh0zwe5y2sqv514p4ib"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bcryptPassword"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$2a$10$ICV5UeEf3lICfnE9W9pN9.O9Ved/ozNo7G83Qbdk5rmyvY8l16MIK"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Note that in CSV the import field types are limited to <code class="language-plaintext highlighter-rouge">String</code>, <code class="language-plaintext highlighter-rouge">Boolean</code>, and <code class="language-plaintext highlighter-rouge">Number</code>.</p>

<h2 id="exporting-your-data"><a class="anchorjs-link " href="/js/guide/#exporting-your-data" aria-label="Anchor link for: exporting your data" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Exporting your Data</h2>

<p>You can request an export of your data at any time from your app’s Settings page. The data export runs at a lower priority than production queries, so if your app is still serving queries, production traffic will always be given a higher priority, which may slow down the delivery of your data export.</p>

<h3 id="export-formats"><a class="anchorjs-link " href="/js/guide/#export-formats" aria-label="Anchor link for: export formats" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Export Formats</h3>

<p>Each collection will be exported in the same JSON format used by our REST API and delivered in a single zipped file. Since data is stored internally as JSON, this allows us to ensure that the export closely matches how the data is saved to Parse. Other formats such as CSV cannot represent all of the data types supported by Parse without losing information. If you’d like to work with your data in CSV format, you can use any of the JSON-to-CSV converters available widely on the web.</p>

<h3 id="offline-analysis"><a class="anchorjs-link " href="/js/guide/#offline-analysis" aria-label="Anchor link for: offline analysis" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Offline Analysis</h3>

<p>For offline analysis of your data, we highly recommend using alternate ways to access your data that do not require extracting the entire collection at once. For example, you can try exporting only the data that has changed since your last export. Here are some ways of achieving this:</p>

<ul>
  <li>
    <p>Use the JavaScript SDK in a node app. <code class="language-plaintext highlighter-rouge">Parse.Query.each()</code> will allow you to extract every single object that matches a query. You can use date constraints to make sure the query only matches data that has been updated since you last ran this app. Your node app can write this data to disk for offline analysis.</p>
  </li>
  <li>
    <p>Use the REST API in a script. You can run queries against your class and use skip/limit to page through results, which can then be written to disk for offline analysis. You can again use date constraints to make sure only newly updated data is extracted.</p>
  </li>
  <li>
    <p>If the above two options do not fit your needs, you can try using the Data Browser to export data selectively. Use the Funnel icon to create a filter for the specific data that you need to export, such as newly updated objects. Once the filter has been applied, click on the Export data icon on the upper right of your Data Browser. This type of export will only include the objects that match your criteria.</p>
  </li>
</ul>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/common/data.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="common/relations.md">
    <h1 id="relations"><a class="anchorjs-link " href="/js/guide/#relations" aria-label="Anchor link for: relations" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Relations</h1>

<p>There are three kinds of relationships. One-to-one relationships enable one object to be associated with another object. One-to-many relationships enable one object to have many related objects. Finally, many-to-many relationships enable complex relationships among many objects.</p>

<p>There are four ways to build relationships in Parse:</p>

<h2 id="one-to-many"><a class="anchorjs-link " href="/js/guide/#one-to-many" aria-label="Anchor link for: one to many" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>One-to-Many</h2>

<p>When you’re thinking about one-to-many relationships and whether to implement Pointers or Arrays, there are several factors to consider. First, how many objects are involved in this relationship? If the “many” side of the relationship could contain a very large number (greater than 100 or so) of objects, then you have to use Pointers. If the number of objects is small (fewer than 100 or so), then Arrays may be more convenient, especially if you typically need to get all of the related objects (the “many” in the “one-to-many relationship”) at the same time as the parent object.</p>

<h3 id="using-pointers"><a class="anchorjs-link " href="/js/guide/#using-pointers" aria-label="Anchor link for: using pointers" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Using Pointers</h3>

<p>Let’s say we have a game app. The game keeps track of the player’s score and achievements every time she chooses to play. In Parse, we can store this data in a single <code class="language-plaintext highlighter-rouge">Game</code> object. If the game becomes incredibly successful, each player will store thousands of <code class="language-plaintext highlighter-rouge">Game</code> objects in the system. For circumstances like this, where the number of relationships can be arbitrarily large, Pointers are the best option.</p>

<p>Suppose in this game app, we want to make sure that every <code class="language-plaintext highlighter-rouge">Game</code> object is associated with a Parse User. We can implement this like so:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-208">📋</button><code id="code-208"><span class="kd">var</span> <span class="nx">game</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="dl">"</span><span class="s2">Game</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">game</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">createdBy</span><span class="dl">"</span><span class="p">,</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span>
</code></pre></div></div>

<p>We can obtain all of the <code class="language-plaintext highlighter-rouge">Game</code> objects created by a Parse User with a query:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-209">📋</button><code id="code-209"><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Game</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">createdBy</span><span class="dl">"</span><span class="p">,</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span>
</code></pre></div></div>

<p>And, if we want to find the Parse User who created a specific <code class="language-plaintext highlighter-rouge">Game</code>, that is a lookup on the <code class="language-plaintext highlighter-rouge">createdBy</code> key:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-210">📋</button><code id="code-210"><span class="c1">// say we have a Game object</span>
<span class="kd">var</span> <span class="nx">game</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// getting the user who created the Game</span>
<span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">createdBy</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>For most scenarios, Pointers will be your best bet for implementing one-to-many relationships.</p>

<h3 id="using-arrays"><a class="anchorjs-link " href="/js/guide/#using-arrays" aria-label="Anchor link for: using arrays" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Using Arrays</h3>

<p>Arrays are ideal when we know that the number of objects involved in our one-to-many relationship are going to be small. Arrays will also provide some productivity benefit via the <code class="language-plaintext highlighter-rouge">includeKey</code> parameter. Supplying the parameter will enable you to obtain all of the “many” objects in the “one-to-many” relationship at the same time that you obtain the “one” object. However, the response time will be slower if the number of objects involved in the relationship turns out to be large.</p>

<p>Suppose in our game, we enabled players to keep track of all the weapons their character has accumulated as they play, and there can only be a dozen or so weapons. In this example, we know that the number of weapons is not going to be very large. We also want to enable the player to specify the order in which the weapons will appear on screen. Arrays are ideal here because the size of the array is going to be small and because we also want to preserve the order the user has set each time they play the game:</p>

<p>Let’s start by creating a column on our Parse User object called <code class="language-plaintext highlighter-rouge">weaponsList</code>.</p>

<p>Now let’s store some <code class="language-plaintext highlighter-rouge">Weapon</code> objects in the <code class="language-plaintext highlighter-rouge">weaponsList</code>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-211">📋</button><code id="code-211"><span class="c1">// let's say we have four weapons</span>
<span class="kd">var</span> <span class="nx">scimitar</span> <span class="o">=</span> <span class="p">...</span>
<span class="kd">var</span> <span class="nx">plasmaRifle</span> <span class="o">=</span> <span class="p">...</span>
<span class="kd">var</span> <span class="nx">grenade</span> <span class="o">=</span> <span class="p">...</span>
<span class="kd">var</span> <span class="nx">bunnyRabbit</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// stick the objects in an array</span>
<span class="kd">var</span> <span class="nx">weapons</span> <span class="o">=</span> <span class="p">[</span><span class="nx">scimitar</span><span class="p">,</span> <span class="nx">plasmaRifle</span><span class="p">,</span> <span class="nx">grenade</span><span class="p">,</span> <span class="nx">bunnyRabbit</span><span class="p">];</span>

<span class="c1">// store the weapons for the user</span>
<span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>
<span class="nx">user</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">weaponsList</span><span class="dl">"</span><span class="p">,</span> <span class="nx">weapons</span><span class="p">);</span>
</code></pre></div></div>

<p>Later, if we want to retrieve the <code class="language-plaintext highlighter-rouge">Weapon</code> objects, it’s just one line of code:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-212">📋</button><code id="code-212"><span class="kd">var</span> <span class="nx">weapons</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">().</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">weaponsList</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div>

<p>Sometimes, we will want to fetch the “many” objects in our one-to-many relationship at the same time as we fetch the “one” object. One trick we could employ is to use the <code class="language-plaintext highlighter-rouge">includeKey</code> (or <code class="language-plaintext highlighter-rouge">include</code> in Android) parameter whenever we use a Parse Query to also fetch the array of <code class="language-plaintext highlighter-rouge">Weapon</code> objects (stored in the <code class="language-plaintext highlighter-rouge">weaponsList</code> column) along with the Parse User object:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-213">📋</button><code id="code-213"><span class="c1">// set up our query for a User object</span>
<span class="kd">var</span> <span class="nx">userQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span>

<span class="c1">// configure any constraints on your query...</span>
<span class="c1">// for example, you may want users who are also playing with or against you</span>

<span class="c1">// tell the query to fetch all of the Weapon objects along with the user</span>
<span class="c1">// get the "many" at the same time that you're getting the "one"</span>
<span class="nx">userQuery</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="dl">"</span><span class="s2">weaponsList</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// execute the query</span>
<span class="c1">// results contains all of the User objects, and their associated Weapon objects, too</span>
<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">userQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>You can also get the “one” side of the one-to-many relationship from the “many” side. For example, if we want to find all Parse User objects who also have a given <code class="language-plaintext highlighter-rouge">Weapon</code>, we can write a constraint for our query like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-214">📋</button><code id="code-214"><span class="c1">// add a constraint to query for whenever a specific Weapon is in an array</span>
<span class="nx">userQuery</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">weaponsList</span><span class="dl">"</span><span class="p">,</span> <span class="nx">scimitar</span><span class="p">);</span>

<span class="c1">// or query using an array of Weapon objects...</span>
<span class="nx">userQuery</span><span class="p">.</span><span class="nx">containedIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">weaponsList</span><span class="dl">"</span><span class="p">,</span> <span class="nx">arrayOfWeapons</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="many-to-many"><a class="anchorjs-link " href="/js/guide/#many-to-many" aria-label="Anchor link for: many to many" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Many-to-Many</h2>

<p>Now let’s tackle many-to-many relationships. Suppose we had a book reading app and we wanted to model <code class="language-plaintext highlighter-rouge">Book</code> objects and <code class="language-plaintext highlighter-rouge">Author</code> objects. As we know, a given author can write many books, and a given book can have multiple authors. This is a many-to-many relationship scenario where you have to choose between Arrays, Parse Relations, or creating your own Join Table.</p>

<p>The decision point here is whether you want to attach any metadata to the relationship between two entities. If you don’t, Parse Relation or using Arrays are going to be the easiest alternatives. In general, using arrays will lead to higher performance and require fewer queries. If either side of the many-to-many relationship could lead to an array with more than 100 or so objects, then, for the same reason Pointers were better for one-to-many relationships, Parse Relation or Join Tables will be better alternatives.</p>

<p>On the other hand, if you want to attach metadata to the relationship, then create a separate table (the “Join Table”) to house both ends of the relationship. Remember, this is information <strong>about the relationship</strong>, not about the objects on either side of the relationship. Some examples of metadata you may be interested in, which would necessitate a Join Table approach, include:</p>

<h3 id="using-parse-relations"><a class="anchorjs-link " href="/js/guide/#using-parse-relations" aria-label="Anchor link for: using parse relations" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Using Parse Relations</h3>

<p>Using Parse Relations, we can create a relationship between a <code class="language-plaintext highlighter-rouge">Book</code> and a few <code class="language-plaintext highlighter-rouge">Author</code> objects. In the Data Browser, you can create a column on the <code class="language-plaintext highlighter-rouge">Book</code> object of type relation and name it <code class="language-plaintext highlighter-rouge">authors</code>.</p>

<p>After that, we can associate a few authors with this book:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-215">📋</button><code id="code-215"><span class="c1">// let’s say we have a few objects representing Author objects</span>
<span class="kd">var</span> <span class="nx">authorOne</span> <span class="o">=</span> <span class="p">...</span>
<span class="kd">var</span> <span class="nx">authorTwo</span> <span class="o">=</span> <span class="p">...</span>
<span class="kd">var</span> <span class="nx">authorThree</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// now we create a book object</span>
<span class="kd">var</span> <span class="nx">book</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="dl">"</span><span class="s2">Book</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// now let’s associate the authors with the book</span>
<span class="c1">// remember, we created a "authors" relation on Book</span>
<span class="kd">var</span> <span class="nx">relation</span> <span class="o">=</span> <span class="nx">book</span><span class="p">.</span><span class="nx">relation</span><span class="p">(</span><span class="dl">"</span><span class="s2">authors</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">relation</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">authorOne</span><span class="p">);</span>
<span class="nx">relation</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">authorTwo</span><span class="p">);</span>
<span class="nx">relation</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">authorThree</span><span class="p">);</span>

<span class="c1">// now save the book object</span>
<span class="nx">book</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>To get the list of authors who wrote a book, create a query:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-216">📋</button><code id="code-216"><span class="c1">// suppose we have a book object</span>
<span class="kd">var</span> <span class="nx">book</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// create a relation based on the authors key</span>
<span class="kd">var</span> <span class="nx">relation</span> <span class="o">=</span> <span class="nx">book</span><span class="p">.</span><span class="nx">relation</span><span class="p">(</span><span class="dl">"</span><span class="s2">authors</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// generate a query based on that relation</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">relation</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>

<span class="c1">// now execute the query</span>
</code></pre></div></div>

<p>Perhaps you even want to get a list of all the books to which an author contributed. You can create a slightly different kind of query to get the inverse of the relationship:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-217">📋</button><code id="code-217"><span class="c1">// suppose we have a author object, for which we want to get all books</span>
<span class="kd">var</span> <span class="nx">author</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// first we will create a query on the Book object</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Book</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// now we will query the authors relation to see if the author object we have</span>
<span class="c1">// is contained therein</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">authors</span><span class="dl">"</span><span class="p">,</span> <span class="nx">author</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="using-join-tables"><a class="anchorjs-link " href="/js/guide/#using-join-tables" aria-label="Anchor link for: using join tables" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Using Join Tables</h3>

<p>There may be certain cases where we want to know more about a relationship. For example, suppose we were modeling a following/follower relationship between users: a given user can follow another user, much as they would in popular social networks. In our app, we not only want to know if User A is following User B, but we also want to know <strong>when</strong> User A started following User B. This information could not be contained in a Parse Relation. In order to keep track of this data, you must create a separate table in which the relationship is tracked. This table, which we will call <code class="language-plaintext highlighter-rouge">Follow</code>, would have a <code class="language-plaintext highlighter-rouge">from</code> column and a <code class="language-plaintext highlighter-rouge">to</code> column, each with a pointer to a Parse User. Alongside the relationship, you can also add a column with a <code class="language-plaintext highlighter-rouge">Date</code> object named <code class="language-plaintext highlighter-rouge">date</code>.</p>

<p>Now, when you want to save the following relationship between two users, create a row in the <code class="language-plaintext highlighter-rouge">Follow</code> table, filling in the <code class="language-plaintext highlighter-rouge">from</code>, <code class="language-plaintext highlighter-rouge">to</code>, and <code class="language-plaintext highlighter-rouge">date</code> keys appropriately:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-218">📋</button><code id="code-218"><span class="kd">var</span> <span class="nx">otherUser</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// create an entry in the Follow table</span>
<span class="kd">var</span> <span class="nx">follow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="dl">"</span><span class="s2">Follow</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">follow</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">from</span><span class="dl">"</span><span class="p">,</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span>
<span class="nx">follow</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">to</span><span class="dl">"</span><span class="p">,</span> <span class="nx">otherUser</span><span class="p">);</span>
<span class="nx">follow</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">date</span><span class="dl">"</span><span class="p">,</span> <span class="nb">Date</span><span class="p">());</span>
<span class="nx">follow</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
</code></pre></div></div>

<p>If we want to find all of the people we are following, we can execute a query on the <code class="language-plaintext highlighter-rouge">Follow</code> table:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-219">📋</button><code id="code-219"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Follow</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">from</span><span class="dl">"</span><span class="p">,</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span>
<span class="kd">const</span> <span class="nx">users</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>It’s also pretty easy to find all the users that are following the current user by querying on the <code class="language-plaintext highlighter-rouge">to</code> key:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-220">📋</button><code id="code-220"><span class="c1">// create an entry in the Follow table</span>
<span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Follow</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">to</span><span class="dl">"</span><span class="p">,</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span>
<span class="kd">const</span> <span class="nx">users</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="using-an-array"><a class="anchorjs-link " href="/js/guide/#using-an-array" aria-label="Anchor link for: using an array" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Using an Array</h3>

<p>Arrays are used in Many-to-Many relationships in much the same way that they are for One-to-Many relationships. All objects on one side of the relationship will have an Array column containing several objects on the other side of the relationship.</p>

<p>Suppose we have a book reading app with <code class="language-plaintext highlighter-rouge">Book</code> and <code class="language-plaintext highlighter-rouge">Author</code> objects. The <code class="language-plaintext highlighter-rouge">Book</code> object will contain an Array of <code class="language-plaintext highlighter-rouge">Author</code> objects (with a key named <code class="language-plaintext highlighter-rouge">authors</code>). Arrays are a great fit for this scenario because it’s highly unlikely that a book will have more than 100 or so authors. We will put the Array in the <code class="language-plaintext highlighter-rouge">Book</code> object for this reason. After all, an author could write more than 100 books.</p>

<p>Here is how we save a relationship between a <code class="language-plaintext highlighter-rouge">Book</code> and an <code class="language-plaintext highlighter-rouge">Author</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-221">📋</button><code id="code-221"><span class="c1">// let's say we have an author</span>
<span class="kd">var</span> <span class="nx">author</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// and let's also say we have an book</span>
<span class="kd">var</span> <span class="nx">book</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// add the author to the authors list for the book</span>
<span class="nx">book</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">"</span><span class="s2">authors</span><span class="dl">"</span><span class="p">,</span> <span class="nx">author</span><span class="p">);</span>
</code></pre></div></div>

<p>Because the author list is an Array, you should use the <code class="language-plaintext highlighter-rouge">includeKey</code> (or <code class="language-plaintext highlighter-rouge">include</code> on Android) parameter when fetching a <code class="language-plaintext highlighter-rouge">Book</code> so that Parse returns all the authors when it also returns the book:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-222">📋</button><code id="code-222"><span class="c1">// set up our query for the Book object</span>
<span class="kd">const</span> <span class="nx">bookQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Book</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// configure any constraints on your query...</span>
<span class="c1">// tell the query to fetch all of the Author objects along with the Book</span>
<span class="nx">bookQuery</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="dl">"</span><span class="s2">authors</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// execute the query</span>
<span class="kd">const</span> <span class="nx">books</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bookQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<p>At that point, getting all the <code class="language-plaintext highlighter-rouge">Author</code> objects in a given <code class="language-plaintext highlighter-rouge">Book</code> is a pretty straightforward call:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-223">📋</button><code id="code-223"><span class="kd">var</span> <span class="nx">authorList</span> <span class="o">=</span> <span class="nx">book</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">authors</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div></div>

<p>Finally, suppose you have an <code class="language-plaintext highlighter-rouge">Author</code> and you want to find all the <code class="language-plaintext highlighter-rouge">Book</code> objects in which she appears. This is also a pretty straightforward query with an associated constraint:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-224">📋</button><code id="code-224"><span class="c1">// set up our query for the Book object</span>
<span class="kd">var</span> <span class="nx">bookQuery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Book</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// configure any constraints on your query...</span>
<span class="nx">bookQuery</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">authors</span><span class="dl">"</span><span class="p">,</span> <span class="nx">author</span><span class="p">);</span>

<span class="c1">// tell the query to fetch all of the Author objects along with the Book</span>
<span class="nx">bookQuery</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="dl">"</span><span class="s2">authors</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// execute the query</span>
<span class="kd">const</span> <span class="nx">books</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bookQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="one-to-one"><a class="anchorjs-link " href="/js/guide/#one-to-one" aria-label="Anchor link for: one to one" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>One-to-One</h2>

<p>In Parse, a one-to-one relationship is great for situations where you need to split one object into two objects. These situations should be rare, but two examples include:</p>

<ul>
  <li><strong>Limiting visibility of some user data.</strong> In this scenario, you would split the object in two, where one portion of the object contains data that is visible to other users, while the related object contains data that is private to the original user (and protected via ACLs).</li>
  <li><strong>Splitting up an object for size.</strong> In this scenario, your original object size is too large, so you decide to create a secondary object to house extra data. It is usually better to design your data model to avoid objects this large, rather than splitting them up. If you can’t avoid doing so, you can also consider storing large data in a Parse File.</li>
</ul>

<p>Thank you for reading this far. We apologize for the complexity. Modeling relationships in data is a hard subject, in general. But look on the bright side: it’s still easier than relationships with people.</p>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/common/relations.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/schema.md">
    <h1 id="schema"><a class="anchorjs-link " href="/js/guide/#schema" aria-label="Anchor link for: schema" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Schema</h1>

<p>Schema is the structure representing classes in your app. You can use the schema
of an app to verify operations in a unit test, generate test data, generate test
classes and then clean up after tests. The schema API can also be used to create
custom views of your data. We use the schema API to display column names and
types in the databrowser.</p>

<p>This API allows you to access the schemas of your app.</p>

<ul>
  <li>Parse Server 2.7.1+</li>
  <li><code class="language-plaintext highlighter-rouge">MasterKey</code> is required.</li>
</ul>

<p>Schema will return an object similar to the following:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-225">📋</button><code id="code-225"><span class="p">{</span>
  <span class="nl">className</span><span class="p">:</span> <span class="dl">'</span><span class="s1">MyClass</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">fields</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// Default fields</span>
    <span class="nl">ACL</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ACL</span><span class="dl">'</span><span class="p">},</span>
    <span class="nx">createdAt</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Date</span><span class="dl">'</span><span class="p">},</span>
    <span class="nx">updatedAt</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Date</span><span class="dl">'</span><span class="p">},</span>
    <span class="nx">objectId</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">String</span><span class="dl">'</span><span class="p">},</span>
    <span class="c1">// Custom fields</span>
    <span class="nx">aNumber</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Number</span><span class="dl">'</span><span class="p">},</span>
    <span class="nx">aString</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">String</span><span class="dl">'</span><span class="p">},</span>
    <span class="nx">aBool</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Boolean</span><span class="dl">'</span><span class="p">},</span>
    <span class="nx">aDate</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Date</span><span class="dl">'</span><span class="p">},</span>
    <span class="nx">aObject</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Object</span><span class="dl">'</span><span class="p">},</span>
    <span class="nx">aArray</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Array</span><span class="dl">'</span><span class="p">},</span>
    <span class="nx">aGeoPoint</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GeoPoint</span><span class="dl">'</span><span class="p">},</span>
    <span class="nx">aPolygon</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Polygon</span><span class="dl">'</span><span class="p">},</span>
    <span class="nx">aFile</span><span class="p">:</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">File</span><span class="dl">'</span><span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">classLevelPermissions</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">find</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nx">create</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="kd">get</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nx">update</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nx">addField</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="k">delete</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">indexes</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">indexName</span><span class="p">:</span> <span class="p">{</span> <span class="na">aString</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Direct manipulation of the classes that are on your server is possible through ParseSchema. Although fields and classes can be automatically generated (the latter assuming client class creation is enabled) ParseSchema gives you explicit control over these classes and their fields.</p>

<p><em>With great power comes great responsibility. Altering the schema directly should be done with care, you can’t go back to retrieve data if you remove a field and it’s associated values.</em></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-226">📋</button><code id="code-226"><span class="c1">// create an instance to manage your class</span>
<span class="kd">const</span> <span class="nx">mySchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Schema</span><span class="p">(</span><span class="dl">'</span><span class="s1">MyClass</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// gets the current schema data</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="kd">get</span><span class="p">();</span>

<span class="c1">// returns schema for all classes</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nx">Schema</span><span class="p">.</span><span class="nx">all</span><span class="p">()</span>

<span class="c1">// add any # of fields, without having to create any objects</span>
<span class="nx">mySchema</span>
  <span class="p">.</span><span class="nx">addString</span><span class="p">(</span><span class="dl">'</span><span class="s1">stringField</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">addNumber</span><span class="p">(</span><span class="dl">'</span><span class="s1">numberField</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">addBoolean</span><span class="p">(</span><span class="dl">'</span><span class="s1">booleanField</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">addDate</span><span class="p">(</span><span class="dl">'</span><span class="s1">dateField</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">addFile</span><span class="p">(</span><span class="dl">'</span><span class="s1">fileField</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">addGeoPoint</span><span class="p">(</span><span class="dl">'</span><span class="s1">geoPointField</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">addPolygon</span><span class="p">(</span><span class="dl">'</span><span class="s1">polygonField</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">addArray</span><span class="p">(</span><span class="dl">'</span><span class="s1">arrayField</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">addObject</span><span class="p">(</span><span class="dl">'</span><span class="s1">objectField</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">addPointer</span><span class="p">(</span><span class="dl">'</span><span class="s1">pointerField</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">_User</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">addRelation</span><span class="p">(</span><span class="dl">'</span><span class="s1">relationField</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">_User</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// new types can be added as they are available</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="nx">addField</span><span class="p">(</span><span class="dl">'</span><span class="s1">newField</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ANewDataType</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">// save/update this schema to persist your field changes</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="nx">save</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// returns save new schema</span>
<span class="p">});</span>
<span class="c1">// or</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="nx">update</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// updates existing schema</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Assuming you want to remove a field you can simply call <code class="language-plaintext highlighter-rouge">deleteField</code> and <code class="language-plaintext highlighter-rouge">save/update</code> to clear it out.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-227">📋</button><code id="code-227"><span class="nx">mySchema</span><span class="p">.</span><span class="nx">deleteField</span><span class="p">(</span><span class="dl">'</span><span class="s1">stringField</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
<span class="c1">// or for an existing schema...</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="indexes"><a class="anchorjs-link " href="/js/guide/#indexes" aria-label="Anchor link for: indexes" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Indexes</h2>

<p>Indexes support efficient execution of queries from the database. Keep in mind that the <code class="language-plaintext highlighter-rouge">masterKey</code> is required for these operations, so be sure it’s set in your initialization code before you use this feature.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-228">📋</button><code id="code-228"><span class="c1">// To add an index, the field must exist before you create an index</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="nx">addString</span><span class="p">(</span><span class="dl">'</span><span class="s1">stringField</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">stringField</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="nx">addIndex</span><span class="p">(</span><span class="dl">'</span><span class="s1">stringFieldIndex</span><span class="dl">'</span><span class="p">,</span> <span class="nx">index</span><span class="p">);</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="nx">save</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// returns schema including index stringFieldIndex and field stringField</span>
<span class="p">});</span>

<span class="c1">// Delete an index</span>
<span class="nx">testSchema</span><span class="p">.</span><span class="nx">deleteIndex</span><span class="p">(</span><span class="dl">'</span><span class="s1">indexName</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="nx">save</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// returns schema without indexName index</span>
<span class="p">});</span>

<span class="c1">// If indexes exist, you can retrieve them</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="kd">get</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// result.indexes</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="purge"><a class="anchorjs-link " href="/js/guide/#purge" aria-label="Anchor link for: purge" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Purge</h2>

<p>All objects can be purged from a schema (class) via purge. But <em>be careful</em>! This can be considered an irreversible action. Only do this if you really need to delete all objects from a class, such as when you need to delete the class (as in the code example above).</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-229">📋</button><code id="code-229"><span class="c1">// delete all objects in the schema</span>
<span class="nx">mySchema</span><span class="p">.</span><span class="nx">purge</span><span class="p">();</span>
</code></pre></div></div>


    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/schema.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="js/handling-errors.md">
    <h1 id="error-handling"><a class="anchorjs-link " href="/js/guide/#error-handling" aria-label="Anchor link for: error handling" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Error Handling</h1>

<p>Most Parse JavaScript functions report their success or failure using an object with callbacks, similar to a Backbone “options” object.  The two primary callbacks used are <code class="language-plaintext highlighter-rouge">success</code> and <code class="language-plaintext highlighter-rouge">error</code>.  <code class="language-plaintext highlighter-rouge">success</code> is called whenever an operation completes without errors.  Generally, its parameter will be either the <code class="language-plaintext highlighter-rouge">Parse.Object</code> in the case of <code class="language-plaintext highlighter-rouge">save</code> or <code class="language-plaintext highlighter-rouge">get</code>, or an array of <code class="language-plaintext highlighter-rouge">Parse.Object</code> for <code class="language-plaintext highlighter-rouge">find</code>.</p>

<p><code class="language-plaintext highlighter-rouge">error</code> is called for any kind of error that occurs when interacting with the Parse Cloud over the network. These errors are either related to problems connecting to the cloud or problems performing the requested operation. Let’s take a look at another example.  In the code below, we try to fetch an object with a non-existent <code class="language-plaintext highlighter-rouge">objectId</code>. The Parse Cloud will return an error - so here’s how to handle it properly in your callback:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-230">📋</button><code id="code-230"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Note</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">aBcDeFgH</span><span class="dl">"</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">results</span><span class="p">)</span> <span class="o">=&gt;</span><span class="err">&nbsp;</span><span class="p">{</span>
  <span class="c1">// This function will *not* be called.</span>
  <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Everything went fine!</span><span class="dl">"</span><span class="p">);</span>
<span class="p">},</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span><span class="err">&nbsp;</span><span class="p">{</span>
  <span class="c1">// This will be called.</span>
  <span class="c1">// error is an instance of Parse.Error with details about the error.</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">code</span> <span class="o">===</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Error</span><span class="p">.</span><span class="nx">OBJECT_NOT_FOUND</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Uh oh, we couldn't find the object!</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// You can also use `.catch`</span>

<span class="nx">query</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">aBcDeFgH</span><span class="dl">"</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">results</span><span class="p">)</span> <span class="o">=&gt;</span><span class="err">&nbsp;</span><span class="p">{</span>
  <span class="c1">// This function will *not* be called.</span>
  <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Everything went fine!</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span><span class="err">&nbsp;</span><span class="p">{</span>
  <span class="c1">// This will be called.</span>
  <span class="c1">// error is an instance of Parse.Error with details about the error.</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">code</span> <span class="o">===</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Error</span><span class="p">.</span><span class="nx">OBJECT_NOT_FOUND</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Uh oh, we couldn't find the object!</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The query might also fail because the device couldn’t connect to the Parse Cloud. Here’s the same callback but with a bit of extra code to handle that scenario:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-231">📋</button><code id="code-231"><span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Note</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">thisObjectIdDoesntExist</span><span class="dl">"</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">results</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// This function will *not* be called.</span>
  <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Everything went fine!</span><span class="dl">"</span><span class="p">);</span>
<span class="p">},</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// This will be called.</span>
  <span class="c1">// error is an instance of Parse.Error with details about the error.</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">code</span> <span class="o">===</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Error</span><span class="p">.</span><span class="nx">OBJECT_NOT_FOUND</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Uh oh, we couldn't find the object!</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">code</span> <span class="o">===</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Error</span><span class="p">.</span><span class="nx">CONNECTION_FAILED</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Uh oh, we couldn't even connect to the Parse Cloud!</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>For methods like <code class="language-plaintext highlighter-rouge">save</code> and <code class="language-plaintext highlighter-rouge">signUp</code> that affect a particular <code class="language-plaintext highlighter-rouge">Parse.Object</code>, the first argument to the error function will be the object itself, and the second will be the <code class="language-plaintext highlighter-rouge">Parse.Error</code> object.  This is for compatibility with Backbone-type frameworks.</p>

<p>For a list of all possible <code class="language-plaintext highlighter-rouge">Parse.Error</code> codes, scroll down to <a href="/js/guide/#error-codes">Error Codes</a>, or see the <code class="language-plaintext highlighter-rouge">Parse.Error</code> section of the  <a href="https://parseplatform.org/Parse-SDK-JS/api/master//classes/Parse.Error.html">JavaScript API <code class="language-plaintext highlighter-rouge">Parse.Error</code></a>.</p>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/js/handling-errors.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="common/security.md">
    <h1 id="security"><a class="anchorjs-link " href="/js/guide/#security" aria-label="Anchor link for: security" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Security</h1>

<p>As your app development progresses, you will want to use Parse’s security features in order to safeguard data. This document explains the ways in which you can secure your apps.</p>

<p>If your app is compromised, it’s not only you as the developer who suffers, but potentially the users of your app as well. Continue reading for our suggestions for sensible defaults and precautions to take before releasing your app into the wild.</p>

<h2 id="client-vs-server"><a class="anchorjs-link " href="/js/guide/#client-vs-server" aria-label="Anchor link for: client vs server" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Client vs. Server</h2>

<p>When an app first connects to Parse, it identifies itself with an Application ID and a Client key (or REST Key, or .NET Key, or JavaScript Key, depending on which platform you’re using). These are not secret and by themselves they do not secure an app. These keys are shipped as a part of your app, and anyone can decompile your app or proxy network traffic from their device to find your client key. This exploit is even easier with JavaScript — one can simply “view source” in the browser and immediately find your client key.</p>

<p>This is why Parse has many other security features to help you secure your data. The client key is given out to your users, so anything that can be done with just the client key is doable by the general public, even malicious hackers.</p>

<p>The master key, on the other hand, is definitely a security mechanism. Using the master key allows you to bypass all of your app’s security mechanisms, such as <a href="/js/guide/#class-level-permissions">class-level permissions</a> and <a href="/js/guide/#object-level-access-control">ACLs</a>. Having the master key is like having root access to your app’s servers, and you should guard your master key with the same zeal with which you would guard your production machines’ root password.</p>

<p>The overall philosophy is to limit the power of your clients (using client keys), and to perform any sensitive actions requiring the master key in Cloud Code. You’ll learn how to best wield this power in the section titled <a href="/js/guide/#implementing-business-logic-in-cloud-code">Implementing Business Logic in Cloud Code</a>.</p>

<p>A final note: It is recommended to setup HTTPS and SSL in your server, to avoid man-in-the-middle attacks, but Parse works fine as well with non-HTTPS connections.</p>

<h2 id="class-level-permissions"><a class="anchorjs-link " href="/js/guide/#class-level-permissions" aria-label="Anchor link for: class level permissions" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Class-Level Permissions</h2>

<p>The second level of security is at the schema and data level. Enforcing security measures at this level will restrict how and when client applications can access and create data on Parse. When you first begin developing your Parse application, all of the defaults are set so that you can be a more productive developer. For example:</p>

<ul>
  <li>A client application can create new classes on Parse</li>
  <li>A client application can add fields to classes</li>
  <li>A client application can modify or query for objects on Parse</li>
</ul>

<p>You can configure any of these permissions to apply to everyone, no one, or to specific users or roles in your app. Roles are groups that contain users or other roles, which you can assign to an object to restrict its use. Any permission granted to a role is also granted to any of its children, whether they are users or other roles, enabling you to create an access hierarchy for your apps. Each of <a href="/">the Parse guides</a> includes a detailed description of employing Roles in your apps.</p>

<p>Once you are confident that you have the right classes and relationships between classes in your app, you should begin to lock it down by doing the following:</p>

<p>Almost every class that you create should have these permissions tweaked to some degree. For classes where every object has the same permissions, class-level settings will be most effective. For example, one common use case entails having a class of static data that can be read by anyone but written by no one.</p>

<h3 id="restricting-class-creation"><a class="anchorjs-link " href="/js/guide/#restricting-class-creation" aria-label="Anchor link for: restricting class creation" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Restricting class creation</h3>

<p>As a start, you can configure your application so that clients cannot create new classes on Parse. This is done by setting the key <code class="language-plaintext highlighter-rouge">allowClientClassCreation</code> to <code class="language-plaintext highlighter-rouge">false</code> in your ParseServer configuration.  See the project Readme for an overview of <a href="https://github.com/parse-community/parse-server#configuration">Configuring your ParseServer</a>.   Once restricted, classes may only be created from the Data Browser or with a the <code class="language-plaintext highlighter-rouge">masterKey</code>. This will prevent attackers from filling your database with unlimited, arbitrary new classes.</p>

<h3 id="configuring-class-level-permissions"><a class="anchorjs-link " href="/js/guide/#configuring-class-level-permissions" aria-label="Anchor link for: configuring class level permissions" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Configuring Class-Level Permissions</h3>

<p>Parse lets you specify what operations are allowed per class. This lets you restrict the ways in which clients can access or modify your classes. To change these settings, go to the Data Browser, select a class, and click the “Security” button.</p>

<p>You can configure the client’s ability to perform each of the following operations for the selected class:</p>

<ul>
  <li>
    <p><strong>Read</strong>:</p>

    <ul>
      <li>
        <p><strong>Get</strong>: With Get permission, users can fetch objects in this table if they know their objectIds.</p>
      </li>
      <li>
        <p><strong>Find</strong>: Anyone with Find permission can query all of the objects in the table, even if they don’t know their objectIds. Any table with public Find permission will be completely readable by the public, unless you put an ACL on each object.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Write</strong>:</p>

    <ul>
      <li>
        <p><strong>Update</strong>: Anyone with Update permission can modify the fields of any object in the table that doesn’t have an ACL. For publicly readable data, such as game levels or assets, you should disable this permission.</p>
      </li>
      <li>
        <p><strong>Create</strong>: Like Update, anyone with Create permission can create new objects of a class. As with the Update permission, you’ll probably want to turn this off for publicly readable data.</p>
      </li>
      <li>
        <p><strong>Delete</strong>: With this permission, people can delete any object in the table that doesn’t have an ACL. All they need is its objectId.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Add fields</strong>: Parse classes have schemas that are inferred when objects are created. While you’re developing your app, this is great, because you can add a new field to your object without having to make any changes on the backend. But once you ship your app, it’s very rare to need to add new fields to your classes automatically. You should pretty much always turn off this permission for all of your classes when you submit your app to the public.</p>
  </li>
</ul>

<p>For each of the above actions, you can grant permission to all users (which is the default), or lock permissions down to a list of roles and users. For example, a class that should be available to all users would be set to read-only by only enabling get and find. A logging class could be set to write-only by only allowing creates. You could enable moderation of user-generated content by providing update and delete access to a particular set of users or roles.</p>

<h2 id="object-level-access-control"><a class="anchorjs-link " href="/js/guide/#object-level-access-control" aria-label="Anchor link for: object level access control" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Object-Level Access Control</h2>

<p>Once you’ve locked down your schema and class-level permissions, it’s time to think about how data is accessed by your users. Object-level access control enables one user’s data to be kept separate from another’s, because sometimes different objects in a class need to be accessible by different people. For example, a user’s private personal data should be accessible only to them.</p>

<p>Parse also supports the notion of anonymous users for those apps that want to store and protect user-specific data without requiring explicit login.</p>

<p>When a user logs into an app, they initiate a session with Parse. Through this session they can add and modify their own data but are prevented from modifying other users’ data.</p>

<h3 id="access-control-lists"><a class="anchorjs-link " href="/js/guide/#access-control-lists" aria-label="Anchor link for: access control lists" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Access Control Lists</h3>

<p>The easiest way to control who can access which data is through access control lists, commonly known as ACLs. The idea behind an ACL is that each object has a list of users and roles along with what permissions that user or role has. A user needs read permissions (or must belong to a role that has read permissions) in order to retrieve an object’s data, and a user needs write permissions (or must belong to a role that has write permissions) in order to update or delete that object.</p>

<p>Once you have a User, you can start using ACLs. Remember: Users can be created through traditional username/password sign up, through a third-party login system like Facebook or Twitter, or even by using Parse’s <a href="/ios/guide/#anonymous-users">automatic anonymous users</a> functionality. To set an ACL on the current user’s data to not be publicly readable, all you have to do is:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-232">📋</button><code id="code-232"><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">setACL</span><span class="p">(</span><span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">(</span><span class="nx">user</span><span class="p">));</span>
</code></pre></div></div>

<p>Most apps should do this. If you store any sensitive user data, such as email addresses or phone numbers, you need to set an ACL like this so that the user’s private information isn’t visible to other users. If an object doesn’t have an ACL, it’s readable and writeable by everyone. The only exception is the <code class="language-plaintext highlighter-rouge">_User</code> class. We never allow users to write each other’s data, but they can read it by default. (If you as the developer need to update other <code class="language-plaintext highlighter-rouge">_User</code> objects, remember that your master key can provide the power to do this.)</p>

<p>To make it super easy to create user-private ACLs for every object, we have a way to set a default ACL that will be used for every new object you create:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-233">📋</button><code id="code-233"><span class="c1">// not available in the JavaScript SDK</span>
</code></pre></div></div>

<p>If you want the user to have some data that is public and some that is private, it’s best to have two separate objects. You can add a pointer to the private data from the public one.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-234">📋</button><code id="code-234"><span class="kd">var</span> <span class="nx">privateData</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">PrivateUserData</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">privateData</span><span class="p">.</span><span class="nx">setACL</span><span class="p">(</span><span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">()));</span>
<span class="nx">privateData</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">phoneNumber</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">555-5309</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">().</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">privateData</span><span class="dl">"</span><span class="p">,</span> <span class="nx">privateData</span><span class="p">);</span>
</code></pre></div></div>

<p>Of course, you can set different read and write permissions on an object. For example, this is how you would create an ACL for a public post by a user, where anyone can read it:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-235">📋</button><code id="code-235"><span class="kd">var</span> <span class="nx">acl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">();</span>
<span class="nx">acl</span><span class="p">.</span><span class="nx">setPublicReadAccess</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="nx">acl</span><span class="p">.</span><span class="nx">setWriteAccess</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">current</span><span class="p">().</span><span class="nx">id</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre></div></div>

<p>Sometimes it’s inconvenient to manage permissions on a per-user basis, and you want to have groups of users who get treated the same (like a set of admins with special powers). Roles are a special kind of object that let you create a group of users that can all be assigned to the ACL. The best thing about roles is that you can add and remove users from a role without having to update every single object that is restricted to that role. To create an object that is writeable only by admins:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-236">📋</button><code id="code-236"><span class="kd">var</span> <span class="nx">acl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">ACL</span><span class="p">();</span>
<span class="nx">acl</span><span class="p">.</span><span class="nx">setPublicReadAccess</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="nx">acl</span><span class="p">.</span><span class="nx">setRoleWriteAccess</span><span class="p">(</span><span class="dl">"</span><span class="s2">admins</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre></div></div>

<p>Of course, this snippet assumes you’ve already created a role named “admins”. This is often reasonable when you have a small set of special roles set up while developing your app. Roles can also be created and updated on the fly — for example, adding new friends to a “friendOf___” role after each connection is made.</p>

<p>All this is just the beginning. Applications can enforce all sorts of complex access patterns through ACLs and class-level permissions. For example:</p>

<ul>
  <li>For private data, read and write access can be restricted to the owner.</li>
  <li>For a post on a message board, the author and members of the “Moderators” role can have “write” access, and the general public can have “read” access.</li>
  <li>For logging data that will only be accessed by the developer through the REST API using the master key, the ACL can deny all permissions.</li>
  <li>Data created by a privileged group of users or the developer, like a global message of the day, can have public read access but restrict write access to an “Administrators” role.</li>
  <li>A message sent from one user to another can give “read” and “write” access just to those users.</li>
</ul>

<p>For the curious, here’s the format for an ACL that restricts read and write permissions to the owner (whose <code class="language-plaintext highlighter-rouge">objectId</code> is identified by <code class="language-plaintext highlighter-rouge">"aSaMpLeUsErId"</code>) and enables other users to read the object:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-237">📋</button><code id="code-237"><span class="p">{</span><span class="w">
    </span><span class="nl">"*"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"read"</span><span class="p">:</span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"aSaMpLeUsErId"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"read"</span><span class="w"> </span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nl">"write"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>And here’s another example of the format of an ACL that uses a Role:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-238">📋</button><code id="code-238"><span class="p">{</span><span class="w">
    </span><span class="nl">"role:RoleName"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"aSaMpLeUsErId"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nl">"write"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="pointer-permissions"><a class="anchorjs-link " href="/js/guide/#pointer-permissions" aria-label="Anchor link for: pointer permissions" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Pointer Permissions</h3>

<p>Pointer permissions are a special type of class-level permission that create a virtual ACL on every object in a class, based on users stored in pointer fields on those objects. For example, given a class with an <code class="language-plaintext highlighter-rouge">owner</code> field, setting a read pointer permission on <code class="language-plaintext highlighter-rouge">owner</code> will make each object in the class only readable by the user in that object’s <code class="language-plaintext highlighter-rouge">owner</code> field. For a class with a <code class="language-plaintext highlighter-rouge">sender</code> and a <code class="language-plaintext highlighter-rouge">reciever</code> field, a read pointer permission on the <code class="language-plaintext highlighter-rouge">receiver</code> field and a read and write pointer permission on the <code class="language-plaintext highlighter-rouge">sender</code> field will make each object in the class readable by the user in the <code class="language-plaintext highlighter-rouge">sender</code> and <code class="language-plaintext highlighter-rouge">receiver</code> field, and writable only by the user in the <code class="language-plaintext highlighter-rouge">sender</code> field.</p>

<p>Given that objects often already have pointers to the user(s) that should have permissions on the object, pointer permissions provide a simple and fast solution for securing your app using data which is already there, that doesn’t require writing any client code or cloud code.</p>

<p>Pointer permissions are like virtual ACLs. They don’t appear in the ACL column, but if you are familiar with how ACLs work, you can think of them like ACLs. In the above example with the <code class="language-plaintext highlighter-rouge">sender</code> and <code class="language-plaintext highlighter-rouge">receiver</code>, each object will act as if it has an ACL of:</p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-239">📋</button><code id="code-239"><span class="p">{</span><span class="w">
    </span><span class="nl">"&lt;SENDER_USER_ID&gt;"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"write"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"&lt;RECEIVER_USER_ID&gt;"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Note that this ACL is not actually created on each object. Any existing ACLs will not be modified when you add or remove pointer permissions, and any user attempting to interact with an object can only interact with the object if both the virtual ACL created by the pointer permissions, and the real ACL already on the object allow the interaction. For this reason, it can sometimes be confusing to combine pointer permissions and ACLs, so we recommend using pointer permissions for classes that don’t have many ACLs set. Fortunately, it’s easy to remove pointer permissions if you later decide to use Cloud Code or ACLs to secure your app.</p>

<h3 id="requires-authentication-permission-requires-parse-server---230"><a class="anchorjs-link " href="/js/guide/#requires-authentication-permission-requires-parse-server---230" aria-label="Anchor link for: requires authentication permission requires parse server   230" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Requires Authentication permission (requires parse-server  &gt;= 2.3.0)</h3>

<p>Starting version 2.3.0, parse-server introduces a new Class Level Permission <code class="language-plaintext highlighter-rouge">requiresAuthentication</code>.
This CLP prevents any non authenticated user from performing the action protected by the CLP.</p>

<p>For example, you want to allow your <strong>authenticated users</strong> to <code class="language-plaintext highlighter-rouge">find</code> and <code class="language-plaintext highlighter-rouge">get</code> <code class="language-plaintext highlighter-rouge">Announcement</code>’s from your application and your <strong>admin role</strong> to have all privileged, you would set the CLP:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-240">📋</button><code id="code-240"><span class="c1">// POST http://my-parse-server.com/schemas/Announcement</span>
<span class="c1">// Set the X-Parse-Application-Id and X-Parse-Master-Key header</span>
<span class="c1">// body:</span>
<span class="p">{</span>
  <span class="nl">classLevelPermissions</span><span class="p">:</span>
  <span class="p">{</span>
    <span class="dl">"</span><span class="s2">find</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">requiresAuthentication</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">role:admin</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">get</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">requiresAuthentication</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">role:admin</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">create</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">role:admin</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="dl">"</span><span class="s2">update</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">role:admin</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="dl">"</span><span class="s2">delete</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">role:admin</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Effects:</p>

<ul>
  <li>Non authenticated users won’t be able to do anything.</li>
  <li>Authenticated users (any user with a valid sessionToken) will be able to read all the objects in that class</li>
  <li>Users belonging to the admin role, will be able to perform all operations.</li>
</ul>

<p>:warning: Note that this is in no way securing your content, if you allow anyone to login to your server, every client will still be able to query this object.</p>

<h3 id="clp-and-acl-interaction"><a class="anchorjs-link " href="/js/guide/#clp-and-acl-interaction" aria-label="Anchor link for: clp and acl interaction" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>CLP and ACL interaction</h3>

<p>Class-Level Permissions (CLPs) and Access Control Lists (ACLs) are both powerful tools for securing your app, but they don’t always interact exactly how you might expect. They actually represent two separate layers of security that each request has to pass through to return the correct information or make the intended change. These layers, one at the class level, and one at the object level, are shown below. A request must pass through BOTH layers of checks in order to be authorized. Note that despite acting similarly to ACLs, <a href="/js/guide/#pointer-permissions">Pointer Permissions</a> are a type of class level permission, so a request must pass the pointer permission check in order to pass the CLP check.</p>

<p><img alt="CLP vs ACL Diagram" src="./JavaScriptDevelopersGuide_Parse_files/clp_vs_acl_diagram.png"></p>

<p>As you can see, whether a user is authorized to make a request can become complicated when you use both CLPs and ACLs. Let’s look at an example to get a better sense of how CLPs and ACLs can interact. Say we have a <code class="language-plaintext highlighter-rouge">Photo</code> class, with an object, <code class="language-plaintext highlighter-rouge">photoObject</code>. There are 2 users in our app, <code class="language-plaintext highlighter-rouge">user1</code> and <code class="language-plaintext highlighter-rouge">user2</code>. Now lets say we set a Get CLP on the <code class="language-plaintext highlighter-rouge">Photo</code> class, disabling public Get, but allowing <code class="language-plaintext highlighter-rouge">user1</code> to perform Get. Now let’s also set an ACL on <code class="language-plaintext highlighter-rouge">photoObject</code> to allow Read - which includes GET - for only <code class="language-plaintext highlighter-rouge">user2</code>.</p>

<p>You may expect this will allow both <code class="language-plaintext highlighter-rouge">user1</code> and <code class="language-plaintext highlighter-rouge">user2</code> to Get <code class="language-plaintext highlighter-rouge">photoObject</code>, but because the CLP layer of authentication and the ACL layer are both in effect at all times, it actually makes it so <em>neither</em> <code class="language-plaintext highlighter-rouge">user1</code> nor <code class="language-plaintext highlighter-rouge">user2</code> can Get <code class="language-plaintext highlighter-rouge">photoObject</code>. If <code class="language-plaintext highlighter-rouge">user1</code> tries to Get <code class="language-plaintext highlighter-rouge">photoObject</code>, it will get through the CLP layer of authentication, but then will be rejected because it does not pass the ACL layer. In the same way, if <code class="language-plaintext highlighter-rouge">user2</code> tries to Get <code class="language-plaintext highlighter-rouge">photoObject</code>, it will also be rejected at the CLP layer of authentication.</p>

<p>Now lets look at example that uses Pointer Permissions. Say we have a <code class="language-plaintext highlighter-rouge">Post</code> class, with an object, <code class="language-plaintext highlighter-rouge">myPost</code>. There are 2 users in our app, <code class="language-plaintext highlighter-rouge">poster</code>, and <code class="language-plaintext highlighter-rouge">viewer</code>. Lets say we add a pointer permission that gives anyone in the <code class="language-plaintext highlighter-rouge">Creator</code> field of the <code class="language-plaintext highlighter-rouge">Post</code> class read and write access to the object, and for the <code class="language-plaintext highlighter-rouge">myPost</code> object, <code class="language-plaintext highlighter-rouge">poster</code> is the user in that field. There is also an ACL on the object that gives read access to <code class="language-plaintext highlighter-rouge">viewer</code>. You may expect that this will allow <code class="language-plaintext highlighter-rouge">poster</code> to read and edit <code class="language-plaintext highlighter-rouge">myPost</code>, and <code class="language-plaintext highlighter-rouge">viewer</code> to read it, but <code class="language-plaintext highlighter-rouge">viewer</code> will be rejected by the Pointer Permission, and <code class="language-plaintext highlighter-rouge">poster</code> will be rejected by the ACL, so again, neither user will be able to access the object.</p>

<p>Because of the complex interaction between CLPs, Pointer Permissions, and ACLs, we recommend being careful when using them together. Often it can be useful to use CLPs only to disable all permissions for a certain request type, and then using Pointer Permissions or ACLs for other request types. For example, you may want to disable Delete for a <code class="language-plaintext highlighter-rouge">Photo</code> class, but then put a Pointer Permission on <code class="language-plaintext highlighter-rouge">Photo</code> so the user who created it can edit it, just not delete it. Because of the especially complex way that Pointer Permissions and ACLs interact, we usually recommend only using one of those two types of security mechanisms.</p>

<h3 id="security-edge-cases"><a class="anchorjs-link " href="/js/guide/#security-edge-cases" aria-label="Anchor link for: security edge cases" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Security Edge Cases</h3>

<p>There are some special classes in Parse that don’t follow all of the same security rules as every other class. Not all classes follow <a href="/js/guide/#class-level-permissions">Class-Level Permissions (CLPs)</a> or <a href="/js/guide/#object-level-access-control">Access Control Lists (ACLs)</a> exactly how they are defined, and here those exceptions are documented. Here “normal behavior” refers to CLPs and ACLs working normally, while any other special behaviors are described in the footnotes.</p>

<table>
  <thead>
    <tr>
      <th>&nbsp;</th>
      <th><code class="language-plaintext highlighter-rouge">_User</code></th>
      <th><code class="language-plaintext highlighter-rouge">_Installation</code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Get</td>
      <td>normal behaviour [1, 2, 3]</td>
      <td>ignores CLP, but not ACL</td>
    </tr>
    <tr>
      <td>Find</td>
      <td>normal behavior [3]</td>
      <td>master key only [6]</td>
    </tr>
    <tr>
      <td>Create</td>
      <td>normal behavior [4]</td>
      <td>ignores CLP</td>
    </tr>
    <tr>
      <td>Update</td>
      <td>normal behavior [5]</td>
      <td>ignores CLP, but not ACL [7]</td>
    </tr>
    <tr>
      <td>Delete</td>
      <td>normal behavior [5]</td>
      <td>master key only [7]</td>
    </tr>
    <tr>
      <td>Add Field</td>
      <td>normal behavior</td>
      <td>normal behavior</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>
    <p>Logging in, or <code class="language-plaintext highlighter-rouge">/parse/login</code> in the REST API, does not respect the Get CLP on the user class. Login works just based on username and password, and cannot be disabled using CLPs.</p>
  </li>
  <li>
    <p>Retrieving the current user, or becoming a User based on a session token, which are both <code class="language-plaintext highlighter-rouge">/parse/users/me</code> in the REST API, do not respect the Get CLP on the user class.</p>
  </li>
  <li>
    <p>Read ACLs do not apply to the logged in user. For example, if all users have ACLs with Read disabled, then doing a find query over users will still return the logged in user. However, if the Find CLP is disabled, then trying to perform a find on users will still return an error.</p>
  </li>
  <li>
    <p>Create CLPs also apply to signing up. So disabling Create CLPs on the user class also disables people from signing up without the master key.</p>
  </li>
  <li>
    <p>Users can only Update and Delete themselves. Public CLPs for Update and Delete may still apply. For example, if you disable public Update for the user class, then users cannot edit themselves. But no matter what the write ACL on a user is, that user can still Update or Delete itself, and no other user can Update or Delete that user. As always, however, using the master key allows users to update other users, independent of CLPs or ACLs.</p>
  </li>
  <li>
    <p>Get requests on installations follow ACLs normally. Find requests without master key is not allowed unless you supply the <code class="language-plaintext highlighter-rouge">installationId</code> as a constraint.</p>
  </li>
  <li>
    <p>Update requests on installations do adhere to the ACL defined on the installation, but Delete requests are master-key-only. For more information about how installations work, check out the <a href="/rest/guide/#installations">installations section of the REST guide</a>.</p>
  </li>
</ol>

<h2 id="data-integrity-in-cloud-code"><a class="anchorjs-link " href="/js/guide/#data-integrity-in-cloud-code" aria-label="Anchor link for: data integrity in cloud code" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Data Integrity in Cloud Code</h2>

<p>For most apps, care around keys, class-level permissions, and object-level ACLs are all you need to keep your app and your users’ data safe. Sometimes, though, you’ll run into an edge case where they aren’t quite enough. For everything else, there’s <a href="/cloudcode/guide/">Cloud Code</a>.</p>

<p>Cloud Code allows you to upload JavaScript to Parse’s servers, where we will run it for you. Unlike client code running on users’ devices that may have been tampered with, Cloud Code is guaranteed to be the code that you’ve written, so it can be trusted with more responsibility.</p>

<p>One particularly common use case for Cloud Code is preventing invalid data from being stored. For this sort of situation, it’s particularly important that a malicious client not be able to bypass the validation logic.</p>

<p>To create validation functions, Cloud Code allows you to implement a <code class="language-plaintext highlighter-rouge">beforeSave</code> trigger for your class. These triggers are run whenever an object is saved, and allow you to modify the object or completely reject a save. For example, this is how you create a <a href="/cloudcode/guide/#beforesave-triggers">Cloud Code beforeSave trigger</a> to make sure every user has an email address set:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-241">📋</button><code id="code-241"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">beforeSave</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">,</span> <span class="nx">request</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">object</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="dl">"</span><span class="s2">Every user must have an email address.</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Validations can lock down your app so that only certain values are acceptable. You can also use <code class="language-plaintext highlighter-rouge">afterSave</code> validations to normalize your data (e.g. formatting all phone numbers or currency identically). You get to retain most of the productivity benefits of accessing Parse data directly from your client applications, but you can also enforce certain invariants for your data on the fly.</p>

<p>Common scenarios that warrant validation include:</p>

<ul>
  <li>Making sure phone numbers have the right format</li>
  <li>Sanitizing data so that its format is normalized</li>
  <li>Making sure that an email address looks like a real email address</li>
  <li>Requiring that every user specifies an age within a particular range</li>
  <li>Not letting users directly change a calculated field</li>
  <li>Not letting users delete specific objects unless certain conditions are met</li>
</ul>

<h2 id="implementing-business-logic-in-cloud-code"><a class="anchorjs-link " href="/js/guide/#implementing-business-logic-in-cloud-code" aria-label="Anchor link for: implementing business logic in cloud code" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Implementing Business Logic in Cloud Code</h2>

<p>While validation often makes sense in Cloud Code, there are likely certain actions that are particularly sensitive, and should be as carefully guarded as possible. In these cases, you can remove permissions or the logic from clients entirely and instead funnel all such operations to Cloud Code functions.</p>

<p>When a Cloud Code function is called, it can use the optional <code class="language-plaintext highlighter-rouge">{useMasterKey:true}</code> parameter to gain the ability to modify user data. With the master key, your Cloud Code function can override any ACLs and write data. This means that it’ll bypass all the security mechanisms you’ve put in place in the previous sections.</p>

<p>Say you want to allow a user to “like” a <code class="language-plaintext highlighter-rouge">Post</code> object without giving them full write permissions on the object. You can do this by having the client call a Cloud Code function instead of modifying the Post itself:</p>

<p>The master key should be used carefully. setting <code class="language-plaintext highlighter-rouge">useMasterKey</code> to <code class="language-plaintext highlighter-rouge">true</code> only in the individual API function calls that need that security override:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-242">📋</button><code id="code-242"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="dl">"</span><span class="s2">like</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="nx">request</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">post</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="dl">"</span><span class="s2">Post</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">post</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">postId</span><span class="p">;</span>
  <span class="nx">post</span><span class="p">.</span><span class="nx">increment</span><span class="p">(</span><span class="dl">"</span><span class="s2">likes</span><span class="dl">"</span><span class="p">);</span>
  <span class="k">await</span> <span class="nx">post</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span> <span class="na">useMasterKey</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="p">});</span>
</code></pre></div></div>

<p>One very common use case for Cloud Code is sending push notifications to particular users. In general, clients can’t be trusted to send push notifications directly, because they could modify the alert text, or push to people they shouldn’t be able to. Your app’s settings will allow you to set whether “client push” is enabled or not; we recommend that you make sure it’s disabled. Instead, you should write Cloud Code functions that validate the data to be pushed and sent before sending a push.</p>

<h2 id="parse-security-summary"><a class="anchorjs-link " href="/js/guide/#parse-security-summary" aria-label="Anchor link for: parse security summary" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Parse Security Summary</h2>

<p>Parse provides a number of ways for you to secure data in your app. As you build your app and evaluate the kinds of data you will be storing, you can make the decision about which implementation to choose.</p>

<p>It is worth repeating that that the Parse User object is readable by all other users by default. You will want to set the ACL on your User object accordingly if you wish to prevent data contained in the User object (for example, the user’s email address) from being visible by other users.</p>

<p>Most classes in your app will fall into one of a couple of easy-to-secure categories. For fully public data, you can use class-level permissions to lock down the table to put publicly readable and writeable by no one. For fully private data, you can use ACLs to make sure that only the user who owns the data can read it. But occasionally, you’ll run into situations where you don’t want data that’s fully public or fully private. For example, you may have a social app, where you have data for a user that should be readable only to friends whom they’ve approved. For this you’ll need to a combination of the techniques discussed in this guide to enable exactly the sharing rules you desire.</p>

<p>We hope that you’ll use these tools to do everything you can to keep your app’s data and your users’ data secure. Together, we can make the web a safer place.</p>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/common/security.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="common/performance.md">
    <h1 id="performance"><a class="anchorjs-link " href="/js/guide/#performance" aria-label="Anchor link for: performance" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Performance</h1>

<p>As your app scales, you will want to ensure that it performs well under increased load and usage. This document provides guidelines on how you can optimize your app’s performance. While you can use Parse Server for quick prototyping and not worry about performance, you will want to keep our performance guidelines in mind when you’re initially designing your app. We strongly advise that you make sure you’ve followed all suggestions before releasing your app.</p>

<p>You can improve your app’s performance by looking at the following:</p>

<ul>
  <li>Writing efficient queries.</li>
  <li>Writing restrictive queries.</li>
  <li>Using client-side caching.</li>
  <li>Using Cloud Code.</li>
  <li>Avoiding count queries.</li>
  <li>Using efficient search techniques.</li>
</ul>

<p>Keep in mind that not all suggestions may apply to your app. Let’s look into each one of these in more detail.</p>

<h2 id="write-efficient-queries"><a class="anchorjs-link " href="/js/guide/#write-efficient-queries" aria-label="Anchor link for: write efficient queries" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Write Efficient Queries</h2>

<p>Parse objects are stored in a database. A Parse query retrieves objects that you are interested in based on conditions you apply to the query. To avoid looking through all the data present in a particular Parse class for every query, the database can use an index. An index is a sorted list of items matching a given criteria. Indexes help because they allow the database to do an efficient search and return matching results without looking at all of the data. Indexes are typically smaller in size and available in memory, resulting in faster lookups.</p>

<h2 id="indexing"><a class="anchorjs-link " href="/js/guide/#indexing" aria-label="Anchor link for: indexing" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Indexing</h2>

<p>You are responsible for managing your database and maintaining indexes when using Parse Server. If your data is not indexed, every query will have to go through the the entire data for a class to return a query result. On the other hand, if your data is indexed appropriately, the number of documents scanned to return a correct query result should be low.</p>

<p>The order of a query constraint’s usefulness is:</p>

<ul>
  <li>Equal to</li>
  <li>Contained In</li>
  <li>Less than, Less than or Equal to, Greater than, Greater than or Equal to</li>
  <li>Prefix string matches</li>
  <li>Not equal to</li>
  <li>Not contained in</li>
  <li>Everything else</li>
</ul>

<p>Take a look at the following query to retrieve GameScore objects:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-243">📋</button><code id="code-243"><span class="kd">var</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">containedIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">[</span><span class="dl">"</span><span class="s2">Jonathan Walsh</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Dario Wunsch</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Shawn Simon</span><span class="dl">"</span><span class="p">]);</span>
</code></pre></div></div>

<p>Creating an index query based on the score field would yield a smaller search space in general than creating one on the <code class="language-plaintext highlighter-rouge">playerName</code> field.</p>

<p>When examining data types, booleans have a very low entropy and and do not make good indexes. Take the following query constraint:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-244">📋</button><code id="code-244"><span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">cheatMode</span><span class="dl">"</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</code></pre></div></div>

<p>The two possible values for <code class="language-plaintext highlighter-rouge">"cheatMode"</code> are <code class="language-plaintext highlighter-rouge">true</code> and <code class="language-plaintext highlighter-rouge">false</code>. If an index was added on this field it would be of little use because it’s likely that 50% of the records will have to be looked at to return query results.</p>

<p>Data types are ranked by their expected entropy of the value space for the key:</p>

<ul>
  <li>GeoPoints</li>
  <li>Array</li>
  <li>Pointer</li>
  <li>Date</li>
  <li>String</li>
  <li>Number</li>
  <li>Other</li>
</ul>

<p>Even the best indexing strategy can be defeated by suboptimal queries.</p>

<h2 id="efficient-query-design"><a class="anchorjs-link " href="/js/guide/#efficient-query-design" aria-label="Anchor link for: efficient query design" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Efficient Query Design</h2>

<p>Writing efficient queries means taking full advantage of indexes. Let’s take a look at some query constraints that negate the use of indexes:</p>

<ul>
  <li>Not Equal To</li>
  <li>Not Contained In</li>
</ul>

<p>Additionally, the following queries under certain scenarios may result in slow query responses if they can’t take advantage of indexes:</p>

<ul>
  <li>Regular Expressions</li>
  <li>Ordered By</li>
</ul>

<h3 id="not-equal-to"><a class="anchorjs-link " href="/js/guide/#not-equal-to" aria-label="Anchor link for: not equal to" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Not Equal To</h3>

<p>For example, let’s say you’re tracking high scores for a game in a GameScore class. Now say you want to retrieve the scores for all players except a certain one. You could create this query:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-245">📋</button><code id="code-245"><span class="kd">var</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">notEqualTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Michael Yabuti</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Retrieved scores successfully</span>
<span class="p">});</span>
</code></pre></div></div>

<p>This query can’t take advantage of indexes. The database has to look at all the objects in the <code class="language-plaintext highlighter-rouge">"GameScore"</code> class to satisfy the constraint and retrieve the results. As the number of entries in the class grows, the query takes longer to run.</p>

<p>Luckily, most of the time a “Not Equal To” query condition can be rewritten as a “Contained In” condition. Instead of querying for the absence of values, you ask for values which match the rest of the column values. Doing this allows the database to use an index and your queries will be faster.</p>

<p>For example if the User class has a column called state which has values “SignedUp”, “Verified”, and “Invited”, the slow way to find all users who have used the app at least once would be to run the query:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-246">📋</button><code id="code-246"><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">notEqualTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">state</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Invited</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>It would be faster to use the “Contained In” condition when setting up the query:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-247">📋</button><code id="code-247"><span class="nx">query</span><span class="p">.</span><span class="nx">containedIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">state</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">SignedUp</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Verified</span><span class="dl">"</span><span class="p">]);</span>
</code></pre></div></div>

<p>Sometimes, you may have to completely rewrite your query. Going back to the <code class="language-plaintext highlighter-rouge">"GameScore"</code> example, let’s say we were running that query to display players who had scored higher than the given player. We could do this differently, by first getting the given player’s high score and then using the following query:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-248">📋</button><code id="code-248"><span class="kd">var</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="c1">// Previously retrieved highScore for Michael Yabuti</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">greaterThan</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">,</span> <span class="nx">highScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Retrieved scores successfully</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The new query you use depends on your use case. This may sometimes mean a redesign of your data model.</p>

<h3 id="not-contained-in"><a class="anchorjs-link " href="/js/guide/#not-contained-in" aria-label="Anchor link for: not contained in" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Not Contained In</h3>

<p>Similar to “Not Equal To”, the “Not Contained In” query constraint can’t use an index. You should try and use the complementary “Contained In” constraint. Building on the User example, if the state column had one more value, “Blocked”, to represent blocked users, a slow query to find active users would be:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-249">📋</button><code id="code-249"><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Parse</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">notContainedIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">state</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">Invited</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Blocked</span><span class="dl">"</span><span class="p">]);</span>
</code></pre></div></div>

<p>Using a complimentary “Contained In” query constraint will always be faster:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-250">📋</button><code id="code-250"><span class="nx">query</span><span class="p">.</span><span class="nx">containedIn</span><span class="p">(</span><span class="dl">"</span><span class="s2">state</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">SignedUp</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Verified</span><span class="dl">"</span><span class="p">]);</span>
</code></pre></div></div>

<p>This means rewriting your queries accordingly. Your query rewrites will depend on your schema set up. It may mean redoing that schema.</p>

<h3 id="regular-expressions"><a class="anchorjs-link " href="/js/guide/#regular-expressions" aria-label="Anchor link for: regular expressions" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Regular Expressions</h3>

<p>Regular expression queries should be avoided due to performance considerations. MongoDB is not efficient for doing partial string matching except for the special case where you only want a prefix match. Queries that have regular expression constraints are therefore very expensive, especially for classes with over 100,000 records. Consider restricting how many such operations can be run on a particular app at any given time.</p>

<p>You should avoid using regular expression constraints that don’t use indexes. For example, the following query looks for data with a given string in the <code class="language-plaintext highlighter-rouge">"playerName"</code> field. The string search is case insensitive and therefore cannot be indexed:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-251">📋</button><code id="code-251"><span class="nx">query</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Michael</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">i</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>The following query, while case sensitive, looks for any occurrence of the string in the field and cannot be indexed:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-252">📋</button><code id="code-252"><span class="nx">query</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Michael</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>These queries are both slow. In fact, the <code class="language-plaintext highlighter-rouge">matches</code> and <code class="language-plaintext highlighter-rouge">contains</code> query constraints are not covered in our querying guides on purpose and we do not recommend using them. Depending on your use case, you should switch to using the following constraint that uses an index, such as:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-253">📋</button><code id="code-253"><span class="nx">query</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Michael</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>This looks for data that starts with the given string. This query will use the backend index, so it will be faster even for large datasets.</p>

<p>As a best practice, when you use regular expression constraints, you’ll want to ensure that other constraints in the query reduce the result set to the order of hundreds of objects to make the query efficient. If you must use the <code class="language-plaintext highlighter-rouge">matches</code> or <code class="language-plaintext highlighter-rouge">contains</code> constraints for legacy reasons, then use case sensitive, anchored queries where possible, for example:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-254">📋</button><code id="code-254"><span class="nx">query</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">^Michael</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>Most of the use cases around using regular expressions involve implementing search. A more performant way of implementing search is detailed later.</p>

<h2 id="write-restrictive-queries"><a class="anchorjs-link " href="/js/guide/#write-restrictive-queries" aria-label="Anchor link for: write restrictive queries" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Write Restrictive Queries</h2>

<p>Writing restrictive queries allows you to return only the data that the client needs. This is critical in a mobile environment were data usage can be limited and network connectivity unreliable. You also want your mobile app to appear responsive and this is directly affected by the objects you send back to the client. The <a href="/js/guide/#queries">Querying section</a> shows the types of constraints you can add to your existing queries to limit the data returned. When adding constraints, you want to pay attention and design efficient queries.</p>

<p>You can use skip and limit to page through results and load the data as is needed. The query limit is 100 by default:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-255">📋</button><code id="code-255"><span class="nx">query</span><span class="p">.</span><span class="nx">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// limit to at most 10 results</span>
</code></pre></div></div>

<p>If you’re issuing queries on GeoPoints, make sure you specify a reasonable radius:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-256">📋</button><code id="code-256"><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">PlaceObject</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">withinMiles</span><span class="p">(</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="p">,</span> <span class="nx">userGeoPoint</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">placesObjects</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Get a list of objects within 10 miles of a user's location</span>
<span class="p">});</span>
</code></pre></div></div>

<p>You can further limit the fields returned by calling select:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-257">📋</button><code id="code-257"><span class="kd">var</span> <span class="nx">GameScore</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">GameScore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">GameScore</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">playerName</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// each of results will only have the selected fields available.</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="client-side-caching"><a class="anchorjs-link " href="/js/guide/#client-side-caching" aria-label="Anchor link for: client side caching" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Client-side Caching</h2>

<p>For queries run from iOS and Android, you can turn on query caching. See the <a href="/ios/guide/#caching-queries">iOS</a> and <a href="/android/guide/#caching-queries">Android</a> guides for more details. Caching queries will increase your mobile app’s performance especially in cases where you want to display cached data while fetching the latest data from Parse.</p>

<h2 id="use-cloud-code"><a class="anchorjs-link " href="/js/guide/#use-cloud-code" aria-label="Anchor link for: use cloud code" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Use Cloud Code</h2>

<p>Cloud Code allows you to run custom JavaScript logic on Parse Server instead of on the client.</p>

<p>You can use this to offload processing to the Parse servers thus increasing your app’s perceived performance.  You can create hooks that run whenever an object is saved or deleted. This is useful if you want to validate or sanitize your data. You can also use Cloud Code to modify related objects or kick off other processes such as sending off a push notification.</p>

<p>We saw examples of limiting the data returned by writing restrictive queries. You can also use <a href="/cloudcode/guide/#cloud-functions">Cloud Functions</a> to help limit the amount of data returned to your app. In the following example, we use a Cloud Function to get a movie’s average rating:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-258">📋</button><code id="code-258"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="dl">"</span><span class="s2">averageStars</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Review</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">movie</span><span class="dl">"</span><span class="p">,</span> <span class="nx">request</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">movie</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
  <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">stars</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">sum</span> <span class="o">/</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div>

<p>You could have ran a query on the Review class on the client, returned only the stars field data and computed the result on the client. As the number of reviews for a movie increases you can see that the data being returned to the device using this methodology also increases. Implementing the functionality through a Cloud Function returns the one result if successful.</p>

<p>As you look at optimizing your queries, you’ll find that you may have to change the queries - sometimes even after you’ve shipped your app to the App Store or Google Play. The ability to change your queries without a client update is possible if you use <a href="/cloudcode/guide/#cloud-functions">Cloud Functions</a>. Even if you have to redesign your schema, you could make all the changes in your Cloud Functions while keeping the client interface the same to avoid an app update. Take the average stars Cloud Function example from before, calling it from a client SDK would look like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-259">📋</button><code id="code-259"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="dl">"</span><span class="s2">averageStars</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">movie</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">The Matrix</span><span class="dl">"</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ratings</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ratings is 4.5</span>
<span class="p">});</span>
</code></pre></div></div>

<p>If later on, you need to modify the underlying data model, your client call can remain the same, as long as you return back a number that represents the ratings result.</p>

<h2 id="avoid-count-operations"><a class="anchorjs-link " href="/js/guide/#avoid-count-operations" aria-label="Anchor link for: avoid count operations" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Avoid Count Operations</h2>

<p>When counting objects frequently, instead consider storing a count variable in the database that is incremented each time an object is added. Then, the count can quickly be retrieved by simply retrieving the variable stored.</p>

<p>Suppose you are displaying movie information in your app and your data model consists of a Movie class and a Review class that contains a pointer to the corresponding movie. You might want to display the review count for each movie on the top-level navigation screen using a query like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-260">📋</button><code id="code-260"><span class="kd">var</span> <span class="nx">Review</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Review</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="dl">"</span><span class="s2">Review</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">(</span><span class="dl">"</span><span class="s2">movie</span><span class="dl">"</span><span class="p">,</span> <span class="nx">movie</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">count</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Request succeeded</span>
<span class="p">});</span>
</code></pre></div></div>

<p>If you run the count query for each of the UI elements, they will not run efficiently on large data sets. One approach to avoid using the <code class="language-plaintext highlighter-rouge">count()</code> operator could be to add a field to the Movie class that represents the review count for that movie. When saving an entry to the Review class you could increment the corresponding movie’s review count field. This can be done in an <code class="language-plaintext highlighter-rouge">afterSave</code> handler:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-261">📋</button><code id="code-261"><span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">afterSave</span><span class="p">(</span><span class="dl">"</span><span class="s2">Review</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Get the movie id for the Review</span>
  <span class="kd">var</span> <span class="nx">movieId</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">object</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">movie</span><span class="dl">"</span><span class="p">).</span><span class="nx">id</span><span class="p">;</span>
  <span class="c1">// Query the Movie represented by this review</span>
  <span class="kd">var</span> <span class="nx">Movie</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Movie</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Movie</span><span class="p">);</span>
  <span class="nx">query</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">movieId</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">movie</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Increment the reviews field on the Movie object</span>
    <span class="nx">movie</span><span class="p">.</span><span class="nx">increment</span><span class="p">(</span><span class="dl">"</span><span class="s2">reviews</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">movie</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="dl">"</span><span class="s2">Got an error </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">code</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> : </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Your new optimized query would not need to look at the Review class to get the review count:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-262">📋</button><code id="code-262"><span class="kd">var</span> <span class="nx">Movie</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Movie</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Movie</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Results include the reviews count field</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Request failed</span>
<span class="p">});</span>
</code></pre></div></div>

<p>You could also use a separate Parse Object to keep track of counts for each review. Whenever a review gets added or deleted, you can increment or decrement the counts in an <code class="language-plaintext highlighter-rouge">afterSave</code> or <code class="language-plaintext highlighter-rouge">afterDelete</code> Cloud Code handler. The approach you choose depends on your use case.</p>

<h2 id="implement-efficient-searches"><a class="anchorjs-link " href="/js/guide/#implement-efficient-searches" aria-label="Anchor link for: implement efficient searches" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Implement Efficient Searches</h2>

<p>As mentioned previously, MongoDB is not efficient for doing partial string matching. However, this is an important use case when implementing search functionality that scales well in production.</p>

<p>Simplistic search algorithms simply scan through all the class data and executes the query on each entry. The key to making searches run efficiently is to minimize the number of data that has to be examined when executing each query by using an index as we’ve outlined earlier. You’ll need to build your data model in a way that it’s easy for us to build an index for the data you want to be searchable. For example, string matching queries that don’t match an exact prefix of the string won’t be able to use an index leading to timeout errors as the data set grows.</p>

<p>Let’s walk through an example of how you could build an efficient search. You can apply the concepts you learn in this example to your use case. Say your app has users making posts, and you want to be able to search those posts for hashtags or particular keywords. You’ll want to pre-process your posts and save the list of hashtags and words into array fields. You can do this processing either in your app before saving the posts, or you can use a Cloud Code <code class="language-plaintext highlighter-rouge">beforeSave</code> hook to do this on the fly:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-263">📋</button><code id="code-263"><span class="kd">var</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">underscore</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">Parse</span><span class="p">.</span><span class="nx">Cloud</span><span class="p">.</span><span class="nx">beforeSave</span><span class="p">(</span><span class="dl">"</span><span class="s2">Post</span><span class="dl">"</span><span class="p">,</span> <span class="nx">request</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">post</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">object</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">toLowerCase</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">w</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">w</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span> <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">words</span> <span class="o">=</span> <span class="nx">post</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="sr">/</span><span class="se">\b</span><span class="sr">/</span><span class="p">);</span>
  <span class="nx">words</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">words</span><span class="p">,</span> <span class="nx">toLowerCase</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">stopWords</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">the</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">in</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">and</span><span class="dl">"</span><span class="p">]</span>
  <span class="nx">words</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">words</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">w</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">w</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^</span><span class="se">\w</span><span class="sr">+$/</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span>   <span class="nx">_</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">stopWords</span><span class="p">,</span> <span class="nx">w</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">hashtags</span> <span class="o">=</span> <span class="nx">post</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/#.+</span><span class="se">?\b</span><span class="sr">/g</span><span class="p">);</span>
  <span class="nx">hashtags</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">hashtags</span><span class="p">,</span> <span class="nx">toLowerCase</span><span class="p">);</span>
  <span class="nx">post</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">words</span><span class="dl">"</span><span class="p">,</span> <span class="nx">words</span><span class="p">);</span>
  <span class="nx">post</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">hashtags</span><span class="dl">"</span><span class="p">,</span> <span class="nx">hashtags</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>This saves your words and hashtags in array fields, which MongoDB will store with a multi-key index. There are some important things to notice about this. First of all it’s converting all words to lower case so that we can look them up with lower case queries, and get case insensitive matching. Secondly, it’s filtering out common words like ‘the’, ‘in’, and ‘and’ which will occur in a lot of posts, to additionally reduce useless scanning of the index when executing the queries.</p>

<p>Once you’ve got the keywords set up, you can efficiently look them up using “All” constraint on your query:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><button class="btn-copy" id="btn-264">📋</button><code id="code-264"><span class="kd">var</span> <span class="nx">Post</span> <span class="o">=</span> <span class="nx">Parse</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="dl">"</span><span class="s2">Post</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parse</span><span class="p">.</span><span class="nx">Query</span><span class="p">(</span><span class="nx">Post</span><span class="p">);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">containsAll</span><span class="p">(</span><span class="dl">"</span><span class="s2">hashtags</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">#parse</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">#ftw</span><span class="dl">"</span><span class="p">]);</span>
<span class="nx">query</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Request succeeded</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Request failed</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="limits-and-other-considerations"><a class="anchorjs-link " href="/js/guide/#limits-and-other-considerations" aria-label="Anchor link for: limits and other considerations" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Limits and Other Considerations</h2>

<p>There are some limits in place to ensure the API can provide the data you need in a performant manner. We may adjust these in the future. Please take a moment to read through the following list:</p>

<p><strong>Objects</strong></p>
<ul>
  <li>We recommend against storing large pieces of binary data like images or documents in a Parse Object.</li>
  <li>We recommend against creating more than 64 fields on a single Parse Object to ensure that we can build effective indexes for your queries.</li>
  <li>We recommend against using field names that are longer than 1,024 characters, otherwise an index for the field will not be created.</li>
</ul>

<p><strong>Queries</strong></p>

<ul>
  <li>Queries return 100 objects by default. Use the <code class="language-plaintext highlighter-rouge">limit</code> parameter to change this.</li>
  <li>Skips and limits can only be used on the outer query.</li>
  <li>Constraints that collide with each other will result in only one of the constraints being applied. An example of this would be two <code class="language-plaintext highlighter-rouge">equalTo</code> constraints over the same key with two different values, which contradicts itself (perhaps you’re looking for ‘contains’).</li>
  <li>No geo-queries inside compound OR queries.</li>
  <li>Using <code class="language-plaintext highlighter-rouge">$exists: false</code> is not advised.</li>
  <li>The <code class="language-plaintext highlighter-rouge">each</code> query method in the JavaScript SDK cannot be used in conjunction with queries using geo-point constraints.</li>
  <li>A <code class="language-plaintext highlighter-rouge">containsAll</code> query constraint can only take up to 9 items in the comparison array.</li>
</ul>

<p><strong>Push Notifications</strong></p>

<ul>
  <li><a href="https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1">Delivery of notifications is a “best effort”, not guaranteed</a>. It is not intended to deliver data to your app, only to notify the user that there is new data available.</li>
</ul>

<p><strong>Cloud Code</strong></p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">params</code> payload that is passed to a Cloud Function is limited to 50 MB.</li>
</ul>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/common/performance.md">Edit this section.</a></span>
	<hr>
</div>

  </div>

  
  <div data-source="common/errors.md">
    <h1 id="error-codes"><a class="anchorjs-link " href="/js/guide/#error-codes" aria-label="Anchor link for: error codes" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Error Codes</h1>

<p>The following is a list of all the error codes that can be returned by the Parse API. You may also refer to <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">RFC2616</a> for a list of http error codes. Make sure to check the error message for more details.</p>

<h2 id="api-issues"><a class="anchorjs-link " href="/js/guide/#api-issues" aria-label="Anchor link for: api issues" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>API Issues</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">UserInvalidLoginParams</code></td>
      <td>101</td>
      <td>Invalid login parameters. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ObjectNotFound</code></td>
      <td>101</td>
      <td>The specified object or session doesn’t exist or could not be found. Can also indicate that you do not have the necessary permissions to read or write this object. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidQuery</code></td>
      <td>102</td>
      <td>There is a problem with the parameters used to construct this query. This could be an invalid field name or an invalid field type for a specific constraint. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidClassName</code></td>
      <td>103</td>
      <td>Missing or invalid classname. Classnames are case-sensitive. They must start with a letter, and a-zA-Z0-9_ are the only valid characters.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MissingObjectId</code></td>
      <td>104</td>
      <td>An unspecified object id.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidFieldName</code></td>
      <td>105</td>
      <td>An invalid field name. Keys are case-sensitive. They must start with a letter, and a-zA-Z0-9_ are the only valid characters. Some field names may be reserved. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidPointer</code></td>
      <td>106</td>
      <td>A malformed pointer was used. You would typically only see this if you have modified a client SDK.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidJSON</code></td>
      <td>107</td>
      <td>Badly formed JSON was received upstream. This either indicates you have done something unusual with modifying how things encode to JSON, or the network is failing badly. Can also indicate an invalid utf-8 string or use of multiple form encoded values. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">CommandUnavailable</code></td>
      <td>108</td>
      <td>The feature you tried to access is only available internally for testing purposes.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">NotInitialized</code></td>
      <td>109</td>
      <td>You must call Parse.initialize before using the Parse library. Check the Quick Start guide for your platform.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ObjectTooLarge</code></td>
      <td>116</td>
      <td>The object is too large.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ExceededConfigParamsError</code></td>
      <td>116</td>
      <td>You have reached the limit of 100 config parameters.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidLimitError</code></td>
      <td>117</td>
      <td>An invalid value was set for the limit. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidSkipError</code></td>
      <td>118</td>
      <td>An invalid value was set for skip. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OperationForbidden</code></td>
      <td>119</td>
      <td>The operation isn’t allowed for clients due to class-level permissions. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">CacheMiss</code></td>
      <td>120</td>
      <td>The result was not found in the cache.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidNestedKey</code></td>
      <td>121</td>
      <td>An invalid key was used in a nested JSONObject. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidACL</code></td>
      <td>123</td>
      <td>An invalid ACL was provided.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidEmailAddress</code></td>
      <td>125</td>
      <td>The email address was invalid.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DuplicateValue</code></td>
      <td>137</td>
      <td>Unique field was given a value that is already taken.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidRoleName</code></td>
      <td>139</td>
      <td>Role’s name is invalid.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ReservedValue</code></td>
      <td>139</td>
      <td>Field value is reserved.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ExceededCollectionQuota</code></td>
      <td>140</td>
      <td>You have reached the quota on the number of classes in your app. Please delete some classes if you need to add a new class.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ScriptFailed</code></td>
      <td>141</td>
      <td>Cloud Code script failed. Usually points to a JavaScript error. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FunctionNotFound</code></td>
      <td>141</td>
      <td>Cloud function not found. Check that the specified Cloud function is present in your Cloud Code script and has been deployed.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">JobNotFound</code></td>
      <td>141</td>
      <td>Background job not found. Check that the specified job is present in your Cloud Code script and has been deployed.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ValidationFailed</code></td>
      <td>142</td>
      <td>Cloud Code validation failed.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">WebhookError</code></td>
      <td>143</td>
      <td>Webhook error.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidImageData</code></td>
      <td>150</td>
      <td>Invalid image data.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">UnsavedFileError</code></td>
      <td>151</td>
      <td>An unsaved file.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidPushTimeError</code></td>
      <td>152</td>
      <td>An invalid push time was specified.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">HostingError</code></td>
      <td>158</td>
      <td>Hosting error.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidEventName</code></td>
      <td>160</td>
      <td>The provided analytics event name is invalid.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ClassNotEmpty</code></td>
      <td>255</td>
      <td>Class is not empty and cannot be dropped.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">AppNameInvalid</code></td>
      <td>256</td>
      <td>App name is invalid.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MissingAPIKeyError</code></td>
      <td>902</td>
      <td>The request is missing an API key.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidAPIKeyError</code></td>
      <td>903</td>
      <td>The request is using an invalid API key.</td>
    </tr>
  </tbody>
</table>

<h2 id="push-related-errors"><a class="anchorjs-link " href="/js/guide/#push-related-errors" aria-label="Anchor link for: push related errors" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Push related errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">IncorrectType</code></td>
      <td>111</td>
      <td>A field was set to an inconsistent type. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidChannelName</code></td>
      <td>112</td>
      <td>Invalid channel name. A channel name is either an empty string (the broadcast channel) or contains only a-zA-Z0-9_ characters and starts with a letter.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidSubscriptionType</code></td>
      <td>113</td>
      <td>Bad subscription type. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidDeviceToken</code></td>
      <td>114</td>
      <td>The provided device token is invalid.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PushMisconfigured</code></td>
      <td>115</td>
      <td>Push is misconfigured in your app.  Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PushWhereAndChannels</code></td>
      <td>115</td>
      <td>Can’t set channels for a query-targeted push. You can fix this by moving the channels into your push query constraints.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PushWhereAndType</code></td>
      <td>115</td>
      <td>Can’t set device type for a query-targeted push. You can fix this by incorporating the device type constraints into your push query.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PushMissingData</code></td>
      <td>115</td>
      <td>Push is missing a ‘data’ field.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PushMissingChannels</code></td>
      <td>115</td>
      <td>Non-query push is missing a ‘channels’ field. Fix by passing a ‘channels’ or ‘query’ field.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ClientPushDisabled</code></td>
      <td>115</td>
      <td>Client-initiated push is not enabled. Check your Parse app’s push notification settings.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">RestPushDisabled</code></td>
      <td>115</td>
      <td>REST-initiated push is not enabled. Check your Parse app’s push notification settings.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ClientPushWithURI</code></td>
      <td>115</td>
      <td>Client-initiated push cannot use the “uri” option.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PushQueryOrPayloadTooLarge</code></td>
      <td>115</td>
      <td>Your push query or data payload is too large. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidExpirationError</code></td>
      <td>138</td>
      <td>Invalid expiration value.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MissingPushIdError</code></td>
      <td>156</td>
      <td>A push id is missing. Deprecated.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MissingDeviceTypeError</code></td>
      <td>157</td>
      <td>The device type field is missing. Deprecated.</td>
    </tr>
  </tbody>
</table>

<h2 id="file-related-errors"><a class="anchorjs-link " href="/js/guide/#file-related-errors" aria-label="Anchor link for: file related errors" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>File related errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidFileName</code></td>
      <td>122</td>
      <td>An invalid filename was used for Parse File. A valid file name contains only a-zA-Z0-9_. characters and is between 1 and 128 characters.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MissingContentType</code></td>
      <td>126</td>
      <td>Missing content type.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MissingContentLength</code></td>
      <td>127</td>
      <td>Missing content length.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidContentLength</code></td>
      <td>128</td>
      <td>Invalid content length.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FileTooLarge</code></td>
      <td>129</td>
      <td>File size exceeds maximum allowed.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FileSaveError</code></td>
      <td>130</td>
      <td>Error saving a file.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FileDeleteError</code></td>
      <td>153</td>
      <td>File could not be deleted.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FileDeleteUnnamedError</code></td>
      <td>161</td>
      <td>Unnamed file could not be deleted.</td>
    </tr>
  </tbody>
</table>

<h2 id="installation-related-errors"><a class="anchorjs-link " href="/js/guide/#installation-related-errors" aria-label="Anchor link for: installation related errors" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Installation related errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidInstallationIdError</code></td>
      <td>132</td>
      <td>Invalid installation id.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidDeviceTypeError</code></td>
      <td>133</td>
      <td>Invalid device type.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidChannelsArrayError</code></td>
      <td>134</td>
      <td>Invalid channels array value.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MissingRequiredFieldError</code></td>
      <td>135</td>
      <td>Required field is missing.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ChangedImmutableFieldError</code></td>
      <td>136</td>
      <td>An immutable field was changed.</td>
    </tr>
  </tbody>
</table>

<h2 id="purchase-related-errors"><a class="anchorjs-link " href="/js/guide/#purchase-related-errors" aria-label="Anchor link for: purchase related errors" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Purchase related errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ReceiptMissing</code></td>
      <td>143</td>
      <td>Product purchase receipt is missing.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidPurchaseReceipt</code></td>
      <td>144</td>
      <td>Product purchase receipt is invalid.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PaymentDisabled</code></td>
      <td>145</td>
      <td>Payment is disabled on this device.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidProductIdentifier</code></td>
      <td>146</td>
      <td>The product identifier is invalid.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ProductNotFoundInAppStore</code></td>
      <td>147</td>
      <td>The product is not found in the App Store.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidServerResponse</code></td>
      <td>148</td>
      <td>The Apple server response is not valid.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ProductDownloadFilesystemError</code></td>
      <td>149</td>
      <td>The product fails to download due to file system error.</td>
    </tr>
  </tbody>
</table>

<h2 id="user-related-errors"><a class="anchorjs-link " href="/js/guide/#user-related-errors" aria-label="Anchor link for: user related errors" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>User related errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">UsernameMissing</code></td>
      <td>200</td>
      <td>The username is missing or empty.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PasswordMissing</code></td>
      <td>201</td>
      <td>The password is missing or empty.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">UsernameTaken</code></td>
      <td>202</td>
      <td>The username has already been taken.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">UserEmailTaken</code></td>
      <td>203</td>
      <td>Email has already been used.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">UserEmailMissing</code></td>
      <td>204</td>
      <td>The email is missing, and must be specified.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">UserWithEmailNotFound</code></td>
      <td>205</td>
      <td>A user with the specified email was not found.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">SessionMissing</code></td>
      <td>206</td>
      <td>A user object without a valid session could not be altered.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MustCreateUserThroughSignup</code></td>
      <td>207</td>
      <td>A user can only be created through signup.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">AccountAlreadyLinked</code></td>
      <td>208</td>
      <td>An account being linked is already linked to another user.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidSessionToken</code></td>
      <td>209</td>
      <td>The device’s session token is no longer valid. The application should ask the user to log in again.</td>
    </tr>
  </tbody>
</table>

<h2 id="linked-services-errors"><a class="anchorjs-link " href="/js/guide/#linked-services-errors" aria-label="Anchor link for: linked services errors" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Linked services errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">LinkedIdMissing</code></td>
      <td>250</td>
      <td>A user cannot be linked to an account because that account’s id could not be found.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidLinkedSession</code></td>
      <td>251</td>
      <td>A user with a linked (e.g. Facebook or Twitter) account has an invalid session. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidGeneralAuthData</code></td>
      <td>251</td>
      <td>Invalid auth data value used.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">BadAnonymousID</code></td>
      <td>251</td>
      <td>Anonymous id is not a valid lowercase UUID.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FacebookBadToken</code></td>
      <td>251</td>
      <td>The supplied Facebook session token is expired or invalid.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FacebookBadID</code></td>
      <td>251</td>
      <td>A user with a linked Facebook account has an invalid session.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FacebookWrongAppID</code></td>
      <td>251</td>
      <td>Unacceptable Facebook application id.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">TwitterVerificationFailed</code></td>
      <td>251</td>
      <td>Twitter credential verification failed.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">TwitterWrongID</code></td>
      <td>251</td>
      <td>Submitted Twitter id does not match the id associated with the submitted access token.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">TwitterWrongScreenName</code></td>
      <td>251</td>
      <td>Submitted Twitter handle does not match the handle associated with the submitted access token.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">TwitterConnectFailure</code></td>
      <td>251</td>
      <td>Twitter credentials could not be verified due to problems accessing the Twitter API.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">UnsupportedService</code></td>
      <td>252</td>
      <td>A service being linked (e.g. Facebook or Twitter) is unsupported. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">UsernameSigninDisabled</code></td>
      <td>252</td>
      <td>Authentication by username and password is not supported for this application. Check your Parse app’s authentication settings.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">AnonymousSigninDisabled</code></td>
      <td>252</td>
      <td>Anonymous users are not supported for this application. Check your Parse app’s authentication settings.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FacebookSigninDisabled</code></td>
      <td>252</td>
      <td>Authentication by Facebook is not supported for this application. Check your Parse app’s authentication settings.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">TwitterSigninDisabled</code></td>
      <td>252</td>
      <td>Authentication by Twitter is not supported for this application. Check your Parse app’s authentication settings.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvalidAuthDataError</code></td>
      <td>253</td>
      <td>An invalid authData value was passed. Check error message for more details.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">LinkingNotSupportedError</code></td>
      <td>999</td>
      <td>Linking to an external account not supported yet with signup_or_login. Use update instead.</td>
    </tr>
  </tbody>
</table>

<h2 id="client-only-errors"><a class="anchorjs-link " href="/js/guide/#client-only-errors" aria-label="Anchor link for: client only errors" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Client-only errors</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ConnectionFailed</code></td>
      <td>100</td>
      <td>The connection to the Parse servers failed.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">AggregateError</code></td>
      <td>600</td>
      <td>There were multiple errors. Aggregate errors have an “errors” property, which is an array of error objects with more detail about each error that occurred.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FileReadError </code></td>
      <td>601</td>
      <td>Unable to read input for a Parse File on the client.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">XDomainRequest</code></td>
      <td>602</td>
      <td>A real error code is unavailable because we had to use an XDomainRequest object to allow CORS requests in Internet Explorer, which strips the body from HTTP responses that have a non-2XX status code.</td>
    </tr>
  </tbody>
</table>

<h2 id="operational-issues"><a class="anchorjs-link " href="/js/guide/#operational-issues" aria-label="Anchor link for: operational issues" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Operational issues</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">RequestTimeout</code></td>
      <td>124</td>
      <td>The request was slow and timed out. Typically this indicates that the request is too expensive to run. You may see this when a Cloud function did not finish before timing out, or when a <code class="language-plaintext highlighter-rouge">Parse.Cloud.httpRequest</code> connection times out.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InefficientQueryError</code></td>
      <td>154</td>
      <td>An inefficient query was rejected by the server. Refer to the Performance Guide and slow query log.</td>
    </tr>
  </tbody>
</table>

<h2 id="other-issues"><a class="anchorjs-link " href="/js/guide/#other-issues" aria-label="Anchor link for: other issues" data-anchorjs-icon="#" style="position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Other issues</h2>

<table class="docs_table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OtherCause</code></td>
      <td>-1</td>
      <td>An unknown error or an error unrelated to Parse occurred.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InternalServerError</code></td>
      <td>1</td>
      <td>Internal server error. No information available.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ServiceUnavailable</code></td>
      <td>2</td>
      <td>The service is currently unavailable.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ClientDisconnected</code></td>
      <td>4</td>
      <td>Connection failure.</td>
    </tr>
  </tbody>
</table>

    


<div class="helpful">
	<span>Want to contribute to this doc? <a href="https://github.com/parse-community/docs/tree/gh-pages/_includes/common/errors.md">Edit this section.</a></span>
	<hr>
</div>

  </div>




                </div>

              </div>
          		<!-- footer goes here -->
            </div>
          </div><!-- end content grid col -->
        </div><!-- end .guide > .grid-container -->
      </div><!-- /.content__wrapper -->
    </div><!-- /.site__content -->
  </div><!-- /.site__wrapper -->

  <script src="./JavaScriptDevelopersGuide_Parse_files/bundle.js"></script>
  <script type="text/javascript" src="./JavaScriptDevelopersGuide_Parse_files/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
    apiKey: '579f8e0c7dd6303c268d2d257c5fa00e',
    indexName: 'parseplatform',
    inputSelector: '#algolia-doc-search',
    debug: false // Set debug to true if you want to inspect the dropdown
  });
  </script>


  <script src="./JavaScriptDevelopersGuide_Parse_files/modernizr.min.js"></script>
  <script src="./JavaScriptDevelopersGuide_Parse_files/anchor.min.js"></script>
  <script>
    anchors.options = {
      placement: 'left',
      icon: '#'
    };
    anchors.add();
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="" src="./JavaScriptDevelopersGuide_Parse_files/js"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-102564547-3');

    window.onload = function () {
      function copyToClipboard() {
        const textId = this.id.replace('btn','code')
        const copyText = document.getElementById(textId);
        const text = copyText.textContent || copyText.innerText;

        const input = document.createElement('textarea');
        input.innerHTML = text.replace(/\n$/, '');
        document.body.appendChild(input);
        input.select();
        input.setSelectionRange(0, 99999);
        document.execCommand('copy');
        document.body.removeChild(input);

        this.innerHTML = '✔️';
        setTimeout(() => {
          this.innerHTML = '📋';
        },2000)
      }
    let codes = document.querySelectorAll('.highlight > pre > code');
    let count = 0;
    codes.forEach((code) => {
      code.setAttribute("id", `code-${count}`);
      const btn = document.createElement('button');
      btn.innerHTML = "📋";
      btn.className = "btn-copy";
      btn.setAttribute("id", `btn-${count}`);
      btn.addEventListener("click",copyToClipboard);
      code.before(btn);
      count++;
    });
   }
  </script><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./JavaScriptDevelopersGuide_Parse_files/translate_24dp.png" width="20" height="20" alt="Google 번역"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">원본 텍스트</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">번역 제안하기</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>

<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>